{ storage
    (pair (pair (pair (big_map %CallOption
                         address
                         (pair (pair (timestamp %expiry) (nat %options))
                               (pair (nat %premium) (pair (nat %reward) (nat %strikePrice)))))
                      (map %InterestRate nat nat))
                (pair (nat %LockedSupply) (nat %WithdrawFund)))
          (pair (pair (nat %adminAccount) (address %administrator))
                (pair (bool %paused) (pair (nat %tokenMinted) (nat %totalSupply))))) ;
  parameter
    (or (or (or (unit %AdminWithdraw) (or (unit %ChangeState) (nat %ContractWriterBurn)))
            (or (nat %ContractWriterMint) (or (unit %ExerciseCallOption) (address %FreeSecurity))))
        (or (or (pair %OracleExerciseSecurity (address %owner) (nat %price))
                (or (pair %OraclePurchaseSecurity (address %address) (pair (nat %duration) (nat %price)))
                    (pair %PurchaseCallOption
                       (pair (nat %amount) (nat %duration))
                       (pair (nat %order) (nat %price)))))
            (or (pair %UpdatePremium (pair (nat %four) (nat %one)) (pair (nat %three) (nat %two)))
                (or (unit %default) (option %delegate key_hash))))) ;
  code { UNPAIR ;
         IF_LEFT
           { IF_LEFT
               { IF_LEFT
                   { DROP ;
                     DUP ;
                     CDR ;
                     CAR ;
                     CDR ;
                     SENDER ;
                     COMPARE ;
                     EQ ;
                     IF {}
                        { PUSH string "User not authorized to withdraw admin funds." ; FAILWITH } ;
                     DUP ;
                     CDR ;
                     CAR ;
                     CAR ;
                     PUSH nat 0 ;
                     COMPARE ;
                     LT ;
                     IF {} { PUSH string " No funds available to transfer" ; FAILWITH } ;
                     DUP ;
                     CDR ;
                     CAR ;
                     CAR ;
                     NIL operation ;
                     DUP 3 ;
                     CDR ;
                     CAR ;
                     CDR ;
                     CONTRACT unit ;
                     IF_NONE { PUSH int 305 ; FAILWITH } {} ;
                     PUSH mutez 1 ;
                     DIG 3 ;
                     MUL ;
                     UNIT ;
                     TRANSFER_TOKENS ;
                     CONS ;
                     SWAP ;
                     UNPAIR ;
                     SWAP ;
                     UNPAIR ;
                     CDR ;
                     PUSH nat 0 ;
                     PAIR ;
                     PAIR ;
                     SWAP ;
                     PAIR ;
                     SWAP }
                   { IF_LEFT
                       { DROP ;
                         DUP ;
                         CDR ;
                         CAR ;
                         CDR ;
                         SENDER ;
                         COMPARE ;
                         EQ ;
                         IF {}
                            { PUSH string "User not authorized to Change State of contract" ; FAILWITH } ;
                         DUP ;
                         UNPAIR ;
                         SWAP ;
                         UNPAIR ;
                         SWAP ;
                         CDR ;
                         DIG 3 ;
                         GET 5 ;
                         NOT ;
                         PAIR ;
                         SWAP ;
                         PAIR ;
                         SWAP ;
                         PAIR ;
                         NIL operation }
                       { DUP ;
                         DUP 3 ;
                         GET 7 ;
                         COMPARE ;
                         GE ;
                         IF {}
                            { PUSH string "Burn Amount is greater than Total Tokens minted" ; FAILWITH } ;
                         SWAP ;
                         DUP ;
                         CAR ;
                         CDR ;
                         CDR ;
                         SWAP ;
                         DUP ;
                         DUG 3 ;
                         GET 8 ;
                         ADD ;
                         SWAP ;
                         DUP ;
                         DUG 2 ;
                         MUL ;
                         DUP 3 ;
                         GET 7 ;
                         SWAP ;
                         EDIV ;
                         IF_NONE { PUSH int 252 ; FAILWITH } { CAR } ;
                         DIG 2 ;
                         DUP ;
                         CAR ;
                         CDR ;
                         CAR ;
                         SWAP ;
                         DUP ;
                         CAR ;
                         CDR ;
                         CDR ;
                         SWAP ;
                         DUP ;
                         DUG 5 ;
                         GET 8 ;
                         ADD ;
                         SUB ;
                         ABS ;
                         SWAP ;
                         DUP ;
                         DUG 2 ;
                         SWAP ;
                         COMPARE ;
                         GE ;
                         IF { DUP 3 ;
                              UNPAIR ;
                              SWAP ;
                              UNPAIR ;
                              SWAP ;
                              UNPAIR ;
                              SWAP ;
                              CDR ;
                              DUP 6 ;
                              DIG 7 ;
                              GET 7 ;
                              SUB ;
                              ABS ;
                              PAIR ;
                              SWAP ;
                              PAIR ;
                              SWAP ;
                              PAIR ;
                              SWAP ;
                              PAIR ;
                              DUG 2 ;
                              DUP ;
                              DUP 4 ;
                              CAR ;
                              CDR ;
                              CDR ;
                              COMPARE ;
                              GE ;
                              IF { DUP 3 ;
                                   UNPAIR ;
                                   UNPAIR ;
                                   SWAP ;
                                   CAR ;
                                   DUP 4 ;
                                   DIG 6 ;
                                   CAR ;
                                   CDR ;
                                   CDR ;
                                   SUB ;
                                   ABS ;
                                   SWAP ;
                                   PAIR ;
                                   SWAP ;
                                   PAIR ;
                                   PAIR ;
                                   DUG 2 }
                                 { DUP 3 ;
                                   CAR ;
                                   CDR ;
                                   CDR ;
                                   SWAP ;
                                   DUP ;
                                   DUG 2 ;
                                   SUB ;
                                   ABS ;
                                   DUP 4 ;
                                   UNPAIR ;
                                   SWAP ;
                                   UNPAIR ;
                                   SWAP ;
                                   UNPAIR ;
                                   SWAP ;
                                   CAR ;
                                   DIG 4 ;
                                   DIG 7 ;
                                   GET 8 ;
                                   SUB ;
                                   ABS ;
                                   SWAP ;
                                   PAIR ;
                                   SWAP ;
                                   PAIR ;
                                   SWAP ;
                                   PAIR ;
                                   SWAP ;
                                   UNPAIR ;
                                   SWAP ;
                                   CAR ;
                                   PUSH nat 0 ;
                                   SWAP ;
                                   PAIR ;
                                   SWAP ;
                                   PAIR ;
                                   PAIR ;
                                   DUG 2 } ;
                              NIL operation ;
                              PUSH address "KT19qoEwvhrH7XnFkbhJnKCr33ywomStTt2g" ;
                              CONTRACT %burn (pair (address %address) (nat %value)) ;
                              IF_NONE { PUSH string "burning wDAL call failed" ; FAILWITH } {} ;
                              PUSH mutez 0 ;
                              DIG 4 ;
                              SENDER ;
                              PAIR %address %value ;
                              TRANSFER_TOKENS ;
                              CONS ;
                              SENDER ;
                              CONTRACT unit ;
                              IF_NONE { PUSH int 277 ; FAILWITH } {} ;
                              PUSH mutez 1 ;
                              DIG 3 ;
                              MUL ;
                              UNIT ;
                              TRANSFER_TOKENS ;
                              CONS }
                            { DROP 2 ; NIL operation } } } }
               { IF_LEFT
                   { DUP ;
                     PUSH mutez 1 ;
                     MUL ;
                     AMOUNT ;
                     COMPARE ;
                     EQ ;
                     IF {}
                        { PUSH string "WrongCondition: sp.amount == sp.mutez(params.amount)" ;
                          FAILWITH } ;
                     PUSH nat 0 ;
                     DUP 3 ;
                     GET 7 ;
                     COMPARE ;
                     EQ ;
                     IF { DUP ;
                          DIG 2 ;
                          UNPAIR ;
                          SWAP ;
                          UNPAIR ;
                          SWAP ;
                          UNPAIR ;
                          SWAP ;
                          CDR ;
                          DIG 5 ;
                          PAIR ;
                          SWAP ;
                          PAIR ;
                          SWAP ;
                          PAIR ;
                          SWAP ;
                          PAIR ;
                          SWAP }
                        { SWAP ;
                          DUP ;
                          DUG 2 ;
                          GET 7 ;
                          MUL ;
                          SWAP ;
                          DUP ;
                          CAR ;
                          CDR ;
                          CDR ;
                          SWAP ;
                          DUP ;
                          DUG 3 ;
                          GET 8 ;
                          ADD ;
                          SWAP ;
                          EDIV ;
                          IF_NONE { PUSH int 234 ; FAILWITH } { CAR } ;
                          SWAP ;
                          UNPAIR ;
                          SWAP ;
                          UNPAIR ;
                          SWAP ;
                          UNPAIR ;
                          SWAP ;
                          UNPAIR ;
                          DUP 6 ;
                          ADD ;
                          PAIR ;
                          SWAP ;
                          PAIR ;
                          SWAP ;
                          PAIR ;
                          SWAP ;
                          PAIR ;
                          SWAP } ;
                     SWAP ;
                     UNPAIR ;
                     SWAP ;
                     UNPAIR ;
                     SWAP ;
                     UNPAIR ;
                     SWAP ;
                     CAR ;
                     PUSH mutez 1 ;
                     BALANCE ;
                     EDIV ;
                     IF_NONE
                       { PUSH string "unable to convert balance to nat value" ; FAILWITH }
                       {} ;
                     CAR ;
                     SWAP ;
                     PAIR ;
                     SWAP ;
                     PAIR ;
                     SWAP ;
                     PAIR ;
                     SWAP ;
                     PAIR ;
                     SWAP ;
                     NIL operation ;
                     PUSH address "KT19qoEwvhrH7XnFkbhJnKCr33ywomStTt2g" ;
                     CONTRACT %mint (pair (address %address) (nat %value)) ;
                     IF_NONE { PUSH string "minting wDAL call failed" ; FAILWITH } {} ;
                     PUSH mutez 0 ;
                     DIG 3 ;
                     SENDER ;
                     PAIR %address %value ;
                     TRANSFER_TOKENS ;
                     CONS }
                   { IF_LEFT
                       { DROP ;
                         DUP ;
                         CAR ;
                         CAR ;
                         CAR ;
                         SENDER ;
                         MEM ;
                         IF {} { PUSH string "Sender has not purchased Call Option" ; FAILWITH } ;
                         DUP ;
                         CAR ;
                         CAR ;
                         CAR ;
                         SENDER ;
                         GET ;
                         IF_NONE { PUSH int 164 ; FAILWITH } {} ;
                         CAR ;
                         CAR ;
                         NOW ;
                         COMPARE ;
                         LE ;
                         IF {} { PUSH string "PUT Options have already expired" ; FAILWITH } ;
                         NIL operation ;
                         PUSH address "KT1TeegbL5HrPqHivCq7Cg4Ph4y1TciFEHTm" ;
                         CONTRACT %SecuritiesExercise address ;
                         IF_NONE { PUSH string "Oracle Call failed" ; FAILWITH } {} ;
                         PUSH mutez 0 ;
                         SENDER ;
                         TRANSFER_TOKENS ;
                         CONS }
                       { SWAP ;
                         DUP ;
                         DUG 2 ;
                         CAR ;
                         CAR ;
                         CAR ;
                         SWAP ;
                         DUP ;
                         DUG 2 ;
                         MEM ;
                         IF {} { PUSH string "Order with such address does not exist." ; FAILWITH } ;
                         SWAP ;
                         DUP ;
                         DUG 2 ;
                         CAR ;
                         CAR ;
                         CAR ;
                         SWAP ;
                         DUP ;
                         DUG 2 ;
                         GET ;
                         IF_NONE { PUSH int 205 ; FAILWITH } {} ;
                         CAR ;
                         CAR ;
                         NOW ;
                         COMPARE ;
                         GT ;
                         IF { PUSH nat 1000000 ;
                              DUP 3 ;
                              CAR ;
                              CAR ;
                              CAR ;
                              DUP 3 ;
                              GET ;
                              IF_NONE { PUSH int 207 ; FAILWITH } {} ;
                              CAR ;
                              CDR ;
                              MUL ;
                              DUP 3 ;
                              UNPAIR ;
                              UNPAIR ;
                              SWAP ;
                              CDR ;
                              DIG 3 ;
                              DIG 5 ;
                              CAR ;
                              CDR ;
                              CAR ;
                              SUB ;
                              ABS ;
                              PAIR ;
                              SWAP ;
                              PAIR ;
                              PAIR ;
                              DUP ;
                              DUG 2 ;
                              UNPAIR ;
                              UNPAIR ;
                              SWAP ;
                              UNPAIR ;
                              SWAP ;
                              DIG 5 ;
                              CAR ;
                              CAR ;
                              CAR ;
                              DUP 6 ;
                              GET ;
                              IF_NONE { PUSH int 210 ; FAILWITH } {} ;
                              GET 3 ;
                              ADD ;
                              SWAP ;
                              PAIR ;
                              SWAP ;
                              PAIR ;
                              PAIR ;
                              DUP ;
                              DUG 2 ;
                              CAR ;
                              CAR ;
                              CAR ;
                              SWAP ;
                              DUP ;
                              DUG 2 ;
                              GET ;
                              IF_NONE { PUSH int 212 ; FAILWITH } {} ;
                              GET 5 ;
                              NIL operation ;
                              SENDER ;
                              CONTRACT unit ;
                              IF_NONE { PUSH int 213 ; FAILWITH } {} ;
                              PUSH mutez 1 ;
                              DIG 3 ;
                              MUL ;
                              UNIT ;
                              TRANSFER_TOKENS ;
                              CONS ;
                              DIG 2 ;
                              UNPAIR ;
                              UNPAIR ;
                              UNPAIR ;
                              NONE (pair (pair (timestamp %expiry) (nat %options))
                                         (pair (nat %premium) (pair (nat %reward) (nat %strikePrice)))) ;
                              DIG 6 ;
                              UPDATE ;
                              PAIR ;
                              PAIR ;
                              PAIR ;
                              SWAP }
                            { DROP ; NIL operation } } } } }
           { IF_LEFT
               { IF_LEFT
                   { PUSH address "KT1TeegbL5HrPqHivCq7Cg4Ph4y1TciFEHTm" ;
                     SENDER ;
                     COMPARE ;
                     EQ ;
                     IF {} { PUSH string "Sender isn't Oracle Contract" ; FAILWITH } ;
                     DUP ;
                     CDR ;
                     DUP 3 ;
                     CAR ;
                     CAR ;
                     CAR ;
                     DUP 3 ;
                     CAR ;
                     GET ;
                     IF_NONE { PUSH int 177 ; FAILWITH } {} ;
                     GET 6 ;
                     COMPARE ;
                     LT ;
                     IF {}
                        { PUSH string "Current Price is less than or equal to Strike Price" ;
                          FAILWITH } ;
                     DUP ;
                     CDR ;
                     DUP 3 ;
                     CAR ;
                     CAR ;
                     CAR ;
                     DUP 3 ;
                     CAR ;
                     GET ;
                     IF_NONE { PUSH int 179 ; FAILWITH } {} ;
                     GET 6 ;
                     COMPARE ;
                     LT ;
                     IF { PUSH nat 1000000 ;
                          DUP 3 ;
                          CAR ;
                          CAR ;
                          CAR ;
                          DUP 3 ;
                          CAR ;
                          GET ;
                          IF_NONE { PUSH int 181 ; FAILWITH } {} ;
                          CAR ;
                          CDR ;
                          MUL ;
                          DUP 3 ;
                          CAR ;
                          CAR ;
                          CAR ;
                          DUP 3 ;
                          CAR ;
                          GET ;
                          IF_NONE { PUSH int 183 ; FAILWITH } {} ;
                          CAR ;
                          CDR ;
                          PUSH nat 1000000 ;
                          DUP 5 ;
                          CAR ;
                          CAR ;
                          CAR ;
                          DUP 5 ;
                          CAR ;
                          GET ;
                          IF_NONE { PUSH int 183 ; FAILWITH } {} ;
                          GET 6 ;
                          MUL ;
                          MUL ;
                          DUP 3 ;
                          CDR ;
                          SWAP ;
                          EDIV ;
                          IF_NONE { PUSH int 184 ; FAILWITH } { CAR } ;
                          DUP 4 ;
                          UNPAIR ;
                          UNPAIR ;
                          SWAP ;
                          UNPAIR ;
                          SWAP ;
                          DIG 7 ;
                          CAR ;
                          CAR ;
                          CAR ;
                          DUP 8 ;
                          CAR ;
                          GET ;
                          IF_NONE { PUSH int 186 ; FAILWITH } {} ;
                          GET 3 ;
                          ADD ;
                          SWAP ;
                          PAIR ;
                          SWAP ;
                          PAIR ;
                          PAIR ;
                          DUP ;
                          DUG 4 ;
                          UNPAIR ;
                          UNPAIR ;
                          SWAP ;
                          UNPAIR ;
                          SWAP ;
                          DIG 7 ;
                          CAR ;
                          CAR ;
                          CAR ;
                          DUP 8 ;
                          CAR ;
                          GET ;
                          IF_NONE { PUSH int 187 ; FAILWITH } {} ;
                          GET 5 ;
                          ADD ;
                          SWAP ;
                          PAIR ;
                          SWAP ;
                          PAIR ;
                          PAIR ;
                          DUP ;
                          DUG 4 ;
                          UNPAIR ;
                          UNPAIR ;
                          SWAP ;
                          CDR ;
                          DUP 5 ;
                          DIG 7 ;
                          CAR ;
                          CDR ;
                          CAR ;
                          SUB ;
                          ABS ;
                          PAIR ;
                          SWAP ;
                          PAIR ;
                          PAIR ;
                          DUP ;
                          DUG 4 ;
                          UNPAIR ;
                          SWAP ;
                          UNPAIR ;
                          SWAP ;
                          UNPAIR ;
                          SWAP ;
                          CAR ;
                          DUP 5 ;
                          DUP 7 ;
                          SUB ;
                          ABS ;
                          DIG 8 ;
                          GET 8 ;
                          SUB ;
                          ABS ;
                          SWAP ;
                          PAIR ;
                          SWAP ;
                          PAIR ;
                          SWAP ;
                          PAIR ;
                          SWAP ;
                          PAIR ;
                          DUG 3 ;
                          SWAP ;
                          SUB ;
                          ABS ;
                          NIL operation ;
                          DUP 3 ;
                          CAR ;
                          CONTRACT unit ;
                          IF_NONE { PUSH int 194 ; FAILWITH } {} ;
                          PUSH mutez 1 ;
                          DIG 3 ;
                          MUL ;
                          UNIT ;
                          TRANSFER_TOKENS ;
                          CONS ;
                          DIG 2 ;
                          UNPAIR ;
                          UNPAIR ;
                          UNPAIR ;
                          NONE (pair (pair (timestamp %expiry) (nat %options))
                                     (pair (nat %premium) (pair (nat %reward) (nat %strikePrice)))) ;
                          DIG 6 ;
                          CAR ;
                          UPDATE ;
                          PAIR ;
                          PAIR ;
                          PAIR ;
                          SWAP }
                        { DROP ; NIL operation } }
                   { IF_LEFT
                       { PUSH address "KT1TeegbL5HrPqHivCq7Cg4Ph4y1TciFEHTm" ;
                         SENDER ;
                         COMPARE ;
                         EQ ;
                         IF {} { PUSH string "Sender isn't Oracle Contract" ; FAILWITH } ;
                         SWAP ;
                         DUP ;
                         CAR ;
                         CDR ;
                         CAR ;
                         SWAP ;
                         DUP ;
                         DUG 3 ;
                         GET 8 ;
                         COMPARE ;
                         GT ;
                         IF {}
                            { PUSH string "All Funds are locked up in existing CALL Options" ; FAILWITH } ;
                         SWAP ;
                         DUP ;
                         CAR ;
                         CDR ;
                         CAR ;
                         SWAP ;
                         DUP ;
                         DUG 3 ;
                         GET 8 ;
                         SUB ;
                         ABS ;
                         PUSH nat 1000000 ;
                         DUP 4 ;
                         CAR ;
                         CAR ;
                         CAR ;
                         DUP 4 ;
                         CAR ;
                         GET ;
                         IF_NONE { PUSH int 136 ; FAILWITH } {} ;
                         CAR ;
                         CDR ;
                         MUL ;
                         DUP 4 ;
                         CAR ;
                         CAR ;
                         CDR ;
                         DUP 4 ;
                         GET 3 ;
                         GET ;
                         IF_NONE { PUSH int 138 ; FAILWITH } {} ;
                         PUSH nat 10000 ;
                         DUP 6 ;
                         CAR ;
                         CAR ;
                         CAR ;
                         DUP 6 ;
                         CAR ;
                         GET ;
                         IF_NONE { PUSH int 138 ; FAILWITH } {} ;
                         CAR ;
                         CDR ;
                         MUL ;
                         MUL ;
                         DUP 4 ;
                         GET 4 ;
                         DUP 6 ;
                         CAR ;
                         CAR ;
                         CAR ;
                         DUP 6 ;
                         CAR ;
                         GET ;
                         IF_NONE { PUSH int 140 ; FAILWITH } {} ;
                         GET 6 ;
                         DUP 6 ;
                         GET 4 ;
                         SUB ;
                         ABS ;
                         DUP 3 ;
                         MUL ;
                         EDIV ;
                         IF_NONE { PUSH int 140 ; FAILWITH } { CAR } ;
                         ADD ;
                         DUP 5 ;
                         CAR ;
                         CAR ;
                         CAR ;
                         DUP 5 ;
                         CAR ;
                         GET ;
                         IF_NONE { PUSH int 142 ; FAILWITH } {} ;
                         GET 3 ;
                         DIG 5 ;
                         UNPAIR ;
                         UNPAIR ;
                         UNPAIR ;
                         DUP ;
                         DUP 10 ;
                         CAR ;
                         DUP ;
                         DUG 2 ;
                         GET ;
                         IF_NONE { PUSH int 144 ; FAILWITH } {} ;
                         UNPAIR ;
                         SWAP ;
                         CDR ;
                         DUP 9 ;
                         PAIR ;
                         SWAP ;
                         PAIR ;
                         SOME ;
                         SWAP ;
                         UPDATE ;
                         PAIR ;
                         PAIR ;
                         PAIR ;
                         DUG 5 ;
                         PUSH nat 10000 ;
                         DUP 7 ;
                         CAR ;
                         CAR ;
                         CAR ;
                         DUP 7 ;
                         CAR ;
                         GET ;
                         IF_NONE { PUSH int 146 ; FAILWITH } {} ;
                         CAR ;
                         CDR ;
                         MUL ;
                         DIG 2 ;
                         ADD ;
                         SWAP ;
                         DUP 6 ;
                         UNPAIR ;
                         SWAP ;
                         UNPAIR ;
                         UNPAIR ;
                         PUSH nat 1000 ;
                         PUSH nat 9 ;
                         DIG 11 ;
                         CAR ;
                         CAR ;
                         CAR ;
                         DUP 12 ;
                         CAR ;
                         GET ;
                         IF_NONE { PUSH int 148 ; FAILWITH } {} ;
                         CAR ;
                         CDR ;
                         MUL ;
                         MUL ;
                         ADD ;
                         PAIR ;
                         PAIR ;
                         SWAP ;
                         PAIR ;
                         DUP ;
                         DUG 6 ;
                         UNPAIR ;
                         UNPAIR ;
                         UNPAIR ;
                         DUP ;
                         DUP 10 ;
                         CAR ;
                         DUP ;
                         DUG 2 ;
                         GET ;
                         IF_NONE { PUSH int 149 ; FAILWITH } {} ;
                         UNPAIR ;
                         SWAP ;
                         UNPAIR ;
                         SWAP ;
                         CDR ;
                         PUSH nat 1000 ;
                         DIG 14 ;
                         CAR ;
                         CAR ;
                         CAR ;
                         DIG 14 ;
                         CAR ;
                         GET ;
                         IF_NONE { PUSH int 149 ; FAILWITH } {} ;
                         CAR ;
                         CDR ;
                         MUL ;
                         PAIR ;
                         SWAP ;
                         PAIR ;
                         SWAP ;
                         PAIR ;
                         SOME ;
                         SWAP ;
                         UPDATE ;
                         PAIR ;
                         PAIR ;
                         PAIR ;
                         DUG 4 ;
                         DUP 3 ;
                         DIG 4 ;
                         COMPARE ;
                         GE ;
                         IF {}
                            { PUSH string "Insufficient Funds to cover up Order Amount" ; FAILWITH } ;
                         COMPARE ;
                         GE ;
                         IF {}
                            { PUSH string "Premium is underpaid for the CALL Option contract" ; FAILWITH } ;
                         SWAP ;
                         UNPAIR ;
                         UNPAIR ;
                         SWAP ;
                         UNPAIR ;
                         DIG 4 ;
                         ADD ;
                         PAIR ;
                         SWAP ;
                         PAIR ;
                         PAIR ;
                         DUP ;
                         GET 8 ;
                         PUSH nat 9 ;
                         MUL ;
                         PUSH nat 10 ;
                         DUP 3 ;
                         CAR ;
                         CDR ;
                         CAR ;
                         MUL ;
                         COMPARE ;
                         LE ;
                         IF {}
                            { PUSH string "Options utilizes more than 90 percent of the pool's funds." ;
                              FAILWITH } ;
                         NIL operation }
                       { DUP ;
                         CAR ;
                         CAR ;
                         PUSH mutez 1 ;
                         MUL ;
                         AMOUNT ;
                         COMPARE ;
                         EQ ;
                         IF {}
                            { PUSH string "WrongCondition: sp.amount == sp.mutez(params.amount)" ;
                              FAILWITH } ;
                         SWAP ;
                         DUP ;
                         DUG 2 ;
                         CAR ;
                         CAR ;
                         CAR ;
                         SENDER ;
                         MEM ;
                         IF { PUSH string "CALL Options are already registered in owner's name " ;
                              FAILWITH }
                            {} ;
                         SWAP ;
                         DUP ;
                         DUG 2 ;
                         GET 5 ;
                         IF { PUSH string "Contract isn't accepting new Orders" ; FAILWITH } {} ;
                         DUP ;
                         CAR ;
                         CDR ;
                         PUSH (set nat) { 1 ; 7 ; 14 ; 21 } ;
                         SWAP ;
                         MEM ;
                         IF {}
                            { PUSH string "Invalid Duration for CALL Options contract" ; FAILWITH } ;
                         SWAP ;
                         UNPAIR ;
                         UNPAIR ;
                         UNPAIR ;
                         DUP 5 ;
                         GET 4 ;
                         PUSH nat 0 ;
                         PAIR %reward %strikePrice ;
                         DUP 6 ;
                         CAR ;
                         CAR ;
                         PAIR %premium ;
                         DUP 6 ;
                         GET 3 ;
                         NOW ;
                         PUSH int 60 ;
                         DUP ;
                         PUSH int 24 ;
                         DUP 11 ;
                         CAR ;
                         CDR ;
                         INT ;
                         MUL ;
                         MUL ;
                         MUL ;
                         ADD ;
                         PAIR %expiry %options ;
                         PAIR ;
                         SOME ;
                         SENDER ;
                         UPDATE ;
                         PAIR ;
                         PAIR ;
                         PAIR ;
                         SWAP ;
                         NIL operation ;
                         PUSH address "KT1TeegbL5HrPqHivCq7Cg4Ph4y1TciFEHTm" ;
                         CONTRACT %SecuritiesPurchase (pair (address %address) (nat %duration)) ;
                         IF_NONE { PUSH string "Oracle Call failed" ; FAILWITH } {} ;
                         PUSH mutez 0 ;
                         DIG 3 ;
                         CAR ;
                         CDR ;
                         SENDER ;
                         PAIR %address %duration ;
                         TRANSFER_TOKENS ;
                         CONS } } }
               { IF_LEFT
                   { SWAP ;
                     DUP ;
                     DUG 2 ;
                     CDR ;
                     CAR ;
                     CDR ;
                     SENDER ;
                     COMPARE ;
                     EQ ;
                     IF {} { PUSH string "User not authorized to Update Premiums" ; FAILWITH } ;
                     SWAP ;
                     UNPAIR ;
                     UNPAIR ;
                     UNPAIR ;
                     SWAP ;
                     DUP 5 ;
                     CAR ;
                     CDR ;
                     SOME ;
                     PUSH nat 1 ;
                     UPDATE ;
                     DUP 5 ;
                     GET 4 ;
                     SOME ;
                     PUSH nat 7 ;
                     UPDATE ;
                     DUP 5 ;
                     GET 3 ;
                     SOME ;
                     PUSH nat 14 ;
                     UPDATE ;
                     DIG 4 ;
                     CAR ;
                     CAR ;
                     SOME ;
                     PUSH nat 21 ;
                     UPDATE ;
                     SWAP ;
                     PAIR ;
                     PAIR ;
                     PAIR ;
                     NIL operation }
                   { IF_LEFT
                       { DROP ;
                         PUSH mutez 0 ;
                         AMOUNT ;
                         COMPARE ;
                         GE ;
                         IF {} { PUSH string "WrongCondition: sp.amount >= sp.tez(0)" ; FAILWITH } ;
                         UNPAIR ;
                         SWAP ;
                         UNPAIR ;
                         SWAP ;
                         UNPAIR ;
                         SWAP ;
                         UNPAIR ;
                         SWAP ;
                         PUSH mutez 1 ;
                         AMOUNT ;
                         EDIV ;
                         IF_NONE
                           { PUSH string "unable to convert transfer amount to nat value" ; FAILWITH }
                           {} ;
                         CAR ;
                         ADD ;
                         SWAP ;
                         PAIR ;
                         SWAP ;
                         PAIR ;
                         SWAP ;
                         PAIR ;
                         SWAP ;
                         PAIR ;
                         NIL operation }
                       { SWAP ;
                         DUP ;
                         DUG 2 ;
                         CDR ;
                         CAR ;
                         CDR ;
                         SENDER ;
                         COMPARE ;
                         EQ ;
                         IF {}
                            { PUSH string "Sender is not authorized to change vault's baker" ; FAILWITH } ;
                         SET_DELEGATE ;
                         NIL operation ;
                         SWAP ;
                         CONS } } } } ;
         NIL operation ;
         SWAP ;
         ITER { CONS } ;
         PAIR } }
