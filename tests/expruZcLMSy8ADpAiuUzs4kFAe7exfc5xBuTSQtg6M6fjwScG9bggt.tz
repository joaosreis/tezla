{ storage (pair (list %FA12List address) (address %factoryAdmin)) ;
  parameter
    (pair %create
       (pair (address %administrator) (pair (bytes %contract_metadata) (bytes %decimals)))
       (pair (bytes %icon) (pair (bytes %name) (bytes %symbol)))) ;
  code { CDR ;
         DUP ;
         CDR ;
         SENDER ;
         COMPARE ;
         EQ ;
         IF {} { PUSH string "NotAdmin" ; FAILWITH } ;
         PUSH nat 0 ;
         EMPTY_BIG_MAP nat (pair nat (map string bytes)) ;
         PAIR ;
         PUSH bool False ;
         PAIR ;
         EMPTY_BIG_MAP string bytes ;
         EMPTY_BIG_MAP address (pair (map address nat) nat) ;
         PAIR ;
         PUSH address "tz1hdQscorfqMzFqYxnrApuS5i6QSTuoAp3w" ;
         PAIR ;
         PAIR ;
         PUSH mutez 0 ;
         NONE key_hash ;
         CREATE_CONTRACT
           { parameter
               (or (or (or (pair %approve (address %spender) (nat %value))
                           (pair %burn (address %address) (nat %value)))
                       (or (pair %getAdministrator unit (contract address))
                           (or (pair %getAllowance (pair (address %owner) (address %spender)) (contract nat))
                               (pair %getBalance address (contract nat)))))
                   (or (or (pair %getTotalSupply unit (contract nat))
                           (pair %mint (address %address) (nat %value)))
                       (or (address %setAdministrator)
                           (or (bool %setPause) (pair %transfer (address %from) (pair (address %to) (nat %value))))))) ;
             storage
               (pair (pair (address %administrator)
                           (pair (big_map %balances address (pair (map %approvals address nat) (nat %balance)))
                                 (big_map %metadata string bytes)))
                     (pair (bool %paused)
                           (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_info string bytes)))
                                 (nat %totalSupply)))) ;
             code { UNPAIR ;
                    IF_LEFT
                      { IF_LEFT
                          { IF_LEFT
                              { SWAP ;
                                DUP ;
                                DUG 2 ;
                                CAR ;
                                GET 3 ;
                                SENDER ;
                                MEM ;
                                IF {}
                                   { SWAP ;
                                     UNPAIR ;
                                     UNPAIR ;
                                     SWAP ;
                                     UNPAIR ;
                                     PUSH (option (pair (map address nat) nat)) (Some (Pair {} 0)) ;
                                     SENDER ;
                                     UPDATE ;
                                     PAIR ;
                                     SWAP ;
                                     PAIR ;
                                     PAIR ;
                                     SWAP } ;
                                SWAP ;
                                DUP ;
                                DUG 2 ;
                                GET 3 ;
                                IF { PUSH string "FA1.2_Paused" ; FAILWITH } {} ;
                                PUSH nat 0 ;
                                DUP 3 ;
                                CAR ;
                                GET 3 ;
                                SENDER ;
                                GET ;
                                IF_NONE { PUSH int 62 ; FAILWITH } {} ;
                                CAR ;
                                DUP 3 ;
                                CAR ;
                                GET ;
                                IF_NONE { PUSH nat 0 } {} ;
                                COMPARE ;
                                EQ ;
                                IF { PUSH bool True } { DUP ; CDR ; PUSH nat 0 ; COMPARE ; EQ } ;
                                IF {} { PUSH string "FA1.2_UnsafeAllowanceChange" ; FAILWITH } ;
                                SWAP ;
                                UNPAIR ;
                                UNPAIR ;
                                SWAP ;
                                UNPAIR ;
                                DUP ;
                                SENDER ;
                                DUP ;
                                DUG 2 ;
                                GET ;
                                IF_NONE { PUSH int 64 ; FAILWITH } {} ;
                                DUP ;
                                CAR ;
                                DUP 8 ;
                                CDR ;
                                SOME ;
                                DIG 8 ;
                                CAR ;
                                UPDATE ;
                                UPDATE 1 ;
                                SOME ;
                                SWAP ;
                                UPDATE ;
                                PAIR ;
                                SWAP ;
                                PAIR ;
                                PAIR }
                              { SWAP ;
                                DUP ;
                                DUG 2 ;
                                CAR ;
                                CAR ;
                                SENDER ;
                                COMPARE ;
                                EQ ;
                                IF {} { PUSH string "FA1.2_NotAdmin" ; FAILWITH } ;
                                DUP ;
                                CDR ;
                                DUP 3 ;
                                CAR ;
                                GET 3 ;
                                DUP 3 ;
                                CAR ;
                                GET ;
                                IF_NONE { PUSH int 70 ; FAILWITH } {} ;
                                CDR ;
                                COMPARE ;
                                GE ;
                                IF {} { PUSH string "FA1.2_InsufficientBalance" ; FAILWITH } ;
                                SWAP ;
                                DUP ;
                                DUG 2 ;
                                UNPAIR ;
                                UNPAIR ;
                                SWAP ;
                                UNPAIR ;
                                DUP ;
                                DUP 6 ;
                                CAR ;
                                DUP ;
                                DUG 2 ;
                                GET ;
                                IF_NONE { PUSH int 71 ; FAILWITH } {} ;
                                DUP 7 ;
                                CDR ;
                                DIG 8 ;
                                CAR ;
                                GET 3 ;
                                DUP 9 ;
                                CAR ;
                                GET ;
                                IF_NONE { PUSH int 71 ; FAILWITH } {} ;
                                CDR ;
                                SUB ;
                                ISNAT ;
                                IF_NONE { PUSH int 71 ; FAILWITH } {} ;
                                UPDATE 2 ;
                                SOME ;
                                SWAP ;
                                UPDATE ;
                                PAIR ;
                                SWAP ;
                                PAIR ;
                                PAIR ;
                                DUP ;
                                DUG 2 ;
                                SWAP ;
                                CDR ;
                                DIG 2 ;
                                GET 6 ;
                                SUB ;
                                ISNAT ;
                                IF_NONE { PUSH int 72 ; FAILWITH } {} ;
                                UPDATE 6 } ;
                            NIL operation }
                          { IF_LEFT
                              { SWAP ;
                                DUP ;
                                DUG 2 ;
                                CAR ;
                                CAR ;
                                NIL operation ;
                                DIG 2 ;
                                CDR ;
                                PUSH mutez 0 ;
                                DIG 3 ;
                                TRANSFER_TOKENS ;
                                CONS }
                              { IF_LEFT
                                  { SWAP ;
                                    DUP ;
                                    DUG 2 ;
                                    CAR ;
                                    GET 3 ;
                                    SWAP ;
                                    DUP ;
                                    DUG 2 ;
                                    CAR ;
                                    CAR ;
                                    MEM ;
                                    IF { SWAP ;
                                         DUP ;
                                         DUG 2 ;
                                         CAR ;
                                         GET 3 ;
                                         SWAP ;
                                         DUP ;
                                         DUG 2 ;
                                         CAR ;
                                         CAR ;
                                         GET ;
                                         IF_NONE { PUSH int 101 ; FAILWITH } {} ;
                                         CAR ;
                                         SWAP ;
                                         DUP ;
                                         DUG 2 ;
                                         CAR ;
                                         CDR ;
                                         GET ;
                                         IF_NONE { PUSH nat 0 } {} }
                                       { PUSH nat 0 } ;
                                    NIL operation ;
                                    DIG 2 ;
                                    CDR ;
                                    PUSH mutez 0 ;
                                    DIG 3 ;
                                    TRANSFER_TOKENS ;
                                    CONS }
                                  { SWAP ;
                                    DUP ;
                                    DUG 2 ;
                                    CAR ;
                                    GET 3 ;
                                    SWAP ;
                                    DUP ;
                                    DUG 2 ;
                                    CAR ;
                                    MEM ;
                                    IF { SWAP ;
                                         DUP ;
                                         DUG 2 ;
                                         CAR ;
                                         GET 3 ;
                                         SWAP ;
                                         DUP ;
                                         DUG 2 ;
                                         CAR ;
                                         GET ;
                                         IF_NONE { PUSH int 94 ; FAILWITH } {} ;
                                         CDR }
                                       { PUSH nat 0 } ;
                                    NIL operation ;
                                    DIG 2 ;
                                    CDR ;
                                    PUSH mutez 0 ;
                                    DIG 3 ;
                                    TRANSFER_TOKENS ;
                                    CONS } } } }
                      { IF_LEFT
                          { IF_LEFT
                              { SWAP ;
                                DUP ;
                                DUG 2 ;
                                GET 6 ;
                                NIL operation ;
                                DIG 2 ;
                                CDR ;
                                PUSH mutez 0 ;
                                DIG 3 ;
                                TRANSFER_TOKENS ;
                                CONS }
                              { SWAP ;
                                DUP ;
                                DUG 2 ;
                                CAR ;
                                CAR ;
                                SENDER ;
                                COMPARE ;
                                EQ ;
                                IF {} { PUSH string "FA1.2_NotAdmin" ; FAILWITH } ;
                                SWAP ;
                                DUP ;
                                DUG 2 ;
                                CAR ;
                                GET 3 ;
                                SWAP ;
                                DUP ;
                                DUG 2 ;
                                CAR ;
                                MEM ;
                                IF {}
                                   { SWAP ;
                                     UNPAIR ;
                                     UNPAIR ;
                                     SWAP ;
                                     UNPAIR ;
                                     PUSH (option (pair (map address nat) nat)) (Some (Pair {} 0)) ;
                                     DUP 6 ;
                                     CAR ;
                                     UPDATE ;
                                     PAIR ;
                                     SWAP ;
                                     PAIR ;
                                     PAIR ;
                                     SWAP } ;
                                SWAP ;
                                UNPAIR ;
                                UNPAIR ;
                                SWAP ;
                                UNPAIR ;
                                DUP ;
                                DUP 6 ;
                                CAR ;
                                DUP ;
                                DUG 2 ;
                                GET ;
                                IF_NONE { PUSH int 39 ; FAILWITH } {} ;
                                DUP ;
                                CDR ;
                                DUP 8 ;
                                CDR ;
                                ADD ;
                                UPDATE 2 ;
                                SOME ;
                                SWAP ;
                                UPDATE ;
                                PAIR ;
                                SWAP ;
                                PAIR ;
                                PAIR ;
                                DUP ;
                                GET 6 ;
                                DIG 2 ;
                                CDR ;
                                ADD ;
                                UPDATE 6 ;
                                NIL operation } }
                          { IF_LEFT
                              { SWAP ;
                                DUP ;
                                DUG 2 ;
                                CAR ;
                                CAR ;
                                SENDER ;
                                COMPARE ;
                                EQ ;
                                IF {} { PUSH string "FA1.2_NotAdmin" ; FAILWITH } ;
                                SWAP ;
                                UNPAIR ;
                                CDR ;
                                DIG 2 ;
                                PAIR ;
                                PAIR }
                              { IF_LEFT
                                  { SWAP ;
                                    DUP ;
                                    DUG 2 ;
                                    CAR ;
                                    CAR ;
                                    SENDER ;
                                    COMPARE ;
                                    EQ ;
                                    IF {} { PUSH string "FA1.2_NotAdmin" ; FAILWITH } ;
                                    UPDATE 3 }
                                  { SWAP ;
                                    DUP ;
                                    DUG 2 ;
                                    CAR ;
                                    CAR ;
                                    SENDER ;
                                    COMPARE ;
                                    EQ ;
                                    IF { PUSH bool True }
                                       { SWAP ;
                                         DUP ;
                                         DUG 2 ;
                                         GET 3 ;
                                         IF { PUSH bool False }
                                            { DUP ;
                                              CAR ;
                                              SENDER ;
                                              COMPARE ;
                                              EQ ;
                                              IF { PUSH bool True }
                                                 { DUP ;
                                                   GET 4 ;
                                                   DUP 3 ;
                                                   CAR ;
                                                   GET 3 ;
                                                   DUP 3 ;
                                                   CAR ;
                                                   GET ;
                                                   IF_NONE { PUSH int 45 ; FAILWITH } {} ;
                                                   CAR ;
                                                   SENDER ;
                                                   GET ;
                                                   IF_NONE { PUSH int 45 ; FAILWITH } {} ;
                                                   COMPARE ;
                                                   GE } } } ;
                                    IF {} { PUSH string "FA1.2_NotAllowed" ; FAILWITH } ;
                                    SWAP ;
                                    DUP ;
                                    DUG 2 ;
                                    CAR ;
                                    GET 3 ;
                                    SWAP ;
                                    DUP ;
                                    DUG 2 ;
                                    CAR ;
                                    MEM ;
                                    IF {}
                                       { SWAP ;
                                         UNPAIR ;
                                         UNPAIR ;
                                         SWAP ;
                                         UNPAIR ;
                                         PUSH (option (pair (map address nat) nat)) (Some (Pair {} 0)) ;
                                         DUP 6 ;
                                         CAR ;
                                         UPDATE ;
                                         PAIR ;
                                         SWAP ;
                                         PAIR ;
                                         PAIR ;
                                         SWAP } ;
                                    SWAP ;
                                    DUP ;
                                    DUG 2 ;
                                    CAR ;
                                    GET 3 ;
                                    SWAP ;
                                    DUP ;
                                    DUG 2 ;
                                    GET 3 ;
                                    MEM ;
                                    IF {}
                                       { SWAP ;
                                         UNPAIR ;
                                         UNPAIR ;
                                         SWAP ;
                                         UNPAIR ;
                                         PUSH (option (pair (map address nat) nat)) (Some (Pair {} 0)) ;
                                         DUP 6 ;
                                         GET 3 ;
                                         UPDATE ;
                                         PAIR ;
                                         SWAP ;
                                         PAIR ;
                                         PAIR ;
                                         SWAP } ;
                                    DUP ;
                                    GET 4 ;
                                    DUP 3 ;
                                    CAR ;
                                    GET 3 ;
                                    DUP 3 ;
                                    CAR ;
                                    GET ;
                                    IF_NONE { PUSH int 51 ; FAILWITH } {} ;
                                    CDR ;
                                    COMPARE ;
                                    GE ;
                                    IF {} { PUSH string "FA1.2_InsufficientBalance" ; FAILWITH } ;
                                    SWAP ;
                                    DUP ;
                                    DUG 2 ;
                                    UNPAIR ;
                                    UNPAIR ;
                                    SWAP ;
                                    UNPAIR ;
                                    DUP ;
                                    DUP 6 ;
                                    CAR ;
                                    DUP ;
                                    DUG 2 ;
                                    GET ;
                                    IF_NONE { PUSH int 52 ; FAILWITH } {} ;
                                    DUP 7 ;
                                    GET 4 ;
                                    DIG 8 ;
                                    CAR ;
                                    GET 3 ;
                                    DUP 9 ;
                                    CAR ;
                                    GET ;
                                    IF_NONE { PUSH int 52 ; FAILWITH } {} ;
                                    CDR ;
                                    SUB ;
                                    ISNAT ;
                                    IF_NONE { PUSH int 52 ; FAILWITH } {} ;
                                    UPDATE 2 ;
                                    SOME ;
                                    SWAP ;
                                    UPDATE ;
                                    DUP ;
                                    DUP 6 ;
                                    GET 3 ;
                                    DUP ;
                                    DUG 2 ;
                                    GET ;
                                    IF_NONE { PUSH int 53 ; FAILWITH } {} ;
                                    DUP ;
                                    CDR ;
                                    DUP 8 ;
                                    GET 4 ;
                                    ADD ;
                                    UPDATE 2 ;
                                    SOME ;
                                    SWAP ;
                                    UPDATE ;
                                    PAIR ;
                                    SWAP ;
                                    PAIR ;
                                    PAIR ;
                                    SWAP ;
                                    DUP ;
                                    CAR ;
                                    SENDER ;
                                    COMPARE ;
                                    NEQ ;
                                    IF { SWAP ; DUP ; DUG 2 ; CAR ; CAR ; SENDER ; COMPARE ; NEQ }
                                       { PUSH bool False } ;
                                    IF { SWAP ;
                                         DUP ;
                                         DUG 2 ;
                                         UNPAIR ;
                                         UNPAIR ;
                                         SWAP ;
                                         UNPAIR ;
                                         DUP ;
                                         DUP 6 ;
                                         CAR ;
                                         DUP ;
                                         DUG 2 ;
                                         GET ;
                                         IF_NONE { PUSH int 55 ; FAILWITH } {} ;
                                         DUP ;
                                         CAR ;
                                         DUP 8 ;
                                         GET 4 ;
                                         DIG 9 ;
                                         CAR ;
                                         GET 3 ;
                                         DIG 9 ;
                                         CAR ;
                                         GET ;
                                         IF_NONE { PUSH int 55 ; FAILWITH } {} ;
                                         CAR ;
                                         SENDER ;
                                         GET ;
                                         IF_NONE { PUSH int 55 ; FAILWITH } {} ;
                                         SUB ;
                                         ISNAT ;
                                         IF_NONE { PUSH int 55 ; FAILWITH } {} ;
                                         SOME ;
                                         SENDER ;
                                         UPDATE ;
                                         UPDATE 1 ;
                                         SOME ;
                                         SWAP ;
                                         UPDATE ;
                                         PAIR ;
                                         SWAP ;
                                         PAIR ;
                                         PAIR }
                                       { DROP } } } ;
                            NIL operation } } ;
                    PAIR } } ;
         PAIR ;
         DUP ;
         CAR ;
         NIL operation ;
         SWAP ;
         CONS ;
         DIG 2 ;
         DUP ;
         CAR ;
         DIG 3 ;
         CDR ;
         CONS ;
         UPDATE 1 ;
         SWAP ;
         PAIR } }
