{ storage
    (pair (pair (address %admin)
                (pair (nat %auctionIds)
                      (big_map %auctions
                         address
                         (map nat
                              (pair (pair (pair (nat %assetId) (nat %bidCount)) (pair (bool %claimed) (address %creator)))
                                    (pair (pair (mutez %currentBidAmount) (address %currentBidOwner))
                                          (pair (int %duration) (timestamp %startTime))))))))
          (pair (big_map %authorizedSC address bool)
                (pair (bool %paused)
                      (map %selling address (big_map nat (pair (address %owner) (mutez %price))))))) ;
  parameter
    (or (or (or (pair %acceptAuction
                   (pair (nat %_auctionId) (address %_club))
                   (pair (address %_euranov) (pair (address %caller) (nat %clubFee))))
                (pair %bid (nat %_auctionId) (address %_bidder)))
            (or (pair %buyNFT (mutez %amount) (pair (address %buyer) (nat %id)))
                (or (address %cancelFanClub) (pair %cancelSelling (nat %id) (address %seller)))))
        (or (or (pair %createAuction
                   (pair (nat %_assetId) (int %_duration))
                   (pair (int %_startPrice) (address %owner)))
                (unit %pauseContract))
            (or (pair %putToSell (nat %id) (pair (address %owner) (nat %price)))
                (or (address %registerFanClub) (unit %unpauseContract))))) ;
  code { UNPAIR ;
         IF_LEFT
           { IF_LEFT
               { IF_LEFT
                   { SWAP ;
                     DUP ;
                     DUG 2 ;
                     GET 3 ;
                     SENDER ;
                     GET ;
                     IF_NONE { PUSH int 160 ; FAILWITH } {} ;
                     IF {} { PUSH string "engine: not auth" ; FAILWITH } ;
                     SWAP ;
                     DUP ;
                     DUG 2 ;
                     CAR ;
                     GET 4 ;
                     SENDER ;
                     GET ;
                     IF_NONE { PUSH int 150 ; FAILWITH } {} ;
                     SWAP ;
                     DUP ;
                     DUG 2 ;
                     CAR ;
                     CAR ;
                     GET ;
                     IF_NONE { PUSH int 150 ; FAILWITH } {} ;
                     GET 6 ;
                     PUSH int 60 ;
                     DUP 4 ;
                     CAR ;
                     GET 4 ;
                     SENDER ;
                     GET ;
                     IF_NONE { PUSH int 150 ; FAILWITH } {} ;
                     DUP 4 ;
                     CAR ;
                     CAR ;
                     GET ;
                     IF_NONE { PUSH int 150 ; FAILWITH } {} ;
                     GET 5 ;
                     MUL ;
                     ADD ;
                     PUSH string "Can't finalize auction yet" ;
                     FAILWITH }
                   { SWAP ;
                     DUP ;
                     DUG 2 ;
                     GET 5 ;
                     IF { PUSH string "WrongCondition: ~ self.data.paused" ; FAILWITH } {} ;
                     SWAP ;
                     DUP ;
                     DUG 2 ;
                     GET 3 ;
                     SENDER ;
                     GET ;
                     IF_NONE { PUSH int 121 ; FAILWITH } {} ;
                     IF {} { PUSH string "engine: not auth" ; FAILWITH } ;
                     DUP ;
                     CDR ;
                     DUP 3 ;
                     CAR ;
                     GET 4 ;
                     SENDER ;
                     GET ;
                     IF_NONE { PUSH int 122 ; FAILWITH } {} ;
                     DUP 3 ;
                     CAR ;
                     GET ;
                     IF_NONE { PUSH int 122 ; FAILWITH } {} ;
                     CAR ;
                     GET 4 ;
                     COMPARE ;
                     EQ ;
                     IF { PUSH string "It is your token" ; FAILWITH } {} ;
                     SWAP ;
                     DUP ;
                     DUG 2 ;
                     CAR ;
                     GET 4 ;
                     SENDER ;
                     GET ;
                     IF_NONE { PUSH int 123 ; FAILWITH } {} ;
                     SWAP ;
                     DUP ;
                     DUG 2 ;
                     CAR ;
                     GET ;
                     IF_NONE { PUSH int 123 ; FAILWITH } {} ;
                     GET 3 ;
                     CAR ;
                     AMOUNT ;
                     COMPARE ;
                     GT ;
                     IF {}
                        { PUSH string
                               "WrongCondition: sp.amount > self.data.auctions[sp.sender][params._auctionId].currentBidAmount" ;
                          FAILWITH } ;
                     PUSH nat 0 ;
                     DUP 3 ;
                     CAR ;
                     GET 4 ;
                     SENDER ;
                     GET ;
                     IF_NONE { PUSH int 125 ; FAILWITH } {} ;
                     DUP 3 ;
                     CAR ;
                     GET ;
                     IF_NONE { PUSH int 125 ; FAILWITH } {} ;
                     CAR ;
                     CAR ;
                     CDR ;
                     COMPARE ;
                     NEQ ;
                     IF { NIL operation ;
                          DUP 3 ;
                          CAR ;
                          GET 4 ;
                          SENDER ;
                          GET ;
                          IF_NONE { PUSH int 127 ; FAILWITH } {} ;
                          DUP 3 ;
                          CAR ;
                          GET ;
                          IF_NONE { PUSH int 127 ; FAILWITH } {} ;
                          GET 3 ;
                          CDR ;
                          CONTRACT unit ;
                          IF_NONE { PUSH int 127 ; FAILWITH } {} ;
                          AMOUNT ;
                          UNIT ;
                          TRANSFER_TOKENS ;
                          CONS }
                        { NIL operation } ;
                     DIG 2 ;
                     UNPAIR ;
                     UNPAIR ;
                     SWAP ;
                     UNPAIR ;
                     SWAP ;
                     DUP ;
                     SENDER ;
                     DUP ;
                     DUG 2 ;
                     GET ;
                     IF_NONE { PUSH int 130 ; FAILWITH } {} ;
                     DUP ;
                     DUP 9 ;
                     CAR ;
                     DUP ;
                     DUG 2 ;
                     GET ;
                     IF_NONE { PUSH int 130 ; FAILWITH } {} ;
                     UNPAIR ;
                     SWAP ;
                     UNPAIR ;
                     CDR ;
                     AMOUNT ;
                     PAIR ;
                     PAIR ;
                     SWAP ;
                     PAIR ;
                     SOME ;
                     SWAP ;
                     UPDATE ;
                     SOME ;
                     SWAP ;
                     UPDATE ;
                     DUP ;
                     SENDER ;
                     DUP ;
                     DUG 2 ;
                     GET ;
                     IF_NONE { PUSH int 131 ; FAILWITH } {} ;
                     DUP ;
                     DUP 9 ;
                     CAR ;
                     DUP ;
                     DUG 2 ;
                     GET ;
                     IF_NONE { PUSH int 131 ; FAILWITH } {} ;
                     UNPAIR ;
                     SWAP ;
                     UNPAIR ;
                     CAR ;
                     DUP 12 ;
                     CDR ;
                     SWAP ;
                     PAIR ;
                     PAIR ;
                     SWAP ;
                     PAIR ;
                     SOME ;
                     SWAP ;
                     UPDATE ;
                     SOME ;
                     SWAP ;
                     UPDATE ;
                     DUP ;
                     SENDER ;
                     DUP ;
                     DUG 2 ;
                     GET ;
                     IF_NONE { PUSH int 132 ; FAILWITH } {} ;
                     DUP ;
                     DIG 8 ;
                     CAR ;
                     DUP ;
                     DUG 2 ;
                     GET ;
                     IF_NONE { PUSH int 132 ; FAILWITH } {} ;
                     UNPAIR ;
                     UNPAIR ;
                     UNPAIR ;
                     SWAP ;
                     PUSH nat 1 ;
                     ADD ;
                     SWAP ;
                     PAIR ;
                     PAIR ;
                     PAIR ;
                     SOME ;
                     SWAP ;
                     UPDATE ;
                     SOME ;
                     SWAP ;
                     UPDATE ;
                     SWAP ;
                     PAIR ;
                     SWAP ;
                     PAIR ;
                     PAIR ;
                     SWAP } }
               { IF_LEFT
                   { SWAP ;
                     DUP ;
                     DUG 2 ;
                     GET 5 ;
                     IF { PUSH string "WrongCondition: ~ self.data.paused" ; FAILWITH } {} ;
                     DUP ;
                     CAR ;
                     DUP 3 ;
                     GET 6 ;
                     SENDER ;
                     GET ;
                     IF_NONE { PUSH int 90 ; FAILWITH } {} ;
                     DUP 3 ;
                     GET 4 ;
                     GET ;
                     IF_NONE { PUSH int 90 ; FAILWITH } {} ;
                     CDR ;
                     COMPARE ;
                     EQ ;
                     IF {} { PUSH string "Not the price" ; FAILWITH } ;
                     DUP ;
                     GET 3 ;
                     DUP 3 ;
                     GET 6 ;
                     SENDER ;
                     GET ;
                     IF_NONE { PUSH int 91 ; FAILWITH } {} ;
                     DUP 3 ;
                     GET 4 ;
                     GET ;
                     IF_NONE { PUSH int 91 ; FAILWITH } {} ;
                     CAR ;
                     COMPARE ;
                     EQ ;
                     IF { PUSH string "It is your token" ; FAILWITH } {} ;
                     SWAP ;
                     DUP ;
                     DUG 2 ;
                     GET 3 ;
                     SENDER ;
                     GET ;
                     IF_NONE { PUSH int 92 ; FAILWITH } {} ;
                     IF {} { PUSH string "engine: not auth" ; FAILWITH } ;
                     SWAP ;
                     DUP ;
                     GET 6 ;
                     DUP ;
                     SENDER ;
                     DUP ;
                     DUG 2 ;
                     GET ;
                     IF_NONE { PUSH int 93 ; FAILWITH } {} ;
                     NONE (pair address mutez) ;
                     DIG 5 ;
                     GET 4 ;
                     UPDATE ;
                     SOME ;
                     SWAP ;
                     UPDATE ;
                     UPDATE 6 }
                   { IF_LEFT
                       { SWAP ;
                         DUP ;
                         DUG 2 ;
                         CAR ;
                         CAR ;
                         SENDER ;
                         COMPARE ;
                         EQ ;
                         IF {} { PUSH string "Not admin" ; FAILWITH } ;
                         SWAP ;
                         DUP ;
                         GET 3 ;
                         PUSH (option bool) (Some False) ;
                         DUP 4 ;
                         UPDATE ;
                         UPDATE 3 ;
                         DUP ;
                         GET 6 ;
                         NONE (big_map nat (pair address mutez)) ;
                         DUP 4 ;
                         UPDATE ;
                         UPDATE 6 ;
                         UNPAIR ;
                         UNPAIR ;
                         SWAP ;
                         UNPAIR ;
                         SWAP ;
                         NONE (map nat
                                   (pair (pair (pair nat nat) (pair bool address))
                                         (pair (pair mutez address) (pair int timestamp)))) ;
                         DIG 5 ;
                         UPDATE ;
                         SWAP ;
                         PAIR ;
                         SWAP ;
                         PAIR ;
                         PAIR }
                       { DUP ;
                         CDR ;
                         DUP 3 ;
                         GET 6 ;
                         SENDER ;
                         GET ;
                         IF_NONE { PUSH int 79 ; FAILWITH } {} ;
                         DUP 3 ;
                         CAR ;
                         GET ;
                         IF_NONE { PUSH int 79 ; FAILWITH } {} ;
                         CAR ;
                         COMPARE ;
                         EQ ;
                         IF {} { PUSH string "It is not your token" ; FAILWITH } ;
                         SWAP ;
                         DUP ;
                         DUG 2 ;
                         GET 3 ;
                         SENDER ;
                         GET ;
                         IF_NONE { PUSH int 80 ; FAILWITH } {} ;
                         IF {} { PUSH string "engine: not auth" ; FAILWITH } ;
                         SWAP ;
                         DUP ;
                         GET 6 ;
                         DUP ;
                         SENDER ;
                         DUP ;
                         DUG 2 ;
                         GET ;
                         IF_NONE { PUSH int 82 ; FAILWITH } {} ;
                         NONE (pair address mutez) ;
                         DIG 5 ;
                         CAR ;
                         UPDATE ;
                         SOME ;
                         SWAP ;
                         UPDATE ;
                         UPDATE 6 } } ;
                 NIL operation } }
           { IF_LEFT
               { IF_LEFT
                   { SWAP ;
                     DUP ;
                     DUG 2 ;
                     GET 5 ;
                     IF { PUSH string "WrongCondition: ~ self.data.paused" ; FAILWITH } {} ;
                     SWAP ;
                     DUP ;
                     DUG 2 ;
                     GET 3 ;
                     SENDER ;
                     GET ;
                     IF_NONE { PUSH int 104 ; FAILWITH } {} ;
                     IF {} { PUSH string "engine: not auth" ; FAILWITH } ;
                     SWAP ;
                     DUP ;
                     DUG 2 ;
                     UNPAIR ;
                     UNPAIR ;
                     SWAP ;
                     UNPAIR ;
                     SWAP ;
                     DUP ;
                     SENDER ;
                     DUP ;
                     DUG 2 ;
                     GET ;
                     IF_NONE { PUSH int 106 ; FAILWITH } {} ;
                     NOW ;
                     DUP 8 ;
                     CAR ;
                     CDR ;
                     PAIR ;
                     DUP 8 ;
                     GET 4 ;
                     PUSH mutez 1000000 ;
                     DUP 10 ;
                     GET 3 ;
                     ISNAT ;
                     IF_NONE { PUSH int 106 ; FAILWITH } {} ;
                     MUL ;
                     PAIR ;
                     PAIR ;
                     DUP 8 ;
                     GET 4 ;
                     PUSH bool False ;
                     PAIR ;
                     PUSH nat 0 ;
                     DIG 9 ;
                     CAR ;
                     CAR ;
                     PAIR ;
                     PAIR ;
                     PAIR ;
                     SOME ;
                     DIG 7 ;
                     CAR ;
                     GET 3 ;
                     UPDATE ;
                     SOME ;
                     SWAP ;
                     UPDATE ;
                     SWAP ;
                     PUSH nat 1 ;
                     ADD ;
                     PAIR ;
                     SWAP ;
                     PAIR ;
                     PAIR }
                   { DROP ;
                     DUP ;
                     CAR ;
                     CAR ;
                     SENDER ;
                     COMPARE ;
                     EQ ;
                     IF {} { PUSH string "Not admin" ; FAILWITH } ;
                     PUSH bool True ;
                     UPDATE 5 } }
               { IF_LEFT
                   { SWAP ;
                     DUP ;
                     DUG 2 ;
                     GET 3 ;
                     SENDER ;
                     GET ;
                     IF_NONE { PUSH int 71 ; FAILWITH } {} ;
                     IF {} { PUSH string "engine: not auth" ; FAILWITH } ;
                     DUP ;
                     GET 4 ;
                     PUSH nat 0 ;
                     COMPARE ;
                     LT ;
                     IF {} { PUSH string "Price invalid" ; FAILWITH } ;
                     SWAP ;
                     DUP ;
                     GET 6 ;
                     DUP ;
                     SENDER ;
                     DUP ;
                     DUG 2 ;
                     GET ;
                     IF_NONE { PUSH int 73 ; FAILWITH } {} ;
                     PUSH mutez 1000000 ;
                     DUP 6 ;
                     GET 4 ;
                     MUL ;
                     DUP 6 ;
                     GET 3 ;
                     PAIR ;
                     SOME ;
                     DIG 5 ;
                     CAR ;
                     UPDATE ;
                     SOME ;
                     SWAP ;
                     UPDATE ;
                     UPDATE 6 }
                   { IF_LEFT
                       { SWAP ;
                         DUP ;
                         DUG 2 ;
                         CAR ;
                         CAR ;
                         SENDER ;
                         COMPARE ;
                         EQ ;
                         IF {} { PUSH string "Not admin" ; FAILWITH } ;
                         SWAP ;
                         DUP ;
                         GET 3 ;
                         PUSH (option bool) (Some True) ;
                         DUP 4 ;
                         UPDATE ;
                         UPDATE 3 ;
                         DUP ;
                         GET 6 ;
                         EMPTY_BIG_MAP nat (pair address mutez) ;
                         SOME ;
                         DUP 4 ;
                         UPDATE ;
                         UPDATE 6 ;
                         UNPAIR ;
                         UNPAIR ;
                         SWAP ;
                         UNPAIR ;
                         SWAP ;
                         PUSH (option
                                 (map nat
                                      (pair (pair (pair nat nat) (pair bool address))
                                            (pair (pair mutez address) (pair int timestamp)))))
                              (Some {}) ;
                         DIG 5 ;
                         UPDATE ;
                         SWAP ;
                         PAIR ;
                         SWAP ;
                         PAIR ;
                         PAIR }
                       { DROP ;
                         DUP ;
                         CAR ;
                         CAR ;
                         SENDER ;
                         COMPARE ;
                         EQ ;
                         IF {} { PUSH string "Not admin" ; FAILWITH } ;
                         PUSH bool False ;
                         UPDATE 5 } } } ;
             NIL operation } ;
         NIL operation ;
         SWAP ;
         ITER { CONS } ;
         PAIR } }
