{ storage
    (pair (pair (pair (pair (pair (pair (bool %check) (map %deck int (map int int))) (bool %draw))
                            (map %kings int (pair (pair (int %i) (int %j)) (bool %moved))))
                      (int %nextPlayer))
                (option %previousPawnMove
                   (pair (pair %f (int %i) (int %j)) (pair %t (int %i) (int %j)))))
          (int %winner)) ;
  parameter (pair (pair %f (int %i) (int %j)) (pair %t (int %i) (int %j))) ;
  code { DUP ;
         CDR ;
         SWAP ;
         CAR ;
         PUSH int 0 ;
         DIG 2 ;
         DUP ;
         DUG 3 ;
         CDR ;
         COMPARE ;
         EQ ;
         IF { { SWAP ; DUP ; DUG 2 ; CAR ; CAR ; CAR ; CAR ; CDR ; NOT } }
            { PUSH bool False } ;
         IF { {} }
            { { PUSH string "WrongCondition: (self.data.winner == 0) & (~ self.data.draw)" ;
                FAILWITH } } ;
         DUP ;
         CAR ;
         CAR ;
         PUSH int 0 ;
         SWAP ;
         COMPARE ;
         GE ;
         IF { { DUP ; CAR ; CAR ; PUSH int 8 ; COMPARE ; GT } }
            { PUSH bool False } ;
         IF { {} }
            { { PUSH string "WrongCondition: (params.f.i >= 0) & (params.f.i < 8)" ;
                FAILWITH } } ;
         DUP ;
         CAR ;
         CDR ;
         PUSH int 0 ;
         SWAP ;
         COMPARE ;
         GE ;
         IF { { DUP ; CAR ; CDR ; PUSH int 8 ; COMPARE ; GT } }
            { PUSH bool False } ;
         IF { {} }
            { { PUSH string "WrongCondition: (params.f.j >= 0) & (params.f.j < 8)" ;
                FAILWITH } } ;
         DUP ;
         CDR ;
         CAR ;
         PUSH int 0 ;
         SWAP ;
         COMPARE ;
         GE ;
         IF { { DUP ; CDR ; CAR ; PUSH int 8 ; COMPARE ; GT } }
            { PUSH bool False } ;
         IF { {} }
            { { PUSH string "WrongCondition: (params.t.i >= 0) & (params.t.i < 8)" ;
                FAILWITH } } ;
         DUP ;
         CDR ;
         CDR ;
         PUSH int 0 ;
         SWAP ;
         COMPARE ;
         GE ;
         IF { { DUP ; CDR ; CDR ; PUSH int 8 ; COMPARE ; GT } }
            { PUSH bool False } ;
         IF { {} }
            { { PUSH string "WrongCondition: (params.t.j >= 0) & (params.t.j < 8)" ;
                FAILWITH } } ;
         SWAP ;
         DUP ;
         DUG 2 ;
         CAR ;
         CAR ;
         CDR ;
         DIG 2 ;
         DUP ;
         DUG 3 ;
         CAR ;
         CAR ;
         CAR ;
         CAR ;
         CAR ;
         CDR ;
         DIG 2 ;
         DUP ;
         DUG 3 ;
         CAR ;
         CAR ;
         GET ;
         IF_NONE { { PUSH unit Unit ; FAILWITH } } { {} } ;
         DIG 2 ;
         DUP ;
         DUG 3 ;
         CAR ;
         CDR ;
         GET ;
         IF_NONE { { PUSH unit Unit ; FAILWITH } } { {} } ;
         PUSH int 0 ;
         COMPARE ;
         COMPARE ;
         EQ ;
         IF { {} }
            { { PUSH string
                     "WrongCondition: (sp.sign(self.data.deck[params.f.i][params.f.j])) == self.data.nextPlayer" ;
                FAILWITH } } ;
         SWAP ;
         DUP ;
         DUG 2 ;
         CAR ;
         CAR ;
         CDR ;
         DIG 2 ;
         DUP ;
         DUG 3 ;
         CAR ;
         CAR ;
         CAR ;
         CAR ;
         CAR ;
         CDR ;
         DIG 2 ;
         DUP ;
         DUG 3 ;
         CDR ;
         CAR ;
         GET ;
         IF_NONE { { PUSH unit Unit ; FAILWITH } } { {} } ;
         DIG 2 ;
         DUP ;
         DUG 3 ;
         CDR ;
         CDR ;
         GET ;
         IF_NONE { { PUSH unit Unit ; FAILWITH } } { {} } ;
         PUSH int 0 ;
         COMPARE ;
         COMPARE ;
         NEQ ;
         IF { {} }
            { { PUSH string
                     "WrongCondition: (sp.sign(self.data.deck[params.t.i][params.t.j])) != self.data.nextPlayer" ;
                FAILWITH } } ;
         PUSH nat 1 ;
         DIG 2 ;
         DUP ;
         DUG 3 ;
         CAR ;
         CAR ;
         CAR ;
         CAR ;
         CAR ;
         CDR ;
         DIG 2 ;
         DUP ;
         DUG 3 ;
         CAR ;
         CAR ;
         GET ;
         IF_NONE { { PUSH unit Unit ; FAILWITH } } { {} } ;
         DIG 2 ;
         DUP ;
         DUG 3 ;
         CAR ;
         CDR ;
         GET ;
         IF_NONE { { PUSH unit Unit ; FAILWITH } } { {} } ;
         ABS ;
         COMPARE ;
         EQ ;
         IF { { DUP ;
                CAR ;
                CDR ;
                PUSH int 0 ;
                SWAP ;
                DIG 2 ;
                DUP ;
                DUG 3 ;
                CDR ;
                CDR ;
                SUB ;
                COMPARE ;
                NEQ ;
                IF { { PUSH int 0 ;
                       DIG 2 ;
                       DUP ;
                       DUG 3 ;
                       CAR ;
                       CAR ;
                       CAR ;
                       CAR ;
                       CAR ;
                       CDR ;
                       DIG 2 ;
                       DUP ;
                       DUG 3 ;
                       CDR ;
                       CAR ;
                       GET ;
                       IF_NONE { { PUSH unit Unit ; FAILWITH } } { {} } ;
                       DIG 2 ;
                       DUP ;
                       DUG 3 ;
                       CDR ;
                       CDR ;
                       GET ;
                       IF_NONE { { PUSH unit Unit ; FAILWITH } } { {} } ;
                       PUSH int 0 ;
                       COMPARE ;
                       COMPARE ;
                       EQ } }
                   { PUSH bool False } ;
                IF { { DUP ;
                       CAR ;
                       CDR ;
                       PUSH nat 1 ;
                       SWAP ;
                       DIG 2 ;
                       DUP ;
                       DUG 3 ;
                       CDR ;
                       CDR ;
                       SUB ;
                       ABS ;
                       COMPARE ;
                       EQ ;
                       IF { {} }
                          { { PUSH string "WrongCondition: (abs(params.t.j - params.f.j)) == 1" ;
                              FAILWITH } } ;
                       SWAP ;
                       DUP ;
                       DUG 2 ;
                       CAR ;
                       CDR ;
                       IF_NONE { PUSH bool False } { { DROP ; PUSH bool True } } ;
                       IF { { SWAP ;
                              DUP ;
                              DUG 2 ;
                              CAR ;
                              CDR ;
                              IF_NONE { { PUSH unit Unit ; FAILWITH } } { {} } ;
                              CDR ;
                              CAR ;
                              DIG 2 ;
                              DUP ;
                              DUG 3 ;
                              CAR ;
                              CDR ;
                              IF_NONE { { PUSH unit Unit ; FAILWITH } } { {} } ;
                              CAR ;
                              CAR ;
                              COMPARE ;
                              EQ ;
                              IF { {} }
                                 { { PUSH string
                                          "WrongCondition: self.data.previousPawnMove.openSome().f.i == self.data.previousPawnMove.openSome().t.i" ;
                                     FAILWITH } } ;
                              SWAP ;
                              DUP ;
                              DUG 2 ;
                              CAR ;
                              CAR ;
                              CDR ;
                              PUSH int 2 ;
                              MUL ;
                              DIG 2 ;
                              DUP ;
                              DUG 3 ;
                              CAR ;
                              CDR ;
                              IF_NONE { { PUSH unit Unit ; FAILWITH } } { {} } ;
                              CDR ;
                              CDR ;
                              SUB ;
                              DIG 2 ;
                              DUP ;
                              DUG 3 ;
                              CAR ;
                              CDR ;
                              IF_NONE { { PUSH unit Unit ; FAILWITH } } { {} } ;
                              CAR ;
                              CDR ;
                              COMPARE ;
                              EQ ;
                              IF { {} }
                                 { { PUSH string
                                          "WrongCondition: self.data.previousPawnMove.openSome().f.j == (self.data.previousPawnMove.openSome().t.j - (2 * self.data.nextPlayer))" ;
                                     FAILWITH } } } }
                          { {} } } }
                   { {} } ;
                SWAP ;
                DUP ;
                DUG 2 ;
                DUP ;
                CDR ;
                SWAP ;
                CAR ;
                CAR ;
                DIG 2 ;
                DUP ;
                DUG 3 ;
                CDR ;
                DIG 3 ;
                DUP ;
                DUG 4 ;
                CAR ;
                PAIR ;
                SOME ;
                SWAP ;
                PAIR ;
                PAIR ;
                DUG 2 ;
                SWAP ;
                DROP } }
            { { SWAP ;
                DUP ;
                DUG 2 ;
                DUP ;
                CDR ;
                SWAP ;
                CAR ;
                CAR ;
                NONE (pair (pair %f (int %i) (int %j)) (pair %t (int %i) (int %j))) ;
                SWAP ;
                PAIR ;
                PAIR ;
                DUG 2 ;
                SWAP ;
                DROP } } ;
         PUSH nat 5 ;
         DIG 2 ;
         DUP ;
         DUG 3 ;
         CAR ;
         CAR ;
         CAR ;
         CAR ;
         CAR ;
         CDR ;
         DIG 2 ;
         DUP ;
         DUG 3 ;
         CAR ;
         CAR ;
         GET ;
         IF_NONE { { PUSH unit Unit ; FAILWITH } } { {} } ;
         DIG 2 ;
         DUP ;
         DUG 3 ;
         CAR ;
         CDR ;
         GET ;
         IF_NONE { { PUSH unit Unit ; FAILWITH } } { {} } ;
         ABS ;
         COMPARE ;
         EQ ;
         IF { { DUP ;
                CAR ;
                CDR ;
                PUSH int 0 ;
                SWAP ;
                DIG 2 ;
                DUP ;
                DUG 3 ;
                CDR ;
                CDR ;
                SUB ;
                COMPARE ;
                EQ ;
                IF { PUSH bool True }
                   { { DUP ;
                       CAR ;
                       CAR ;
                       PUSH int 0 ;
                       SWAP ;
                       DIG 2 ;
                       DUP ;
                       DUG 3 ;
                       CDR ;
                       CAR ;
                       SUB ;
                       COMPARE ;
                       EQ } } ;
                IF { PUSH bool True }
                   { { DUP ;
                       CAR ;
                       CAR ;
                       SWAP ;
                       DUP ;
                       DUG 2 ;
                       CDR ;
                       CAR ;
                       SUB ;
                       ABS ;
                       SWAP ;
                       DUP ;
                       DUG 2 ;
                       CAR ;
                       CDR ;
                       DIG 2 ;
                       DUP ;
                       DUG 3 ;
                       CDR ;
                       CDR ;
                       SUB ;
                       ABS ;
                       COMPARE ;
                       EQ } } ;
                IF { {} }
                   { { PUSH string
                            "WrongCondition: (((params.t.j - params.f.j) == 0) | ((params.t.i - params.f.i) == 0)) | ((abs(params.t.j - params.f.j)) == (abs(params.t.i - params.f.i)))" ;
                       FAILWITH } } ;
                DUP ;
                CAR ;
                CDR ;
                PUSH int 1 ;
                SWAP ;
                DIG 2 ;
                DUP ;
                DUG 3 ;
                CDR ;
                CDR ;
                SUB ;
                ABS ;
                DUP ;
                DIG 3 ;
                DUP ;
                DUG 4 ;
                CAR ;
                CAR ;
                DIG 4 ;
                DUP ;
                DUG 5 ;
                CDR ;
                CAR ;
                SUB ;
                ABS ;
                DUP ;
                DUG 2 ;
                COMPARE ;
                LE ;
                IF { DROP } { { SWAP ; DROP } } ;
                INT ;
                SUB ;
                PUSH int 1 ;
                DUP ;
                DIG 2 ;
                DUP ;
                DUG 3 ;
                COMPARE ;
                GT ;
                LOOP { PUSH int 0 ;
                       DIG 4 ;
                       DUP ;
                       DUG 5 ;
                       CAR ;
                       CAR ;
                       CAR ;
                       CAR ;
                       CAR ;
                       CDR ;
                       DIG 4 ;
                       DUP ;
                       DUG 5 ;
                       CAR ;
                       CAR ;
                       DIG 5 ;
                       DUP ;
                       DUG 6 ;
                       CDR ;
                       CAR ;
                       SUB ;
                       PUSH int 0 ;
                       COMPARE ;
                       DIG 3 ;
                       DUP ;
                       DUG 4 ;
                       MUL ;
                       DIG 5 ;
                       DUP ;
                       DUG 6 ;
                       CAR ;
                       CAR ;
                       ADD ;
                       GET ;
                       IF_NONE { { PUSH unit Unit ; FAILWITH } } { {} } ;
                       DIG 4 ;
                       DUP ;
                       DUG 5 ;
                       CAR ;
                       CDR ;
                       DIG 5 ;
                       DUP ;
                       DUG 6 ;
                       CDR ;
                       CDR ;
                       SUB ;
                       PUSH int 0 ;
                       COMPARE ;
                       DIG 3 ;
                       DUP ;
                       DUG 4 ;
                       MUL ;
                       DIG 5 ;
                       DUP ;
                       DUG 6 ;
                       CAR ;
                       CDR ;
                       ADD ;
                       GET ;
                       IF_NONE { { PUSH unit Unit ; FAILWITH } } { {} } ;
                       COMPARE ;
                       EQ ;
                       IF { {} }
                          { { PUSH string
                                   "WrongCondition: self.data.deck[params.f.i + (k * (sp.sign(params.t.i - params.f.i)))][params.f.j + (k * (sp.sign(params.t.j - params.f.j)))] == 0" ;
                              FAILWITH } } ;
                       PUSH int 1 ;
                       ADD ;
                       DUP ;
                       DIG 2 ;
                       DUP ;
                       DUG 3 ;
                       COMPARE ;
                       GT } ;
                DROP ;
                DROP } }
            { {} } ;
         PUSH nat 6 ;
         DIG 2 ;
         DUP ;
         DUG 3 ;
         CAR ;
         CAR ;
         CAR ;
         CAR ;
         CAR ;
         CDR ;
         DIG 2 ;
         DUP ;
         DUG 3 ;
         CAR ;
         CAR ;
         GET ;
         IF_NONE { { PUSH unit Unit ; FAILWITH } } { {} } ;
         DIG 2 ;
         DUP ;
         DUG 3 ;
         CAR ;
         CDR ;
         GET ;
         IF_NONE { { PUSH unit Unit ; FAILWITH } } { {} } ;
         ABS ;
         COMPARE ;
         EQ ;
         IF { { DUP ;
                CAR ;
                CDR ;
                PUSH nat 1 ;
                SWAP ;
                DIG 2 ;
                DUP ;
                DUG 3 ;
                CDR ;
                CDR ;
                SUB ;
                ABS ;
                COMPARE ;
                LE ;
                IF { { DUP ;
                       CAR ;
                       CAR ;
                       PUSH nat 1 ;
                       SWAP ;
                       DIG 2 ;
                       DUP ;
                       DUG 3 ;
                       CDR ;
                       CAR ;
                       SUB ;
                       ABS ;
                       COMPARE ;
                       LE } }
                   { PUSH bool False } ;
                IF { {} }
                   { { PUSH string
                            "WrongCondition: ((abs(params.t.j - params.f.j)) <= 1) & ((abs(params.t.i - params.f.i)) <= 1)" ;
                       FAILWITH } } ;
                SWAP ;
                DUP ;
                DUG 2 ;
                CAR ;
                CAR ;
                CDR ;
                DIG 2 ;
                DUP ;
                DUG 3 ;
                DUP ;
                CDR ;
                SWAP ;
                CAR ;
                DUP ;
                CDR ;
                SWAP ;
                CAR ;
                DUP ;
                CDR ;
                SWAP ;
                CAR ;
                DUP ;
                CAR ;
                SWAP ;
                CDR ;
                DUP ;
                DIG 8 ;
                DUP ;
                DUG 9 ;
                CAR ;
                CAR ;
                CDR ;
                DUP ;
                DUG 2 ;
                GET ;
                IF_NONE { { PUSH unit Unit ; FAILWITH } } { {} } ;
                CAR ;
                PUSH bool True ;
                SWAP ;
                PAIR ;
                SOME ;
                SWAP ;
                UPDATE ;
                SWAP ;
                PAIR ;
                PAIR ;
                PAIR ;
                PAIR ;
                DUG 3 ;
                DIG 2 ;
                DROP ;
                DIG 2 ;
                DUP ;
                DUG 3 ;
                DUP ;
                CDR ;
                SWAP ;
                CAR ;
                DUP ;
                CDR ;
                SWAP ;
                CAR ;
                DUP ;
                CDR ;
                SWAP ;
                CAR ;
                DUP ;
                CAR ;
                SWAP ;
                CDR ;
                DUP ;
                DIG 8 ;
                DUP ;
                DUG 9 ;
                CAR ;
                CAR ;
                CDR ;
                DUP ;
                DUG 2 ;
                GET ;
                IF_NONE { { PUSH unit Unit ; FAILWITH } } { {} } ;
                DUP ;
                CDR ;
                SWAP ;
                CAR ;
                CDR ;
                DIG 9 ;
                DUP ;
                DUG 10 ;
                CDR ;
                CAR ;
                PAIR ;
                PAIR ;
                SOME ;
                SWAP ;
                UPDATE ;
                SWAP ;
                PAIR ;
                PAIR ;
                PAIR ;
                PAIR ;
                DUG 3 ;
                DIG 2 ;
                DROP ;
                DIG 2 ;
                DUP ;
                DUG 3 ;
                DUP ;
                CDR ;
                SWAP ;
                CAR ;
                DUP ;
                CDR ;
                SWAP ;
                CAR ;
                DUP ;
                CDR ;
                SWAP ;
                CAR ;
                DUP ;
                CAR ;
                SWAP ;
                CDR ;
                DUP ;
                DIG 8 ;
                DUP ;
                DUG 9 ;
                CAR ;
                CAR ;
                CDR ;
                DUP ;
                DUG 2 ;
                GET ;
                IF_NONE { { PUSH unit Unit ; FAILWITH } } { {} } ;
                DUP ;
                CDR ;
                SWAP ;
                CAR ;
                CAR ;
                DIG 9 ;
                DUP ;
                DUG 10 ;
                CDR ;
                CDR ;
                SWAP ;
                PAIR ;
                PAIR ;
                SOME ;
                SWAP ;
                UPDATE ;
                SWAP ;
                PAIR ;
                PAIR ;
                PAIR ;
                PAIR ;
                DUG 3 ;
                DROP ;
                SWAP ;
                DROP } }
            { {} } ;
         PUSH nat 2 ;
         DIG 2 ;
         DUP ;
         DUG 3 ;
         CAR ;
         CAR ;
         CAR ;
         CAR ;
         CAR ;
         CDR ;
         DIG 2 ;
         DUP ;
         DUG 3 ;
         CAR ;
         CAR ;
         GET ;
         IF_NONE { { PUSH unit Unit ; FAILWITH } } { {} } ;
         DIG 2 ;
         DUP ;
         DUG 3 ;
         CAR ;
         CDR ;
         GET ;
         IF_NONE { { PUSH unit Unit ; FAILWITH } } { {} } ;
         ABS ;
         COMPARE ;
         EQ ;
         IF { { DUP ;
                CAR ;
                CDR ;
                PUSH int 0 ;
                SWAP ;
                DIG 2 ;
                DUP ;
                DUG 3 ;
                CDR ;
                CDR ;
                SUB ;
                COMPARE ;
                EQ ;
                IF { PUSH bool True }
                   { { DUP ;
                       CAR ;
                       CAR ;
                       PUSH int 0 ;
                       SWAP ;
                       DIG 2 ;
                       DUP ;
                       DUG 3 ;
                       CDR ;
                       CAR ;
                       SUB ;
                       COMPARE ;
                       EQ } } ;
                IF { {} }
                   { { PUSH string
                            "WrongCondition: ((params.t.j - params.f.j) == 0) | ((params.t.i - params.f.i) == 0)" ;
                       FAILWITH } } ;
                DUP ;
                CAR ;
                CDR ;
                PUSH int 1 ;
                SWAP ;
                DIG 2 ;
                DUP ;
                DUG 3 ;
                CDR ;
                CDR ;
                SUB ;
                ABS ;
                DUP ;
                DIG 3 ;
                DUP ;
                DUG 4 ;
                CAR ;
                CAR ;
                DIG 4 ;
                DUP ;
                DUG 5 ;
                CDR ;
                CAR ;
                SUB ;
                ABS ;
                DUP ;
                DUG 2 ;
                COMPARE ;
                LE ;
                IF { DROP } { { SWAP ; DROP } } ;
                INT ;
                SUB ;
                PUSH int 1 ;
                DUP ;
                DIG 2 ;
                DUP ;
                DUG 3 ;
                COMPARE ;
                GT ;
                LOOP { PUSH int 0 ;
                       DIG 4 ;
                       DUP ;
                       DUG 5 ;
                       CAR ;
                       CAR ;
                       CAR ;
                       CAR ;
                       CAR ;
                       CDR ;
                       DIG 4 ;
                       DUP ;
                       DUG 5 ;
                       CAR ;
                       CAR ;
                       DIG 5 ;
                       DUP ;
                       DUG 6 ;
                       CDR ;
                       CAR ;
                       SUB ;
                       PUSH int 0 ;
                       COMPARE ;
                       DIG 3 ;
                       DUP ;
                       DUG 4 ;
                       MUL ;
                       DIG 5 ;
                       DUP ;
                       DUG 6 ;
                       CAR ;
                       CAR ;
                       ADD ;
                       GET ;
                       IF_NONE { { PUSH unit Unit ; FAILWITH } } { {} } ;
                       DIG 4 ;
                       DUP ;
                       DUG 5 ;
                       CAR ;
                       CDR ;
                       DIG 5 ;
                       DUP ;
                       DUG 6 ;
                       CDR ;
                       CDR ;
                       SUB ;
                       PUSH int 0 ;
                       COMPARE ;
                       DIG 3 ;
                       DUP ;
                       DUG 4 ;
                       MUL ;
                       DIG 5 ;
                       DUP ;
                       DUG 6 ;
                       CAR ;
                       CDR ;
                       ADD ;
                       GET ;
                       IF_NONE { { PUSH unit Unit ; FAILWITH } } { {} } ;
                       COMPARE ;
                       EQ ;
                       IF { {} }
                          { { PUSH string
                                   "WrongCondition: self.data.deck[params.f.i + (k * (sp.sign(params.t.i - params.f.i)))][params.f.j + (k * (sp.sign(params.t.j - params.f.j)))] == 0" ;
                              FAILWITH } } ;
                       PUSH int 1 ;
                       ADD ;
                       DUP ;
                       DIG 2 ;
                       DUP ;
                       DUG 3 ;
                       COMPARE ;
                       GT } ;
                DROP ;
                DROP } }
            { {} } ;
         PUSH nat 4 ;
         DIG 2 ;
         DUP ;
         DUG 3 ;
         CAR ;
         CAR ;
         CAR ;
         CAR ;
         CAR ;
         CDR ;
         DIG 2 ;
         DUP ;
         DUG 3 ;
         CAR ;
         CAR ;
         GET ;
         IF_NONE { { PUSH unit Unit ; FAILWITH } } { {} } ;
         DIG 2 ;
         DUP ;
         DUG 3 ;
         CAR ;
         CDR ;
         GET ;
         IF_NONE { { PUSH unit Unit ; FAILWITH } } { {} } ;
         ABS ;
         COMPARE ;
         EQ ;
         IF { { DUP ;
                CAR ;
                CAR ;
                SWAP ;
                DUP ;
                DUG 2 ;
                CDR ;
                CAR ;
                SUB ;
                ABS ;
                SWAP ;
                DUP ;
                DUG 2 ;
                CAR ;
                CDR ;
                DIG 2 ;
                DUP ;
                DUG 3 ;
                CDR ;
                CDR ;
                SUB ;
                ABS ;
                COMPARE ;
                EQ ;
                IF { {} }
                   { { PUSH string
                            "WrongCondition: (abs(params.t.j - params.f.j)) == (abs(params.t.i - params.f.i))" ;
                       FAILWITH } } ;
                DUP ;
                CAR ;
                CDR ;
                PUSH int 1 ;
                SWAP ;
                DIG 2 ;
                DUP ;
                DUG 3 ;
                CDR ;
                CDR ;
                SUB ;
                ABS ;
                DUP ;
                DIG 3 ;
                DUP ;
                DUG 4 ;
                CAR ;
                CAR ;
                DIG 4 ;
                DUP ;
                DUG 5 ;
                CDR ;
                CAR ;
                SUB ;
                ABS ;
                DUP ;
                DUG 2 ;
                COMPARE ;
                LE ;
                IF { DROP } { { SWAP ; DROP } } ;
                INT ;
                SUB ;
                PUSH int 1 ;
                DUP ;
                DIG 2 ;
                DUP ;
                DUG 3 ;
                COMPARE ;
                GT ;
                LOOP { PUSH int 0 ;
                       DIG 4 ;
                       DUP ;
                       DUG 5 ;
                       CAR ;
                       CAR ;
                       CAR ;
                       CAR ;
                       CAR ;
                       CDR ;
                       DIG 4 ;
                       DUP ;
                       DUG 5 ;
                       CAR ;
                       CAR ;
                       DIG 5 ;
                       DUP ;
                       DUG 6 ;
                       CDR ;
                       CAR ;
                       SUB ;
                       PUSH int 0 ;
                       COMPARE ;
                       DIG 3 ;
                       DUP ;
                       DUG 4 ;
                       MUL ;
                       DIG 5 ;
                       DUP ;
                       DUG 6 ;
                       CAR ;
                       CAR ;
                       ADD ;
                       GET ;
                       IF_NONE { { PUSH unit Unit ; FAILWITH } } { {} } ;
                       DIG 4 ;
                       DUP ;
                       DUG 5 ;
                       CAR ;
                       CDR ;
                       DIG 5 ;
                       DUP ;
                       DUG 6 ;
                       CDR ;
                       CDR ;
                       SUB ;
                       PUSH int 0 ;
                       COMPARE ;
                       DIG 3 ;
                       DUP ;
                       DUG 4 ;
                       MUL ;
                       DIG 5 ;
                       DUP ;
                       DUG 6 ;
                       CAR ;
                       CDR ;
                       ADD ;
                       GET ;
                       IF_NONE { { PUSH unit Unit ; FAILWITH } } { {} } ;
                       COMPARE ;
                       EQ ;
                       IF { {} }
                          { { PUSH string
                                   "WrongCondition: self.data.deck[params.f.i + (k * (sp.sign(params.t.i - params.f.i)))][params.f.j + (k * (sp.sign(params.t.j - params.f.j)))] == 0" ;
                              FAILWITH } } ;
                       PUSH int 1 ;
                       ADD ;
                       DUP ;
                       DIG 2 ;
                       DUP ;
                       DUG 3 ;
                       COMPARE ;
                       GT } ;
                DROP ;
                DROP } }
            { {} } ;
         PUSH nat 3 ;
         DIG 2 ;
         DUP ;
         DUG 3 ;
         CAR ;
         CAR ;
         CAR ;
         CAR ;
         CAR ;
         CDR ;
         DIG 2 ;
         DUP ;
         DUG 3 ;
         CAR ;
         CAR ;
         GET ;
         IF_NONE { { PUSH unit Unit ; FAILWITH } } { {} } ;
         DIG 2 ;
         DUP ;
         DUG 3 ;
         CAR ;
         CDR ;
         GET ;
         IF_NONE { { PUSH unit Unit ; FAILWITH } } { {} } ;
         ABS ;
         COMPARE ;
         EQ ;
         IF { { DUP ;
                CAR ;
                CAR ;
                PUSH nat 2 ;
                SWAP ;
                DIG 2 ;
                DUP ;
                DUG 3 ;
                CDR ;
                CAR ;
                SUB ;
                DIG 2 ;
                DUP ;
                DUG 3 ;
                CAR ;
                CDR ;
                DIG 3 ;
                DUP ;
                DUG 4 ;
                CDR ;
                CDR ;
                SUB ;
                MUL ;
                ABS ;
                COMPARE ;
                EQ ;
                IF { {} }
                   { { PUSH string
                            "WrongCondition: (abs((params.t.j - params.f.j) * (params.t.i - params.f.i))) == 2" ;
                       FAILWITH } } } }
            { {} } ;
         SWAP ;
         DUP ;
         DUG 2 ;
         DUP ;
         CDR ;
         SWAP ;
         CAR ;
         DUP ;
         CDR ;
         SWAP ;
         CAR ;
         DUP ;
         CDR ;
         SWAP ;
         CAR ;
         DUP ;
         CDR ;
         SWAP ;
         CAR ;
         DUP ;
         CDR ;
         SWAP ;
         CAR ;
         DUP ;
         CAR ;
         SWAP ;
         CDR ;
         DUP ;
         DIG 8 ;
         DUP ;
         DUG 9 ;
         CDR ;
         CAR ;
         DUP ;
         DUG 2 ;
         GET ;
         IF_NONE { { PUSH unit Unit ; FAILWITH } } { {} } ;
         DIG 10 ;
         DUP ;
         DUG 11 ;
         CAR ;
         CAR ;
         CAR ;
         CAR ;
         CAR ;
         CDR ;
         DIG 10 ;
         DUP ;
         DUG 11 ;
         CAR ;
         CAR ;
         GET ;
         IF_NONE { { PUSH unit Unit ; FAILWITH } } { {} } ;
         DIG 10 ;
         DUP ;
         DUG 11 ;
         CAR ;
         CDR ;
         GET ;
         IF_NONE { { PUSH unit Unit ; FAILWITH } } { {} } ;
         SOME ;
         DIG 10 ;
         DUP ;
         DUG 11 ;
         CDR ;
         CDR ;
         UPDATE ;
         SOME ;
         SWAP ;
         UPDATE ;
         SWAP ;
         PAIR ;
         PAIR ;
         PAIR ;
         PAIR ;
         PAIR ;
         PAIR ;
         DUG 2 ;
         SWAP ;
         DROP ;
         SWAP ;
         DUP ;
         DUG 2 ;
         DUP ;
         CDR ;
         SWAP ;
         CAR ;
         DUP ;
         CDR ;
         SWAP ;
         CAR ;
         DUP ;
         CDR ;
         SWAP ;
         CAR ;
         DUP ;
         CDR ;
         SWAP ;
         CAR ;
         DUP ;
         CDR ;
         SWAP ;
         CAR ;
         DUP ;
         CAR ;
         SWAP ;
         CDR ;
         DUP ;
         DIG 8 ;
         DUP ;
         DUG 9 ;
         CAR ;
         CAR ;
         DUP ;
         DUG 2 ;
         GET ;
         IF_NONE { { PUSH unit Unit ; FAILWITH } } { {} } ;
         PUSH (option int) (Some 0) ;
         DIG 10 ;
         DUP ;
         DUG 11 ;
         CAR ;
         CDR ;
         UPDATE ;
         SOME ;
         SWAP ;
         UPDATE ;
         SWAP ;
         PAIR ;
         PAIR ;
         PAIR ;
         PAIR ;
         PAIR ;
         PAIR ;
         DUG 2 ;
         SWAP ;
         DROP ;
         SWAP ;
         DUP ;
         DUG 2 ;
         DUP ;
         CDR ;
         SWAP ;
         CAR ;
         DUP ;
         CDR ;
         SWAP ;
         CAR ;
         CAR ;
         DIG 4 ;
         DUP ;
         DUG 5 ;
         CAR ;
         CAR ;
         CDR ;
         NEG ;
         SWAP ;
         PAIR ;
         PAIR ;
         PAIR ;
         DUG 2 ;
         DROP ;
         DROP ;
         NIL operation ;
         PAIR } }
