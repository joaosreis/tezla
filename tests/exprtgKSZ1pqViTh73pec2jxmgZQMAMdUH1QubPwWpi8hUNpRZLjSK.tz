{ parameter (or (pair %answer string bool) (pair %ask (pair string timestamp) string)) ;
  storage
    (pair (map %questions
             string
             (pair (address %answer_to) (pair (string %question_id) (timestamp %answer_at))))
          (address %owner)) ;
  code { DUP ;
         CDR ;
         SWAP ;
         CAR ;
         IF_LEFT
           { DUP ;
             CDR ;
             SWAP ;
             CAR ;
             PAIR ;
             PAIR ;
             DUP ;
             CDR ;
             SWAP ;
             DUP ;
             DUG 2 ;
             CAR ;
             CAR ;
             SWAP ;
             DUP ;
             DUG 2 ;
             CDR ;
             SENDER ;
             COMPARE ;
             NEQ ;
             IF { PUSH string "2" ; FAILWITH } {} ;
             SWAP ;
             DUP ;
             DUG 2 ;
             CAR ;
             SWAP ;
             DUP ;
             DUG 2 ;
             GET ;
             IF_NONE { PUSH string "3" ; FAILWITH } {} ;
             DUP ;
             CDR ;
             CDR ;
             NOW ;
             COMPARE ;
             LT ;
             IF { PUSH string "4" ; FAILWITH } {} ;
             DUP ;
             CAR ;
             CONTRACT %closeMarket (pair string bool) ;
             IF_NONE { PUSH string "5" ; FAILWITH } {} ;
             PUSH mutez 0 ;
             DIG 5 ;
             CAR ;
             CDR ;
             DIG 3 ;
             CDR ;
             CAR ;
             PAIR ;
             TRANSFER_TOKENS ;
             DIG 2 ;
             DUP ;
             DUG 3 ;
             CDR ;
             DIG 3 ;
             CAR ;
             DIG 3 ;
             NONE (pair address (pair string timestamp)) ;
             SWAP ;
             UPDATE ;
             PAIR ;
             NIL operation ;
             DIG 2 ;
             CONS ;
             PAIR }
           { DUP ;
             CDR ;
             SWAP ;
             CAR ;
             DUP ;
             CDR ;
             SWAP ;
             CAR ;
             DIG 3 ;
             DIG 3 ;
             PAIR ;
             DUG 2 ;
             PAIR ;
             PAIR ;
             DUP ;
             CDR ;
             CDR ;
             SWAP ;
             DUP ;
             DUG 2 ;
             CAR ;
             CAR ;
             SWAP ;
             DUP ;
             DUG 2 ;
             CAR ;
             SWAP ;
             DUP ;
             DUG 2 ;
             GET ;
             IF_NONE {} { DROP ; PUSH string "1" ; FAILWITH } ;
             DIG 2 ;
             DUP ;
             DUG 3 ;
             CAR ;
             CDR ;
             DIG 3 ;
             CDR ;
             CAR ;
             PAIR ;
             SENDER ;
             PAIR ;
             DIG 2 ;
             DUP ;
             DUG 3 ;
             CDR ;
             DIG 3 ;
             CAR ;
             DIG 2 ;
             SOME ;
             DIG 3 ;
             UPDATE ;
             PAIR ;
             NIL operation ;
             PAIR } } }
