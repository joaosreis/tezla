{ storage
    (pair (pair (map %deck int (map int int)) (bool %draw))
          (pair (int %nbMoves) (pair (int %nextPlayer) (int %winner)))) ;
  parameter (pair (int %i) (pair (int %j) (int %move))) ;
  code { DUP ;
         CDR ;
         SWAP ;
         CAR ;
         PUSH int 0 ;
         DIG 2 ;
         DUP ;
         DUG 3 ;
         CDR ;
         CDR ;
         CDR ;
         COMPARE ;
         EQ ;
         IF { { SWAP ; DUP ; DUG 2 ; CAR ; CDR ; NOT } } { PUSH bool False } ;
         IF { {} }
            { { PUSH string "WrongCondition: (self.data.winner == 0) & (~ self.data.draw)" ;
                FAILWITH } } ;
         DUP ;
         CAR ;
         PUSH int 0 ;
         SWAP ;
         COMPARE ;
         GE ;
         IF { { DUP ; CAR ; PUSH int 3 ; COMPARE ; GT } } { PUSH bool False } ;
         IF { {} }
            { { PUSH string "WrongCondition: (params.i >= 0) & (params.i < 3)" ; FAILWITH } } ;
         DUP ;
         CDR ;
         CAR ;
         PUSH int 0 ;
         SWAP ;
         COMPARE ;
         GE ;
         IF { { DUP ; CDR ; CAR ; PUSH int 3 ; COMPARE ; GT } }
            { PUSH bool False } ;
         IF { {} }
            { { PUSH string "WrongCondition: (params.j >= 0) & (params.j < 3)" ; FAILWITH } } ;
         SWAP ;
         DUP ;
         DUG 2 ;
         CDR ;
         CDR ;
         CAR ;
         SWAP ;
         DUP ;
         DUG 2 ;
         CDR ;
         CDR ;
         COMPARE ;
         EQ ;
         IF { {} }
            { { PUSH string "WrongCondition: params.move == self.data.nextPlayer" ;
                FAILWITH } } ;
         PUSH int 0 ;
         DIG 2 ;
         DUP ;
         DUG 3 ;
         CAR ;
         CAR ;
         DIG 2 ;
         DUP ;
         DUG 3 ;
         CAR ;
         GET ;
         IF_NONE { { PUSH string "Get-item:16" ; FAILWITH } } {} ;
         DIG 2 ;
         DUP ;
         DUG 3 ;
         CDR ;
         CAR ;
         GET ;
         IF_NONE { { PUSH string "Get-item:17" ; FAILWITH } } {} ;
         COMPARE ;
         EQ ;
         IF { {} }
            { { PUSH string "WrongCondition: self.data.deck[params.i][params.j] == 0" ;
                FAILWITH } } ;
         SWAP ;
         DUP ;
         CDR ;
         SWAP ;
         CAR ;
         DUP ;
         CDR ;
         SWAP ;
         CAR ;
         DUP ;
         DIG 4 ;
         DUP ;
         DUG 5 ;
         CAR ;
         DUP ;
         DUG 2 ;
         GET ;
         IF_NONE { { PUSH string "set_in_top-any" ; FAILWITH } } {} ;
         DIG 5 ;
         DUP ;
         DUG 6 ;
         CDR ;
         CDR ;
         SOME ;
         DIG 6 ;
         DUP ;
         DUG 7 ;
         CDR ;
         CAR ;
         UPDATE ;
         SOME ;
         SWAP ;
         UPDATE ;
         PAIR ;
         PAIR ;
         DUP ;
         DUG 2 ;
         DUP ;
         CAR ;
         SWAP ;
         CDR ;
         CDR ;
         PUSH int 1 ;
         DIG 4 ;
         CDR ;
         CAR ;
         ADD ;
         PAIR ;
         SWAP ;
         PAIR ;
         DUP ;
         DUG 2 ;
         DUP ;
         CAR ;
         SWAP ;
         CDR ;
         DUP ;
         CAR ;
         SWAP ;
         CDR ;
         CDR ;
         DIG 4 ;
         CDR ;
         CDR ;
         CAR ;
         PUSH int 3 ;
         SUB ;
         PAIR ;
         SWAP ;
         PAIR ;
         SWAP ;
         PAIR ;
         SWAP ;
         PUSH int 0 ;
         DIG 2 ;
         DUP ;
         DUG 3 ;
         CAR ;
         CAR ;
         DIG 2 ;
         DUP ;
         DUG 3 ;
         CAR ;
         GET ;
         IF_NONE { { PUSH string "Get-item:16" ; FAILWITH } } {} ;
         PUSH int 0 ;
         GET ;
         IF_NONE { { PUSH string "Get-item:31" ; FAILWITH } } {} ;
         COMPARE ;
         NEQ ;
         IF { { SWAP ;
                DUP ;
                DUG 2 ;
                CAR ;
                CAR ;
                SWAP ;
                DUP ;
                DUG 2 ;
                CAR ;
                GET ;
                IF_NONE { { PUSH string "Get-item:16" ; FAILWITH } } {} ;
                PUSH int 1 ;
                GET ;
                IF_NONE { { PUSH string "Get-item:31" ; FAILWITH } } {} ;
                DIG 2 ;
                DUP ;
                DUG 3 ;
                CAR ;
                CAR ;
                DIG 2 ;
                DUP ;
                DUG 3 ;
                CAR ;
                GET ;
                IF_NONE { { PUSH string "Get-item:16" ; FAILWITH } } {} ;
                PUSH int 0 ;
                GET ;
                IF_NONE { { PUSH string "Get-item:31" ; FAILWITH } } {} ;
                COMPARE ;
                EQ } }
            { PUSH bool False } ;
         IF { { SWAP ;
                DUP ;
                DUG 2 ;
                CAR ;
                CAR ;
                SWAP ;
                DUP ;
                DUG 2 ;
                CAR ;
                GET ;
                IF_NONE { { PUSH string "Get-item:16" ; FAILWITH } } {} ;
                PUSH int 2 ;
                GET ;
                IF_NONE { { PUSH string "Get-item:31" ; FAILWITH } } {} ;
                DIG 2 ;
                DUP ;
                DUG 3 ;
                CAR ;
                CAR ;
                DIG 2 ;
                DUP ;
                DUG 3 ;
                CAR ;
                GET ;
                IF_NONE { { PUSH string "Get-item:16" ; FAILWITH } } {} ;
                PUSH int 0 ;
                GET ;
                IF_NONE { { PUSH string "Get-item:31" ; FAILWITH } } {} ;
                COMPARE ;
                EQ } }
            { PUSH bool False } ;
         IF { { SWAP ;
                DUP ;
                DUG 2 ;
                DUP ;
                CAR ;
                SWAP ;
                CDR ;
                DUP ;
                CAR ;
                SWAP ;
                CDR ;
                CAR ;
                DIG 4 ;
                CAR ;
                CAR ;
                DIG 4 ;
                DUP ;
                DUG 5 ;
                CAR ;
                GET ;
                IF_NONE { { PUSH string "Get-item:16" ; FAILWITH } } {} ;
                PUSH int 0 ;
                GET ;
                IF_NONE { { PUSH string "Get-item:32" ; FAILWITH } } {} ;
                SWAP ;
                PAIR ;
                SWAP ;
                PAIR ;
                SWAP ;
                PAIR ;
                SWAP } }
            { {} } ;
         PUSH int 0 ;
         DIG 2 ;
         DUP ;
         DUG 3 ;
         CAR ;
         CAR ;
         PUSH int 0 ;
         GET ;
         IF_NONE { { PUSH string "Get-item:24" ; FAILWITH } } {} ;
         DIG 2 ;
         DUP ;
         DUG 3 ;
         CDR ;
         CAR ;
         GET ;
         IF_NONE { { PUSH string "Get-item:17" ; FAILWITH } } {} ;
         COMPARE ;
         NEQ ;
         IF { { SWAP ;
                DUP ;
                DUG 2 ;
                CAR ;
                CAR ;
                PUSH int 1 ;
                GET ;
                IF_NONE { { PUSH string "Get-item:24" ; FAILWITH } } {} ;
                SWAP ;
                DUP ;
                DUG 2 ;
                CDR ;
                CAR ;
                GET ;
                IF_NONE { { PUSH string "Get-item:17" ; FAILWITH } } {} ;
                DIG 2 ;
                DUP ;
                DUG 3 ;
                CAR ;
                CAR ;
                PUSH int 0 ;
                GET ;
                IF_NONE { { PUSH string "Get-item:24" ; FAILWITH } } {} ;
                DIG 2 ;
                DUP ;
                DUG 3 ;
                CDR ;
                CAR ;
                GET ;
                IF_NONE { { PUSH string "Get-item:17" ; FAILWITH } } {} ;
                COMPARE ;
                EQ } }
            { PUSH bool False } ;
         IF { { SWAP ;
                DUP ;
                DUG 2 ;
                CAR ;
                CAR ;
                PUSH int 2 ;
                GET ;
                IF_NONE { { PUSH string "Get-item:24" ; FAILWITH } } {} ;
                SWAP ;
                DUP ;
                DUG 2 ;
                CDR ;
                CAR ;
                GET ;
                IF_NONE { { PUSH string "Get-item:17" ; FAILWITH } } {} ;
                DIG 2 ;
                DUP ;
                DUG 3 ;
                CAR ;
                CAR ;
                PUSH int 0 ;
                GET ;
                IF_NONE { { PUSH string "Get-item:24" ; FAILWITH } } {} ;
                DIG 2 ;
                DUP ;
                DUG 3 ;
                CDR ;
                CAR ;
                GET ;
                IF_NONE { { PUSH string "Get-item:17" ; FAILWITH } } {} ;
                COMPARE ;
                EQ } }
            { PUSH bool False } ;
         IF { { SWAP ;
                DUP ;
                DUG 2 ;
                DUP ;
                CAR ;
                SWAP ;
                CDR ;
                DUP ;
                CAR ;
                SWAP ;
                CDR ;
                CAR ;
                DIG 4 ;
                CAR ;
                CAR ;
                PUSH int 0 ;
                GET ;
                IF_NONE { { PUSH string "Get-item:24" ; FAILWITH } } {} ;
                DIG 4 ;
                CDR ;
                CAR ;
                GET ;
                IF_NONE { { PUSH string "Get-item:17" ; FAILWITH } } {} ;
                SWAP ;
                PAIR ;
                SWAP ;
                PAIR ;
                SWAP ;
                PAIR } }
            { DROP } ;
         DUP ;
         CAR ;
         CAR ;
         PUSH int 0 ;
         SWAP ;
         PUSH int 0 ;
         GET ;
         IF_NONE { { PUSH string "Get-item:25" ; FAILWITH } } {} ;
         PUSH int 0 ;
         GET ;
         IF_NONE { { PUSH string "Get-item:25" ; FAILWITH } } {} ;
         COMPARE ;
         NEQ ;
         IF { { DUP ;
                CAR ;
                CAR ;
                PUSH int 1 ;
                GET ;
                IF_NONE { { PUSH string "Get-item:25" ; FAILWITH } } {} ;
                PUSH int 1 ;
                GET ;
                IF_NONE { { PUSH string "Get-item:25" ; FAILWITH } } {} ;
                SWAP ;
                DUP ;
                DUG 2 ;
                CAR ;
                CAR ;
                PUSH int 0 ;
                GET ;
                IF_NONE { { PUSH string "Get-item:25" ; FAILWITH } } {} ;
                PUSH int 0 ;
                GET ;
                IF_NONE { { PUSH string "Get-item:25" ; FAILWITH } } {} ;
                COMPARE ;
                EQ } }
            { PUSH bool False } ;
         IF { { DUP ;
                CAR ;
                CAR ;
                PUSH int 2 ;
                GET ;
                IF_NONE { { PUSH string "Get-item:25" ; FAILWITH } } {} ;
                PUSH int 2 ;
                GET ;
                IF_NONE { { PUSH string "Get-item:25" ; FAILWITH } } {} ;
                SWAP ;
                DUP ;
                DUG 2 ;
                CAR ;
                CAR ;
                PUSH int 0 ;
                GET ;
                IF_NONE { { PUSH string "Get-item:25" ; FAILWITH } } {} ;
                PUSH int 0 ;
                GET ;
                IF_NONE { { PUSH string "Get-item:25" ; FAILWITH } } {} ;
                COMPARE ;
                EQ } }
            { PUSH bool False } ;
         IF { { DUP ;
                DUP ;
                CAR ;
                SWAP ;
                CDR ;
                DUP ;
                CAR ;
                SWAP ;
                CDR ;
                CAR ;
                DIG 3 ;
                CAR ;
                CAR ;
                PUSH int 0 ;
                GET ;
                IF_NONE { { PUSH string "Get-item:25" ; FAILWITH } } {} ;
                PUSH int 0 ;
                GET ;
                IF_NONE { { PUSH string "Get-item:25" ; FAILWITH } } {} ;
                SWAP ;
                PAIR ;
                SWAP ;
                PAIR ;
                SWAP ;
                PAIR } }
            { {} } ;
         DUP ;
         CAR ;
         CAR ;
         PUSH int 0 ;
         SWAP ;
         PUSH int 0 ;
         GET ;
         IF_NONE { { PUSH string "Get-item:26" ; FAILWITH } } {} ;
         PUSH int 2 ;
         GET ;
         IF_NONE { { PUSH string "Get-item:26" ; FAILWITH } } {} ;
         COMPARE ;
         NEQ ;
         IF { { DUP ;
                CAR ;
                CAR ;
                PUSH int 1 ;
                GET ;
                IF_NONE { { PUSH string "Get-item:26" ; FAILWITH } } {} ;
                PUSH int 1 ;
                GET ;
                IF_NONE { { PUSH string "Get-item:26" ; FAILWITH } } {} ;
                SWAP ;
                DUP ;
                DUG 2 ;
                CAR ;
                CAR ;
                PUSH int 0 ;
                GET ;
                IF_NONE { { PUSH string "Get-item:26" ; FAILWITH } } {} ;
                PUSH int 2 ;
                GET ;
                IF_NONE { { PUSH string "Get-item:26" ; FAILWITH } } {} ;
                COMPARE ;
                EQ } }
            { PUSH bool False } ;
         IF { { DUP ;
                CAR ;
                CAR ;
                PUSH int 2 ;
                GET ;
                IF_NONE { { PUSH string "Get-item:26" ; FAILWITH } } {} ;
                PUSH int 0 ;
                GET ;
                IF_NONE { { PUSH string "Get-item:26" ; FAILWITH } } {} ;
                SWAP ;
                DUP ;
                DUG 2 ;
                CAR ;
                CAR ;
                PUSH int 0 ;
                GET ;
                IF_NONE { { PUSH string "Get-item:26" ; FAILWITH } } {} ;
                PUSH int 2 ;
                GET ;
                IF_NONE { { PUSH string "Get-item:26" ; FAILWITH } } {} ;
                COMPARE ;
                EQ } }
            { PUSH bool False } ;
         IF { { DUP ;
                DUP ;
                CAR ;
                SWAP ;
                CDR ;
                DUP ;
                CAR ;
                SWAP ;
                CDR ;
                CAR ;
                DIG 3 ;
                CAR ;
                CAR ;
                PUSH int 0 ;
                GET ;
                IF_NONE { { PUSH string "Get-item:26" ; FAILWITH } } {} ;
                PUSH int 2 ;
                GET ;
                IF_NONE { { PUSH string "Get-item:26" ; FAILWITH } } {} ;
                SWAP ;
                PAIR ;
                SWAP ;
                PAIR ;
                SWAP ;
                PAIR } }
            { {} } ;
         DUP ;
         CDR ;
         CAR ;
         PUSH int 9 ;
         COMPARE ;
         EQ ;
         IF { { DUP ; CDR ; CDR ; CDR ; PUSH int 0 ; COMPARE ; EQ } }
            { PUSH bool False } ;
         IF { { DUP ; CDR ; SWAP ; CAR ; CAR ; PUSH bool True ; SWAP ; PAIR ; PAIR } }
            { {} } ;
         NIL operation ;
         PAIR } }
