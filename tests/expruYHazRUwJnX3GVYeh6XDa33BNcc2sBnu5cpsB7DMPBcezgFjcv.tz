{ parameter nat ;
  storage
    (pair (pair (nat %amountPerBlock) (nat %amountWithdrawn))
          (pair (address %owner) (pair (nat %startBlock) (address %tokenContractAddress)))) ;
  code { { { DUP ; CAR ; DIP { CDR } } } ;
         SWAP ;
         DUP ;
         DUG 2 ;
         GET 3 ;
         SENDER ;
         COMPARE ;
         EQ ;
         IF {} { PUSH string "Not owner" ; FAILWITH } ;
         SWAP ;
         DUP ;
         CAR ;
         CAR ;
         SWAP ;
         DUP ;
         DUG 3 ;
         GET 5 ;
         LEVEL ;
         SUB ;
         ISNAT ;
         { IF_NONE { PUSH int 58 ; FAILWITH } {} } ;
         MUL ;
         SWAP ;
         DUP ;
         DUG 2 ;
         { DIP 3 { DUP } ; DIG 4 } ;
         CAR ;
         CDR ;
         ADD ;
         COMPARE ;
         LE ;
         IF {} { PUSH string "Not vested" ; FAILWITH } ;
         SWAP ;
         { { DUP ; CAR ; DIP { CDR } } } ;
         { { DUP ; CAR ; DIP { CDR } } } ;
         SWAP ;
         { DIP 3 { DUP } ; DIG 4 } ;
         ADD ;
         SWAP ;
         PAIR ;
         PAIR ;
         SWAP ;
         NIL operation ;
         { DIP 2 { DUP } ; DIG 3 } ;
         GET 6 ;
         CONTRACT %transfer (pair (address %from) (pair (address %to) (nat %value))) ;
         { IF_NONE { PUSH int 67 ; FAILWITH } {} } ;
         PUSH mutez 0 ;
         DIG 3 ;
         SENDER ;
         PAIR %to %value ;
         SELF_ADDRESS ;
         PAIR %from ;
         TRANSFER_TOKENS ;
         CONS ;
         PAIR } }
