{ storage
    (pair (pair (pair (nat %blockFormula) (timestamp %lastUpdTime))
                (pair (big_map %ledger address (pair (nat %balanceLiq) (nat %rewardDebtLiq)))
                      (nat %lpSupplyLiq)))
          (pair (pair (address %qAddress) (nat %rewardPerTokenLiq))
                (pair (address %tokenAddress) (pair (nat %totalStakeSupply) (nat %usedSupplyLiq))))) ;
  parameter
    (or (or (unit %default) (or (address %liquidityRewards) (nat %liquidityStake)))
        (or (nat %liquidityUnstake) (or (address %setQAddress) (unit %withdrawProfit)))) ;
  code { UNPAIR ;
         IF_LEFT
           { IF_LEFT
               { DROP ;
                 DUP ;
                 CDR ;
                 CAR ;
                 CAR ;
                 SENDER ;
                 COMPARE ;
                 EQ ;
                 IF { DUP ;
                      GET 5 ;
                      CONTRACT unit ;
                      IF_NONE { PUSH int 141 ; FAILWITH } {} ;
                      NIL operation ;
                      SWAP ;
                      PUSH nat 100 ;
                      AMOUNT ;
                      PUSH nat 3 ;
                      MUL ;
                      EDIV ;
                      IF_NONE { PUSH int 138 ; FAILWITH } {} ;
                      CAR ;
                      AMOUNT ;
                      SUB ;
                      UNIT ;
                      TRANSFER_TOKENS ;
                      CONS ;
                      SOURCE ;
                      CONTRACT unit ;
                      IF_NONE { PUSH int 142 ; FAILWITH } {} ;
                      PUSH nat 100 ;
                      AMOUNT ;
                      PUSH nat 3 ;
                      MUL ;
                      EDIV ;
                      IF_NONE { PUSH int 138 ; FAILWITH } {} ;
                      CAR ;
                      UNIT ;
                      TRANSFER_TOKENS ;
                      CONS }
                    { DUP ;
                      GET 5 ;
                      CONTRACT unit ;
                      IF_NONE { PUSH int 145 ; FAILWITH } {} ;
                      NIL operation ;
                      SWAP ;
                      AMOUNT ;
                      UNIT ;
                      TRANSFER_TOKENS ;
                      CONS } }
               { IF_LEFT
                   { DROP ;
                     DUP ;
                     CAR ;
                     CDR ;
                     CDR ;
                     PUSH nat 0 ;
                     COMPARE ;
                     EQ ;
                     IF { UNPAIR ;
                          SWAP ;
                          UNPAIR ;
                          CAR ;
                          PUSH nat 0 ;
                          SWAP ;
                          PAIR ;
                          PAIR ;
                          SWAP ;
                          PAIR ;
                          UNPAIR ;
                          UNPAIR ;
                          CAR ;
                          NOW ;
                          SWAP ;
                          PAIR ;
                          PAIR ;
                          PAIR }
                        { DUP ;
                          UNPAIR ;
                          SWAP ;
                          UNPAIR ;
                          UNPAIR ;
                          SWAP ;
                          DUP 5 ;
                          CAR ;
                          CDR ;
                          CDR ;
                          PUSH int 60 ;
                          ISNAT ;
                          IF_NONE { PUSH int 30 ; FAILWITH } {} ;
                          DIG 6 ;
                          DUP ;
                          CAR ;
                          CAR ;
                          CAR ;
                          SWAP ;
                          CAR ;
                          CAR ;
                          CDR ;
                          NOW ;
                          SUB ;
                          ISNAT ;
                          IF_NONE { PUSH int 30 ; FAILWITH } {} ;
                          MUL ;
                          EDIV ;
                          IF_NONE { PUSH int 30 ; FAILWITH } { CAR } ;
                          EDIV ;
                          IF_NONE { PUSH int 31 ; FAILWITH } { CAR } ;
                          ADD ;
                          SWAP ;
                          PAIR ;
                          PAIR ;
                          SWAP ;
                          PAIR ;
                          UNPAIR ;
                          UNPAIR ;
                          CAR ;
                          NOW ;
                          SWAP ;
                          PAIR ;
                          PAIR ;
                          PAIR } ;
                     PUSH int 0 ;
                     ISNAT ;
                     IF_NONE { PUSH int 35 ; FAILWITH } {} ;
                     SWAP ;
                     DUP ;
                     DUG 2 ;
                     CAR ;
                     CDR ;
                     CAR ;
                     SENDER ;
                     GET ;
                     IF_NONE { PUSH int 35 ; FAILWITH } {} ;
                     CAR ;
                     COMPARE ;
                     GT ;
                     IF { DUP ;
                          UNPAIR ;
                          UNPAIR ;
                          SWAP ;
                          UNPAIR ;
                          DUP ;
                          SENDER ;
                          DUP ;
                          DUG 2 ;
                          GET ;
                          IF_NONE { PUSH int 38 ; FAILWITH } {} ;
                          CAR ;
                          DUP 7 ;
                          CAR ;
                          CDR ;
                          CAR ;
                          SENDER ;
                          GET ;
                          IF_NONE { PUSH int 38 ; FAILWITH } {} ;
                          CAR ;
                          DIG 7 ;
                          CDR ;
                          CAR ;
                          CDR ;
                          MUL ;
                          SWAP ;
                          PAIR ;
                          SOME ;
                          SWAP ;
                          UPDATE ;
                          PAIR ;
                          SWAP ;
                          PAIR ;
                          PAIR ;
                          DUP ;
                          CAR ;
                          CDR ;
                          CAR ;
                          PUSH nat 1000000 ;
                          SWAP ;
                          SENDER ;
                          GET ;
                          IF_NONE { PUSH int 37 ; FAILWITH } {} ;
                          CDR ;
                          DUP 3 ;
                          CAR ;
                          CDR ;
                          CAR ;
                          SENDER ;
                          GET ;
                          IF_NONE { PUSH int 36 ; FAILWITH } {} ;
                          CAR ;
                          DUP 4 ;
                          CDR ;
                          CAR ;
                          CDR ;
                          MUL ;
                          SUB ;
                          ISNAT ;
                          IF_NONE { PUSH int 37 ; FAILWITH } {} ;
                          EDIV ;
                          IF_NONE { PUSH int 40 ; FAILWITH } { CAR } ;
                          SWAP ;
                          DUP ;
                          DUG 2 ;
                          GET 8 ;
                          ADD ;
                          DROP ;
                          PUSH int 1000000 ;
                          ISNAT ;
                          IF_NONE { PUSH int 43 ; FAILWITH } {} ;
                          PUSH nat 1000000 ;
                          DIG 2 ;
                          DUP ;
                          GET 8 ;
                          SWAP ;
                          DUP ;
                          DUG 4 ;
                          GET 7 ;
                          SUB ;
                          ISNAT ;
                          IF_NONE { PUSH int 41 ; FAILWITH } {} ;
                          MUL ;
                          COMPARE ;
                          GT ;
                          IF { DUP ;
                               GET 5 ;
                               CONTRACT %updBalance (pair (address %address) (nat %value)) ;
                               IF_NONE { PUSH int 44 ; FAILWITH } {} ;
                               NIL operation ;
                               SWAP ;
                               PUSH mutez 0 ;
                               PUSH nat 1000000 ;
                               DUP ;
                               DIG 5 ;
                               DUP ;
                               GET 8 ;
                               SWAP ;
                               DUP ;
                               DUG 7 ;
                               GET 7 ;
                               SUB ;
                               ISNAT ;
                               IF_NONE { PUSH int 41 ; FAILWITH } {} ;
                               MUL ;
                               EDIV ;
                               IF_NONE { PUSH int 50 ; FAILWITH } { CAR } ;
                               SENDER ;
                               PAIR %address %value ;
                               TRANSFER_TOKENS ;
                               CONS ;
                               SWAP ;
                               DUP ;
                               DUG 2 ;
                               UNPAIR ;
                               SWAP ;
                               UNPAIR ;
                               SWAP ;
                               UNPAIR ;
                               SWAP ;
                               UNPAIR ;
                               SWAP ;
                               PUSH nat 1000000 ;
                               DUP ;
                               DIG 8 ;
                               DUP ;
                               GET 8 ;
                               SWAP ;
                               GET 7 ;
                               SUB ;
                               ISNAT ;
                               IF_NONE { PUSH int 41 ; FAILWITH } {} ;
                               MUL ;
                               EDIV ;
                               IF_NONE { PUSH int 56 ; FAILWITH } { CAR } ;
                               ADD ;
                               SWAP ;
                               PAIR ;
                               SWAP ;
                               PAIR ;
                               SWAP ;
                               PAIR ;
                               SWAP ;
                               PAIR ;
                               SWAP }
                             { NIL operation } }
                        { NIL operation } }
                   { DUP ;
                     PUSH nat 0 ;
                     COMPARE ;
                     LT ;
                     IF { SWAP ;
                          DUP ;
                          DUG 2 ;
                          CAR ;
                          CDR ;
                          CAR ;
                          SENDER ;
                          MEM ;
                          IF {}
                             { SWAP ;
                               UNPAIR ;
                               UNPAIR ;
                               SWAP ;
                               UNPAIR ;
                               PUSH (option (pair (nat %balanceLiq) (nat %rewardDebtLiq))) (Some (Pair 0 0)) ;
                               SENDER ;
                               UPDATE ;
                               PAIR ;
                               SWAP ;
                               PAIR ;
                               PAIR ;
                               SWAP } ;
                          PUSH address "tz1ZZZZZZZZZZZZZZZZZZZZZZZZZZZZNkiRg" ;
                          DUP 3 ;
                          CDR ;
                          CAR ;
                          CAR ;
                          COMPARE ;
                          NEQ ;
                          IF {} { PUSH string "Wrong contract address" ; FAILWITH } ;
                          PUSH nat 0 ;
                          DUP 3 ;
                          CAR ;
                          CDR ;
                          CDR ;
                          COMPARE ;
                          EQ ;
                          IF { SWAP ;
                               UNPAIR ;
                               SWAP ;
                               UNPAIR ;
                               CAR ;
                               PUSH nat 0 ;
                               SWAP ;
                               PAIR ;
                               PAIR ;
                               SWAP ;
                               PAIR ;
                               UNPAIR ;
                               UNPAIR ;
                               CAR ;
                               NOW ;
                               SWAP ;
                               PAIR ;
                               PAIR ;
                               PAIR ;
                               SWAP }
                             { SWAP ;
                               DUP ;
                               DUG 2 ;
                               UNPAIR ;
                               SWAP ;
                               UNPAIR ;
                               UNPAIR ;
                               SWAP ;
                               DUP 6 ;
                               CAR ;
                               CDR ;
                               CDR ;
                               PUSH int 60 ;
                               ISNAT ;
                               IF_NONE { PUSH int 30 ; FAILWITH } {} ;
                               DIG 7 ;
                               DUP ;
                               CAR ;
                               CAR ;
                               CAR ;
                               SWAP ;
                               CAR ;
                               CAR ;
                               CDR ;
                               NOW ;
                               SUB ;
                               ISNAT ;
                               IF_NONE { PUSH int 30 ; FAILWITH } {} ;
                               MUL ;
                               EDIV ;
                               IF_NONE { PUSH int 30 ; FAILWITH } { CAR } ;
                               EDIV ;
                               IF_NONE { PUSH int 31 ; FAILWITH } { CAR } ;
                               ADD ;
                               SWAP ;
                               PAIR ;
                               PAIR ;
                               SWAP ;
                               PAIR ;
                               UNPAIR ;
                               UNPAIR ;
                               CAR ;
                               NOW ;
                               SWAP ;
                               PAIR ;
                               PAIR ;
                               PAIR ;
                               SWAP } ;
                          PUSH int 0 ;
                          ISNAT ;
                          IF_NONE { PUSH int 35 ; FAILWITH } {} ;
                          DUP 3 ;
                          CAR ;
                          CDR ;
                          CAR ;
                          SENDER ;
                          GET ;
                          IF_NONE { PUSH int 35 ; FAILWITH } {} ;
                          CAR ;
                          COMPARE ;
                          GT ;
                          IF { SWAP ;
                               DUP ;
                               DUG 2 ;
                               UNPAIR ;
                               UNPAIR ;
                               SWAP ;
                               UNPAIR ;
                               DUP ;
                               SENDER ;
                               DUP ;
                               DUG 2 ;
                               GET ;
                               IF_NONE { PUSH int 38 ; FAILWITH } {} ;
                               CAR ;
                               DUP 8 ;
                               CAR ;
                               CDR ;
                               CAR ;
                               SENDER ;
                               GET ;
                               IF_NONE { PUSH int 38 ; FAILWITH } {} ;
                               CAR ;
                               DIG 8 ;
                               CDR ;
                               CAR ;
                               CDR ;
                               MUL ;
                               SWAP ;
                               PAIR ;
                               SOME ;
                               SWAP ;
                               UPDATE ;
                               PAIR ;
                               SWAP ;
                               PAIR ;
                               PAIR ;
                               SWAP ;
                               PUSH nat 1000000 ;
                               DUP 3 ;
                               CAR ;
                               CDR ;
                               CAR ;
                               SENDER ;
                               GET ;
                               IF_NONE { PUSH int 37 ; FAILWITH } {} ;
                               CDR ;
                               DUP 4 ;
                               CAR ;
                               CDR ;
                               CAR ;
                               SENDER ;
                               GET ;
                               IF_NONE { PUSH int 36 ; FAILWITH } {} ;
                               CAR ;
                               DUP 5 ;
                               CDR ;
                               CAR ;
                               CDR ;
                               MUL ;
                               SUB ;
                               ISNAT ;
                               IF_NONE { PUSH int 37 ; FAILWITH } {} ;
                               EDIV ;
                               IF_NONE { PUSH int 40 ; FAILWITH } { CAR } ;
                               DUP 3 ;
                               GET 8 ;
                               ADD ;
                               DROP ;
                               PUSH int 1000000 ;
                               ISNAT ;
                               IF_NONE { PUSH int 43 ; FAILWITH } {} ;
                               PUSH nat 1000000 ;
                               DIG 3 ;
                               DUP ;
                               GET 8 ;
                               SWAP ;
                               DUP ;
                               DUG 5 ;
                               GET 7 ;
                               SUB ;
                               ISNAT ;
                               IF_NONE { PUSH int 41 ; FAILWITH } {} ;
                               MUL ;
                               COMPARE ;
                               GT ;
                               IF { NIL operation ;
                                    DUP 3 ;
                                    GET 5 ;
                                    CONTRACT %updBalance (pair (address %address) (nat %value)) ;
                                    IF_NONE { PUSH int 44 ; FAILWITH } {} ;
                                    PUSH mutez 0 ;
                                    PUSH nat 1000000 ;
                                    DUP ;
                                    DIG 6 ;
                                    DUP ;
                                    GET 8 ;
                                    SWAP ;
                                    DUP ;
                                    DUG 8 ;
                                    GET 7 ;
                                    SUB ;
                                    ISNAT ;
                                    IF_NONE { PUSH int 41 ; FAILWITH } {} ;
                                    MUL ;
                                    EDIV ;
                                    IF_NONE { PUSH int 50 ; FAILWITH } { CAR } ;
                                    SENDER ;
                                    PAIR %address %value ;
                                    TRANSFER_TOKENS ;
                                    CONS ;
                                    DUP 3 ;
                                    UNPAIR ;
                                    SWAP ;
                                    UNPAIR ;
                                    SWAP ;
                                    UNPAIR ;
                                    SWAP ;
                                    UNPAIR ;
                                    SWAP ;
                                    PUSH nat 1000000 ;
                                    DUP ;
                                    DIG 9 ;
                                    DUP ;
                                    GET 8 ;
                                    SWAP ;
                                    GET 7 ;
                                    SUB ;
                                    ISNAT ;
                                    IF_NONE { PUSH int 41 ; FAILWITH } {} ;
                                    MUL ;
                                    EDIV ;
                                    IF_NONE { PUSH int 56 ; FAILWITH } { CAR } ;
                                    ADD ;
                                    SWAP ;
                                    PAIR ;
                                    SWAP ;
                                    PAIR ;
                                    SWAP ;
                                    PAIR ;
                                    SWAP ;
                                    PAIR ;
                                    DUG 2 }
                                  { NIL operation } }
                             { NIL operation } ;
                          DUP 3 ;
                          CDR ;
                          CAR ;
                          CAR ;
                          CONTRACT %transfer (pair (address %from) (pair (address %to) (nat %value))) ;
                          IF_NONE { PUSH int 69 ; FAILWITH } {} ;
                          PUSH mutez 0 ;
                          DUP 4 ;
                          SELF_ADDRESS ;
                          PAIR %to %value ;
                          SENDER ;
                          PAIR %from ;
                          TRANSFER_TOKENS ;
                          CONS ;
                          DIG 2 ;
                          UNPAIR ;
                          UNPAIR ;
                          SWAP ;
                          UNPAIR ;
                          DUP ;
                          SENDER ;
                          DUP ;
                          DUG 2 ;
                          GET ;
                          IF_NONE { PUSH int 83 ; FAILWITH } {} ;
                          UNPAIR ;
                          DUP 9 ;
                          ADD ;
                          PAIR ;
                          SOME ;
                          SWAP ;
                          UPDATE ;
                          PAIR ;
                          SWAP ;
                          PAIR ;
                          PAIR ;
                          DUP ;
                          DUG 3 ;
                          UNPAIR ;
                          UNPAIR ;
                          SWAP ;
                          UNPAIR ;
                          DUP ;
                          SENDER ;
                          DUP ;
                          DUG 2 ;
                          GET ;
                          IF_NONE { PUSH int 84 ; FAILWITH } {} ;
                          CAR ;
                          DUP 9 ;
                          CAR ;
                          CDR ;
                          CAR ;
                          SENDER ;
                          GET ;
                          IF_NONE { PUSH int 84 ; FAILWITH } {} ;
                          CAR ;
                          DIG 9 ;
                          CDR ;
                          CAR ;
                          CDR ;
                          MUL ;
                          SWAP ;
                          PAIR ;
                          SOME ;
                          SWAP ;
                          UPDATE ;
                          PAIR ;
                          SWAP ;
                          PAIR ;
                          PAIR ;
                          UNPAIR ;
                          UNPAIR ;
                          SWAP ;
                          UNPAIR ;
                          SWAP ;
                          DIG 5 ;
                          ADD ;
                          SWAP ;
                          PAIR ;
                          SWAP ;
                          PAIR ;
                          PAIR ;
                          SWAP }
                        { DROP ; NIL operation } } } }
           { IF_LEFT
               { DUP ;
                 PUSH nat 0 ;
                 COMPARE ;
                 LT ;
                 IF { PUSH nat 0 ;
                      DUP 3 ;
                      CAR ;
                      CDR ;
                      CDR ;
                      COMPARE ;
                      EQ ;
                      IF { SWAP ;
                           UNPAIR ;
                           SWAP ;
                           UNPAIR ;
                           CAR ;
                           PUSH nat 0 ;
                           SWAP ;
                           PAIR ;
                           PAIR ;
                           SWAP ;
                           PAIR ;
                           UNPAIR ;
                           UNPAIR ;
                           CAR ;
                           NOW ;
                           SWAP ;
                           PAIR ;
                           PAIR ;
                           PAIR ;
                           SWAP }
                         { SWAP ;
                           DUP ;
                           DUG 2 ;
                           UNPAIR ;
                           SWAP ;
                           UNPAIR ;
                           UNPAIR ;
                           SWAP ;
                           DUP 6 ;
                           CAR ;
                           CDR ;
                           CDR ;
                           PUSH int 60 ;
                           ISNAT ;
                           IF_NONE { PUSH int 30 ; FAILWITH } {} ;
                           DIG 7 ;
                           DUP ;
                           CAR ;
                           CAR ;
                           CAR ;
                           SWAP ;
                           CAR ;
                           CAR ;
                           CDR ;
                           NOW ;
                           SUB ;
                           ISNAT ;
                           IF_NONE { PUSH int 30 ; FAILWITH } {} ;
                           MUL ;
                           EDIV ;
                           IF_NONE { PUSH int 30 ; FAILWITH } { CAR } ;
                           EDIV ;
                           IF_NONE { PUSH int 31 ; FAILWITH } { CAR } ;
                           ADD ;
                           SWAP ;
                           PAIR ;
                           PAIR ;
                           SWAP ;
                           PAIR ;
                           UNPAIR ;
                           UNPAIR ;
                           CAR ;
                           NOW ;
                           SWAP ;
                           PAIR ;
                           PAIR ;
                           PAIR ;
                           SWAP } ;
                      PUSH int 0 ;
                      ISNAT ;
                      IF_NONE { PUSH int 35 ; FAILWITH } {} ;
                      DUP 3 ;
                      CAR ;
                      CDR ;
                      CAR ;
                      SENDER ;
                      GET ;
                      IF_NONE { PUSH int 35 ; FAILWITH } {} ;
                      CAR ;
                      COMPARE ;
                      GT ;
                      IF { SWAP ;
                           DUP ;
                           DUG 2 ;
                           UNPAIR ;
                           UNPAIR ;
                           SWAP ;
                           UNPAIR ;
                           DUP ;
                           SENDER ;
                           DUP ;
                           DUG 2 ;
                           GET ;
                           IF_NONE { PUSH int 38 ; FAILWITH } {} ;
                           CAR ;
                           DUP 8 ;
                           CAR ;
                           CDR ;
                           CAR ;
                           SENDER ;
                           GET ;
                           IF_NONE { PUSH int 38 ; FAILWITH } {} ;
                           CAR ;
                           DIG 8 ;
                           CDR ;
                           CAR ;
                           CDR ;
                           MUL ;
                           SWAP ;
                           PAIR ;
                           SOME ;
                           SWAP ;
                           UPDATE ;
                           PAIR ;
                           SWAP ;
                           PAIR ;
                           PAIR ;
                           SWAP ;
                           PUSH nat 1000000 ;
                           DUP 3 ;
                           CAR ;
                           CDR ;
                           CAR ;
                           SENDER ;
                           GET ;
                           IF_NONE { PUSH int 37 ; FAILWITH } {} ;
                           CDR ;
                           DUP 4 ;
                           CAR ;
                           CDR ;
                           CAR ;
                           SENDER ;
                           GET ;
                           IF_NONE { PUSH int 36 ; FAILWITH } {} ;
                           CAR ;
                           DUP 5 ;
                           CDR ;
                           CAR ;
                           CDR ;
                           MUL ;
                           SUB ;
                           ISNAT ;
                           IF_NONE { PUSH int 37 ; FAILWITH } {} ;
                           EDIV ;
                           IF_NONE { PUSH int 40 ; FAILWITH } { CAR } ;
                           DUP 3 ;
                           GET 8 ;
                           ADD ;
                           DROP ;
                           PUSH int 1000000 ;
                           ISNAT ;
                           IF_NONE { PUSH int 43 ; FAILWITH } {} ;
                           PUSH nat 1000000 ;
                           DIG 3 ;
                           DUP ;
                           GET 8 ;
                           SWAP ;
                           DUP ;
                           DUG 5 ;
                           GET 7 ;
                           SUB ;
                           ISNAT ;
                           IF_NONE { PUSH int 41 ; FAILWITH } {} ;
                           MUL ;
                           COMPARE ;
                           GT ;
                           IF { NIL operation ;
                                DUP 3 ;
                                GET 5 ;
                                CONTRACT %updBalance (pair (address %address) (nat %value)) ;
                                IF_NONE { PUSH int 44 ; FAILWITH } {} ;
                                PUSH mutez 0 ;
                                PUSH nat 1000000 ;
                                DUP ;
                                DIG 6 ;
                                DUP ;
                                GET 8 ;
                                SWAP ;
                                DUP ;
                                DUG 8 ;
                                GET 7 ;
                                SUB ;
                                ISNAT ;
                                IF_NONE { PUSH int 41 ; FAILWITH } {} ;
                                MUL ;
                                EDIV ;
                                IF_NONE { PUSH int 50 ; FAILWITH } { CAR } ;
                                SENDER ;
                                PAIR %address %value ;
                                TRANSFER_TOKENS ;
                                CONS ;
                                DUP 3 ;
                                UNPAIR ;
                                SWAP ;
                                UNPAIR ;
                                SWAP ;
                                UNPAIR ;
                                SWAP ;
                                UNPAIR ;
                                SWAP ;
                                PUSH nat 1000000 ;
                                DUP ;
                                DIG 9 ;
                                DUP ;
                                GET 8 ;
                                SWAP ;
                                GET 7 ;
                                SUB ;
                                ISNAT ;
                                IF_NONE { PUSH int 41 ; FAILWITH } {} ;
                                MUL ;
                                EDIV ;
                                IF_NONE { PUSH int 56 ; FAILWITH } { CAR } ;
                                ADD ;
                                SWAP ;
                                PAIR ;
                                SWAP ;
                                PAIR ;
                                SWAP ;
                                PAIR ;
                                SWAP ;
                                PAIR ;
                                DUG 2 }
                              { NIL operation } }
                         { NIL operation } ;
                      SWAP ;
                      DUP ;
                      DUG 2 ;
                      DUP 4 ;
                      CAR ;
                      CDR ;
                      CAR ;
                      SENDER ;
                      GET ;
                      IF_NONE { PUSH int 95 ; FAILWITH } {} ;
                      CAR ;
                      COMPARE ;
                      GE ;
                      IF {} { PUSH string "Wrong value" ; FAILWITH } ;
                      DUP 3 ;
                      CDR ;
                      CAR ;
                      CAR ;
                      CONTRACT %transfer (pair (address %from) (pair (address %to) (nat %value))) ;
                      IF_NONE { PUSH int 97 ; FAILWITH } {} ;
                      PUSH mutez 0 ;
                      DUP 4 ;
                      SENDER ;
                      PAIR %to %value ;
                      SELF_ADDRESS ;
                      PAIR %from ;
                      TRANSFER_TOKENS ;
                      CONS ;
                      DUP 3 ;
                      UNPAIR ;
                      UNPAIR ;
                      SWAP ;
                      UNPAIR ;
                      DUP ;
                      SENDER ;
                      DUP ;
                      DUG 2 ;
                      GET ;
                      IF_NONE { PUSH int 111 ; FAILWITH } {} ;
                      CDR ;
                      DUP 8 ;
                      DIG 9 ;
                      CAR ;
                      CDR ;
                      CAR ;
                      SENDER ;
                      GET ;
                      IF_NONE { PUSH int 111 ; FAILWITH } {} ;
                      CAR ;
                      SUB ;
                      ISNAT ;
                      IF_NONE { PUSH int 111 ; FAILWITH } {} ;
                      PAIR ;
                      SOME ;
                      SWAP ;
                      UPDATE ;
                      PAIR ;
                      SWAP ;
                      PAIR ;
                      PAIR ;
                      DUP ;
                      DUG 3 ;
                      UNPAIR ;
                      UNPAIR ;
                      SWAP ;
                      UNPAIR ;
                      DUP ;
                      SENDER ;
                      DUP ;
                      DUG 2 ;
                      GET ;
                      IF_NONE { PUSH int 112 ; FAILWITH } {} ;
                      CAR ;
                      DUP 9 ;
                      CAR ;
                      CDR ;
                      CAR ;
                      SENDER ;
                      GET ;
                      IF_NONE { PUSH int 112 ; FAILWITH } {} ;
                      CAR ;
                      DIG 9 ;
                      CDR ;
                      CAR ;
                      CDR ;
                      MUL ;
                      SWAP ;
                      PAIR ;
                      SOME ;
                      SWAP ;
                      UPDATE ;
                      PAIR ;
                      SWAP ;
                      PAIR ;
                      PAIR ;
                      DUP ;
                      DUG 3 ;
                      UNPAIR ;
                      UNPAIR ;
                      SWAP ;
                      CAR ;
                      DIG 4 ;
                      DIG 5 ;
                      CAR ;
                      CDR ;
                      CDR ;
                      SUB ;
                      ISNAT ;
                      IF_NONE { PUSH int 113 ; FAILWITH } {} ;
                      SWAP ;
                      PAIR ;
                      SWAP ;
                      PAIR ;
                      PAIR ;
                      SWAP }
                    { DROP ; NIL operation } }
               { IF_LEFT
                   { PUSH address "tz1ZZZZZZZZZZZZZZZZZZZZZZZZZZZZNkiRg" ;
                     DUP 3 ;
                     CDR ;
                     CAR ;
                     CAR ;
                     COMPARE ;
                     EQ ;
                     IF { SWAP ; UNPAIR ; SWAP ; UNPAIR ; CDR ; DIG 3 ; PAIR ; PAIR ; SWAP ; PAIR }
                        { DROP } ;
                     NIL operation }
                   { DROP ;
                     DUP ;
                     CDR ;
                     CAR ;
                     CAR ;
                     CONTRACT %withdrawProfit address ;
                     IF_NONE { PUSH string "WrongInterface" ; FAILWITH } {} ;
                     NIL operation ;
                     SWAP ;
                     PUSH mutez 0 ;
                     SELF_ADDRESS ;
                     TRANSFER_TOKENS ;
                     CONS } } } ;
         NIL operation ;
         SWAP ;
         ITER { CONS } ;
         PAIR } }
