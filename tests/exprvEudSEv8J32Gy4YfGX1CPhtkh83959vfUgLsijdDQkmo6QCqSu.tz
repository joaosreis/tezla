{ storage
    (pair (pair (string %modulus) (map %venues string int)) (map %votes string int)) ;
  parameter (pair (string %candidate) (string %venue)) ;
  code { DUP ;
         CDR ;
         SWAP ;
         CAR ;
         SWAP ;
         DUP ;
         DUG 2 ;
         CDR ;
         SWAP ;
         DUP ;
         DUG 2 ;
         CAR ;
         MEM ;
         IF { {} }
            { { PUSH string "WrongCondition: self.data.votes.contains(params.candidate)" ;
                FAILWITH } } ;
         SWAP ;
         DUP ;
         DUG 2 ;
         DUP ;
         CAR ;
         SWAP ;
         CDR ;
         PUSH int 1 ;
         DIG 4 ;
         DUP ;
         DUG 5 ;
         CDR ;
         DIG 4 ;
         DUP ;
         DUG 5 ;
         CAR ;
         GET ;
         IF_NONE { { PUSH string "Get-item:16" ; FAILWITH } } {} ;
         ADD ;
         SOME ;
         DIG 3 ;
         DUP ;
         DUG 4 ;
         CAR ;
         UPDATE ;
         SWAP ;
         PAIR ;
         DUG 2 ;
         SWAP ;
         DROP ;
         SWAP ;
         DUP ;
         DUG 2 ;
         CAR ;
         CDR ;
         SWAP ;
         DUP ;
         DUG 2 ;
         CDR ;
         MEM ;
         IF { { SWAP ;
                DUP ;
                DUG 2 ;
                DUP ;
                CDR ;
                SWAP ;
                CAR ;
                DUP ;
                CAR ;
                SWAP ;
                CDR ;
                PUSH int 1 ;
                DIG 5 ;
                DUP ;
                DUG 6 ;
                CAR ;
                CDR ;
                DIG 5 ;
                DUP ;
                DUG 6 ;
                CDR ;
                GET ;
                IF_NONE { { PUSH string "Get-item:18" ; FAILWITH } } {} ;
                ADD ;
                SOME ;
                DIG 4 ;
                DUP ;
                DUG 5 ;
                CDR ;
                UPDATE ;
                SWAP ;
                PAIR ;
                PAIR ;
                DUG 2 ;
                SWAP ;
                DROP } }
            { { SWAP ;
                DUP ;
                DUG 2 ;
                DUP ;
                CDR ;
                SWAP ;
                CAR ;
                DUP ;
                CAR ;
                SWAP ;
                CDR ;
                PUSH (option int) (Some 1) ;
                DIG 4 ;
                DUP ;
                DUG 5 ;
                CDR ;
                UPDATE ;
                SWAP ;
                PAIR ;
                PAIR ;
                DUG 2 ;
                SWAP ;
                DROP } } ;
         DROP ;
         NIL operation ;
         PAIR } }
