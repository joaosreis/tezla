{ storage
    (pair (big_map %address_list address string)
          (pair (int %counter) (big_map %gen_list address (pair (string %name) (nat %number))))) ;
  parameter (or (pair %generate (string %name) (nat %number)) (string %play)) ;
  code { DUP ;
         CDR ;
         SWAP ;
         CAR ;
         IF_LEFT
           { SWAP ;
             DUP ;
             CAR ;
             SWAP ;
             CDR ;
             DUP ;
             CAR ;
             SWAP ;
             CDR ;
             SENDER ;
             DIG 4 ;
             SOME ;
             SWAP ;
             UPDATE ;
             SWAP ;
             PAIR ;
             SWAP ;
             PAIR }
           { SWAP ;
             DUP ;
             DUG 2 ;
             CAR ;
             SENDER ;
             MEM ;
             IF { PUSH string "Duplicate" ; FAILWITH } {} ;
             PUSH int 10 ;
             DIG 2 ;
             DUP ;
             DUG 3 ;
             CDR ;
             CAR ;
             COMPARE ;
             LT ;
             IF {} { PUSH string "Exceed" ; FAILWITH } ;
             SWAP ;
             DUP ;
             CDR ;
             SWAP ;
             CAR ;
             SENDER ;
             DIG 3 ;
             SOME ;
             SWAP ;
             UPDATE ;
             PAIR ;
             DUP ;
             CAR ;
             SWAP ;
             CDR ;
             DUP ;
             CDR ;
             SWAP ;
             CAR ;
             PUSH int 1 ;
             ADD ;
             PAIR ;
             SWAP ;
             PAIR } ;
         NIL operation ;
         PAIR } }
