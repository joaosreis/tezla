{ storage
    (pair (pair (pair (nat %block_formula) (timestamp %lastUpdTime))
                (pair (big_map %ledger
                         address
                         (pair (nat %balance_liq) (pair (nat %rewardDebt_liq) (nat %reward_liq))))
                      (pair (nat %lpSupply_liq) (address %q_address))))
          (pair (pair (nat %rewardPerToken_liq) (nat %rewardTime))
                (pair (address %token_address) (pair (nat %totalStakeSupply) (nat %usedSupply_liq))))) ;
  parameter
    (or (or (unit %default)
            (or (address %liquidityRewards)
                (pair %liquidityStake (address %address) (nat %value))))
        (or (pair %liquidityUnstake (address %address) (nat %value))
            (or (address %setQAddress) (unit %withdrawProfit)))) ;
  code { UNPAIR ;
         IF_LEFT
           { IF_LEFT
               { DROP ;
                 DUP ;
                 CAR ;
                 CDR ;
                 CDR ;
                 CDR ;
                 SENDER ;
                 COMPARE ;
                 EQ ;
                 IF { DUP ;
                      GET 5 ;
                      CONTRACT unit ;
                      IF_NONE { PUSH int 154 ; FAILWITH } {} ;
                      NIL operation ;
                      SWAP ;
                      PUSH nat 100 ;
                      AMOUNT ;
                      PUSH nat 3 ;
                      MUL ;
                      EDIV ;
                      IF_NONE { PUSH int 151 ; FAILWITH } {} ;
                      CAR ;
                      AMOUNT ;
                      SUB ;
                      UNIT ;
                      TRANSFER_TOKENS ;
                      CONS ;
                      SOURCE ;
                      CONTRACT unit ;
                      IF_NONE { PUSH int 155 ; FAILWITH } {} ;
                      PUSH nat 100 ;
                      AMOUNT ;
                      PUSH nat 3 ;
                      MUL ;
                      EDIV ;
                      IF_NONE { PUSH int 151 ; FAILWITH } {} ;
                      CAR ;
                      UNIT ;
                      TRANSFER_TOKENS ;
                      CONS }
                    { NIL operation } }
               { IF_LEFT
                   { DUP ;
                     SENDER ;
                     COMPARE ;
                     EQ ;
                     IF {} { PUSH string "Wrong address" ; FAILWITH } ;
                     PUSH nat 0 ;
                     DUP 3 ;
                     CAR ;
                     CDR ;
                     CDR ;
                     CAR ;
                     COMPARE ;
                     EQ ;
                     IF { SWAP ;
                          UNPAIR ;
                          SWAP ;
                          UNPAIR ;
                          CDR ;
                          PUSH nat 0 ;
                          PAIR ;
                          PAIR ;
                          SWAP ;
                          PAIR ;
                          UNPAIR ;
                          UNPAIR ;
                          CAR ;
                          NOW ;
                          SWAP ;
                          PAIR ;
                          PAIR ;
                          PAIR ;
                          SWAP }
                        { SWAP ;
                          DUP ;
                          DUG 2 ;
                          UNPAIR ;
                          SWAP ;
                          UNPAIR ;
                          CAR ;
                          PUSH int 60 ;
                          ISNAT ;
                          IF_NONE { PUSH int 15 ; FAILWITH } {} ;
                          DIG 5 ;
                          DUP ;
                          CAR ;
                          CAR ;
                          CAR ;
                          SWAP ;
                          CAR ;
                          CAR ;
                          CDR ;
                          NOW ;
                          SUB ;
                          ISNAT ;
                          IF_NONE { PUSH int 15 ; FAILWITH } {} ;
                          MUL ;
                          EDIV ;
                          IF_NONE { PUSH int 15 ; FAILWITH } { CAR } ;
                          SWAP ;
                          PAIR ;
                          PAIR ;
                          SWAP ;
                          PAIR ;
                          DUP ;
                          DUG 2 ;
                          UNPAIR ;
                          SWAP ;
                          UNPAIR ;
                          UNPAIR ;
                          DIG 5 ;
                          DUP ;
                          CAR ;
                          CDR ;
                          CDR ;
                          CAR ;
                          SWAP ;
                          CDR ;
                          CAR ;
                          CDR ;
                          EDIV ;
                          IF_NONE { PUSH int 16 ; FAILWITH } { CAR } ;
                          ADD ;
                          PAIR ;
                          PAIR ;
                          SWAP ;
                          PAIR ;
                          UNPAIR ;
                          UNPAIR ;
                          CAR ;
                          NOW ;
                          SWAP ;
                          PAIR ;
                          PAIR ;
                          PAIR ;
                          SWAP } ;
                     PUSH int 0 ;
                     ISNAT ;
                     IF_NONE { PUSH int 20 ; FAILWITH } {} ;
                     DUP 3 ;
                     CAR ;
                     CDR ;
                     CAR ;
                     DUP 3 ;
                     GET ;
                     IF_NONE { PUSH int 20 ; FAILWITH } {} ;
                     CAR ;
                     COMPARE ;
                     GT ;
                     IF { SWAP ;
                          DUP ;
                          DUG 2 ;
                          UNPAIR ;
                          UNPAIR ;
                          SWAP ;
                          UNPAIR ;
                          DUP ;
                          DUP 6 ;
                          DUP ;
                          DUG 2 ;
                          GET ;
                          IF_NONE { PUSH int 21 ; FAILWITH } {} ;
                          UNPAIR ;
                          SWAP ;
                          CAR ;
                          DUP 9 ;
                          CAR ;
                          CDR ;
                          CAR ;
                          DUP 9 ;
                          GET ;
                          IF_NONE { PUSH int 21 ; FAILWITH } {} ;
                          CAR ;
                          DIG 9 ;
                          CDR ;
                          CAR ;
                          CAR ;
                          MUL ;
                          SWAP ;
                          PAIR ;
                          SWAP ;
                          PAIR ;
                          SOME ;
                          SWAP ;
                          UPDATE ;
                          PAIR ;
                          SWAP ;
                          PAIR ;
                          PAIR ;
                          DUP ;
                          DUG 2 ;
                          UNPAIR ;
                          UNPAIR ;
                          SWAP ;
                          UNPAIR ;
                          DUP ;
                          DUP 6 ;
                          DUP ;
                          DUG 2 ;
                          GET ;
                          IF_NONE { PUSH int 22 ; FAILWITH } {} ;
                          UNPAIR ;
                          SWAP ;
                          CAR ;
                          DUP 9 ;
                          CAR ;
                          CDR ;
                          CAR ;
                          DUP 9 ;
                          GET ;
                          IF_NONE { PUSH int 22 ; FAILWITH } {} ;
                          GET 3 ;
                          DIG 9 ;
                          CAR ;
                          CDR ;
                          CAR ;
                          DUP 10 ;
                          GET ;
                          IF_NONE { PUSH int 22 ; FAILWITH } {} ;
                          GET 4 ;
                          SUB ;
                          ISNAT ;
                          IF_NONE { PUSH int 22 ; FAILWITH } {} ;
                          SWAP ;
                          PAIR ;
                          SWAP ;
                          PAIR ;
                          SOME ;
                          SWAP ;
                          UPDATE ;
                          PAIR ;
                          SWAP ;
                          PAIR ;
                          PAIR ;
                          DUP ;
                          DUG 2 ;
                          UNPAIR ;
                          UNPAIR ;
                          SWAP ;
                          UNPAIR ;
                          DUP ;
                          DUP 6 ;
                          DUP ;
                          DUG 2 ;
                          GET ;
                          IF_NONE { PUSH int 23 ; FAILWITH } {} ;
                          UNPAIR ;
                          SWAP ;
                          CDR ;
                          DUP 9 ;
                          CAR ;
                          CDR ;
                          CAR ;
                          DUP 9 ;
                          GET ;
                          IF_NONE { PUSH int 23 ; FAILWITH } {} ;
                          CAR ;
                          DIG 9 ;
                          CDR ;
                          CAR ;
                          CAR ;
                          MUL ;
                          PAIR ;
                          SWAP ;
                          PAIR ;
                          SOME ;
                          SWAP ;
                          UPDATE ;
                          PAIR ;
                          SWAP ;
                          PAIR ;
                          PAIR ;
                          DUP ;
                          GET 7 ;
                          SWAP ;
                          DUP ;
                          DUG 3 ;
                          CAR ;
                          CDR ;
                          CAR ;
                          DUP 3 ;
                          GET ;
                          IF_NONE { PUSH int 25 ; FAILWITH } {} ;
                          GET 4 ;
                          DUP 4 ;
                          GET 8 ;
                          ADD ;
                          COMPARE ;
                          GT ;
                          IF { SWAP ;
                               DUP ;
                               DUG 2 ;
                               UNPAIR ;
                               UNPAIR ;
                               SWAP ;
                               UNPAIR ;
                               DUP ;
                               DUP 6 ;
                               DUP ;
                               DUG 2 ;
                               GET ;
                               IF_NONE { PUSH int 27 ; FAILWITH } {} ;
                               UNPAIR ;
                               SWAP ;
                               CAR ;
                               DIG 8 ;
                               DUP ;
                               GET 8 ;
                               SWAP ;
                               GET 7 ;
                               SUB ;
                               ISNAT ;
                               IF_NONE { PUSH int 27 ; FAILWITH } {} ;
                               SWAP ;
                               PAIR ;
                               SWAP ;
                               PAIR ;
                               SOME ;
                               SWAP ;
                               UPDATE ;
                               PAIR ;
                               SWAP ;
                               PAIR ;
                               PAIR ;
                               SWAP }
                             {} ;
                          PUSH int 0 ;
                          ISNAT ;
                          IF_NONE { PUSH int 29 ; FAILWITH } {} ;
                          DUP 3 ;
                          CAR ;
                          CDR ;
                          CAR ;
                          DUP 3 ;
                          GET ;
                          IF_NONE { PUSH int 29 ; FAILWITH } {} ;
                          GET 4 ;
                          COMPARE ;
                          GT ;
                          IF { NIL operation ;
                               DUP 3 ;
                               GET 5 ;
                               CONTRACT %updBalance (pair (address %address) (nat %value)) ;
                               IF_NONE { PUSH int 30 ; FAILWITH } {} ;
                               PUSH mutez 0 ;
                               DUP 5 ;
                               CAR ;
                               CDR ;
                               CAR ;
                               DUP 5 ;
                               GET ;
                               IF_NONE { PUSH int 36 ; FAILWITH } {} ;
                               GET 4 ;
                               DUP 5 ;
                               PAIR %address %value ;
                               TRANSFER_TOKENS ;
                               CONS ;
                               DUP 3 ;
                               UNPAIR ;
                               SWAP ;
                               UNPAIR ;
                               SWAP ;
                               UNPAIR ;
                               SWAP ;
                               UNPAIR ;
                               SWAP ;
                               DIG 7 ;
                               CAR ;
                               CDR ;
                               CAR ;
                               DIG 7 ;
                               GET ;
                               IF_NONE { PUSH int 42 ; FAILWITH } {} ;
                               GET 4 ;
                               ADD ;
                               SWAP ;
                               PAIR ;
                               SWAP ;
                               PAIR ;
                               SWAP ;
                               PAIR ;
                               SWAP ;
                               PAIR ;
                               SWAP }
                             { DROP ; NIL operation } }
                        { DROP ; NIL operation } }
                   { DUP ;
                     CAR ;
                     SENDER ;
                     COMPARE ;
                     EQ ;
                     IF {} { PUSH string "Wrong address" ; FAILWITH } ;
                     DUP ;
                     CDR ;
                     PUSH nat 999 ;
                     COMPARE ;
                     LT ;
                     IF {} { PUSH string "wrong amount" ; FAILWITH } ;
                     SWAP ;
                     DUP ;
                     DUG 2 ;
                     CAR ;
                     CDR ;
                     CAR ;
                     SWAP ;
                     DUP ;
                     DUG 2 ;
                     CAR ;
                     MEM ;
                     IF {}
                        { SWAP ;
                          UNPAIR ;
                          UNPAIR ;
                          SWAP ;
                          UNPAIR ;
                          PUSH (option (pair (nat %balance_liq) (pair (nat %rewardDebt_liq) (nat %reward_liq))))
                               (Some (Pair 0 (Pair 0 0))) ;
                          DUP 6 ;
                          CAR ;
                          UPDATE ;
                          PAIR ;
                          SWAP ;
                          PAIR ;
                          PAIR ;
                          SWAP } ;
                     PUSH address "tz1ZZZZZZZZZZZZZZZZZZZZZZZZZZZZNkiRg" ;
                     DUP 3 ;
                     CAR ;
                     CDR ;
                     CDR ;
                     CDR ;
                     COMPARE ;
                     NEQ ;
                     IF {} { PUSH string "Wrong contract address" ; FAILWITH } ;
                     PUSH nat 0 ;
                     DUP 3 ;
                     CAR ;
                     CDR ;
                     CDR ;
                     CAR ;
                     COMPARE ;
                     EQ ;
                     IF { SWAP ;
                          UNPAIR ;
                          SWAP ;
                          UNPAIR ;
                          CDR ;
                          PUSH nat 0 ;
                          PAIR ;
                          PAIR ;
                          SWAP ;
                          PAIR ;
                          UNPAIR ;
                          UNPAIR ;
                          CAR ;
                          NOW ;
                          SWAP ;
                          PAIR ;
                          PAIR ;
                          PAIR ;
                          SWAP }
                        { SWAP ;
                          DUP ;
                          DUG 2 ;
                          UNPAIR ;
                          SWAP ;
                          UNPAIR ;
                          CAR ;
                          PUSH int 60 ;
                          ISNAT ;
                          IF_NONE { PUSH int 15 ; FAILWITH } {} ;
                          DIG 5 ;
                          DUP ;
                          CAR ;
                          CAR ;
                          CAR ;
                          SWAP ;
                          CAR ;
                          CAR ;
                          CDR ;
                          NOW ;
                          SUB ;
                          ISNAT ;
                          IF_NONE { PUSH int 15 ; FAILWITH } {} ;
                          MUL ;
                          EDIV ;
                          IF_NONE { PUSH int 15 ; FAILWITH } { CAR } ;
                          SWAP ;
                          PAIR ;
                          PAIR ;
                          SWAP ;
                          PAIR ;
                          DUP ;
                          DUG 2 ;
                          UNPAIR ;
                          SWAP ;
                          UNPAIR ;
                          UNPAIR ;
                          DIG 5 ;
                          DUP ;
                          CAR ;
                          CDR ;
                          CDR ;
                          CAR ;
                          SWAP ;
                          CDR ;
                          CAR ;
                          CDR ;
                          EDIV ;
                          IF_NONE { PUSH int 16 ; FAILWITH } { CAR } ;
                          ADD ;
                          PAIR ;
                          PAIR ;
                          SWAP ;
                          PAIR ;
                          UNPAIR ;
                          UNPAIR ;
                          CAR ;
                          NOW ;
                          SWAP ;
                          PAIR ;
                          PAIR ;
                          PAIR ;
                          SWAP } ;
                     PUSH int 0 ;
                     ISNAT ;
                     IF_NONE { PUSH int 20 ; FAILWITH } {} ;
                     DUP 3 ;
                     CAR ;
                     CDR ;
                     CAR ;
                     DUP 3 ;
                     CAR ;
                     GET ;
                     IF_NONE { PUSH int 20 ; FAILWITH } {} ;
                     CAR ;
                     COMPARE ;
                     GT ;
                     IF { SWAP ;
                          DUP ;
                          DUG 2 ;
                          UNPAIR ;
                          UNPAIR ;
                          SWAP ;
                          UNPAIR ;
                          DUP ;
                          DUP 6 ;
                          CAR ;
                          DUP ;
                          DUG 2 ;
                          GET ;
                          IF_NONE { PUSH int 21 ; FAILWITH } {} ;
                          UNPAIR ;
                          SWAP ;
                          CAR ;
                          DUP 9 ;
                          CAR ;
                          CDR ;
                          CAR ;
                          DUP 9 ;
                          CAR ;
                          GET ;
                          IF_NONE { PUSH int 21 ; FAILWITH } {} ;
                          CAR ;
                          DIG 9 ;
                          CDR ;
                          CAR ;
                          CAR ;
                          MUL ;
                          SWAP ;
                          PAIR ;
                          SWAP ;
                          PAIR ;
                          SOME ;
                          SWAP ;
                          UPDATE ;
                          PAIR ;
                          SWAP ;
                          PAIR ;
                          PAIR ;
                          DUP ;
                          DUG 2 ;
                          UNPAIR ;
                          UNPAIR ;
                          SWAP ;
                          UNPAIR ;
                          DUP ;
                          DUP 6 ;
                          CAR ;
                          DUP ;
                          DUG 2 ;
                          GET ;
                          IF_NONE { PUSH int 22 ; FAILWITH } {} ;
                          UNPAIR ;
                          SWAP ;
                          CAR ;
                          DUP 9 ;
                          CAR ;
                          CDR ;
                          CAR ;
                          DUP 9 ;
                          CAR ;
                          GET ;
                          IF_NONE { PUSH int 22 ; FAILWITH } {} ;
                          GET 3 ;
                          DIG 9 ;
                          CAR ;
                          CDR ;
                          CAR ;
                          DUP 10 ;
                          CAR ;
                          GET ;
                          IF_NONE { PUSH int 22 ; FAILWITH } {} ;
                          GET 4 ;
                          SUB ;
                          ISNAT ;
                          IF_NONE { PUSH int 22 ; FAILWITH } {} ;
                          SWAP ;
                          PAIR ;
                          SWAP ;
                          PAIR ;
                          SOME ;
                          SWAP ;
                          UPDATE ;
                          PAIR ;
                          SWAP ;
                          PAIR ;
                          PAIR ;
                          DUP ;
                          DUG 2 ;
                          UNPAIR ;
                          UNPAIR ;
                          SWAP ;
                          UNPAIR ;
                          DUP ;
                          DUP 6 ;
                          CAR ;
                          DUP ;
                          DUG 2 ;
                          GET ;
                          IF_NONE { PUSH int 23 ; FAILWITH } {} ;
                          UNPAIR ;
                          SWAP ;
                          CDR ;
                          DUP 9 ;
                          CAR ;
                          CDR ;
                          CAR ;
                          DUP 9 ;
                          CAR ;
                          GET ;
                          IF_NONE { PUSH int 23 ; FAILWITH } {} ;
                          CAR ;
                          DIG 9 ;
                          CDR ;
                          CAR ;
                          CAR ;
                          MUL ;
                          PAIR ;
                          SWAP ;
                          PAIR ;
                          SOME ;
                          SWAP ;
                          UPDATE ;
                          PAIR ;
                          SWAP ;
                          PAIR ;
                          PAIR ;
                          DUP ;
                          GET 7 ;
                          SWAP ;
                          DUP ;
                          DUG 3 ;
                          CAR ;
                          CDR ;
                          CAR ;
                          DUP 3 ;
                          CAR ;
                          GET ;
                          IF_NONE { PUSH int 25 ; FAILWITH } {} ;
                          GET 4 ;
                          DUP 4 ;
                          GET 8 ;
                          ADD ;
                          COMPARE ;
                          GT ;
                          IF { SWAP ;
                               DUP ;
                               DUG 2 ;
                               UNPAIR ;
                               UNPAIR ;
                               SWAP ;
                               UNPAIR ;
                               DUP ;
                               DUP 6 ;
                               CAR ;
                               DUP ;
                               DUG 2 ;
                               GET ;
                               IF_NONE { PUSH int 27 ; FAILWITH } {} ;
                               UNPAIR ;
                               SWAP ;
                               CAR ;
                               DIG 8 ;
                               DUP ;
                               GET 8 ;
                               SWAP ;
                               GET 7 ;
                               SUB ;
                               ISNAT ;
                               IF_NONE { PUSH int 27 ; FAILWITH } {} ;
                               SWAP ;
                               PAIR ;
                               SWAP ;
                               PAIR ;
                               SOME ;
                               SWAP ;
                               UPDATE ;
                               PAIR ;
                               SWAP ;
                               PAIR ;
                               PAIR ;
                               SWAP }
                             {} ;
                          PUSH int 0 ;
                          ISNAT ;
                          IF_NONE { PUSH int 29 ; FAILWITH } {} ;
                          DUP 3 ;
                          CAR ;
                          CDR ;
                          CAR ;
                          DUP 3 ;
                          CAR ;
                          GET ;
                          IF_NONE { PUSH int 29 ; FAILWITH } {} ;
                          GET 4 ;
                          COMPARE ;
                          GT ;
                          IF { NIL operation ;
                               DUP 3 ;
                               GET 5 ;
                               CONTRACT %updBalance (pair (address %address) (nat %value)) ;
                               IF_NONE { PUSH int 30 ; FAILWITH } {} ;
                               PUSH mutez 0 ;
                               DUP 5 ;
                               CAR ;
                               CDR ;
                               CAR ;
                               DUP 5 ;
                               CAR ;
                               GET ;
                               IF_NONE { PUSH int 36 ; FAILWITH } {} ;
                               GET 4 ;
                               DUP 5 ;
                               CAR ;
                               PAIR %address %value ;
                               TRANSFER_TOKENS ;
                               CONS ;
                               DUP 3 ;
                               UNPAIR ;
                               SWAP ;
                               UNPAIR ;
                               SWAP ;
                               UNPAIR ;
                               SWAP ;
                               UNPAIR ;
                               SWAP ;
                               DIG 7 ;
                               CAR ;
                               CDR ;
                               CAR ;
                               DUP 8 ;
                               CAR ;
                               GET ;
                               IF_NONE { PUSH int 42 ; FAILWITH } {} ;
                               GET 4 ;
                               ADD ;
                               SWAP ;
                               PAIR ;
                               SWAP ;
                               PAIR ;
                               SWAP ;
                               PAIR ;
                               SWAP ;
                               PAIR ;
                               DUG 2 }
                             { NIL operation } }
                        { NIL operation } ;
                     DUP 3 ;
                     CAR ;
                     CDR ;
                     CDR ;
                     CDR ;
                     CONTRACT %transfer (pair (address %from) (pair (address %to) (nat %value))) ;
                     IF_NONE { PUSH int 75 ; FAILWITH } {} ;
                     PUSH mutez 0 ;
                     DUP 4 ;
                     CDR ;
                     SELF_ADDRESS ;
                     PAIR %to %value ;
                     DUP 5 ;
                     CAR ;
                     PAIR %from ;
                     TRANSFER_TOKENS ;
                     CONS ;
                     DIG 2 ;
                     UNPAIR ;
                     UNPAIR ;
                     SWAP ;
                     UNPAIR ;
                     DUP ;
                     DUP 7 ;
                     CAR ;
                     DUP ;
                     DUG 2 ;
                     GET ;
                     IF_NONE { PUSH int 89 ; FAILWITH } {} ;
                     UNPAIR ;
                     DUP 9 ;
                     CDR ;
                     ADD ;
                     PAIR ;
                     SOME ;
                     SWAP ;
                     UPDATE ;
                     PAIR ;
                     SWAP ;
                     PAIR ;
                     PAIR ;
                     DUP ;
                     DUG 3 ;
                     UNPAIR ;
                     UNPAIR ;
                     SWAP ;
                     UNPAIR ;
                     DUP ;
                     DUP 7 ;
                     CAR ;
                     DUP ;
                     DUG 2 ;
                     GET ;
                     IF_NONE { PUSH int 90 ; FAILWITH } {} ;
                     UNPAIR ;
                     SWAP ;
                     CDR ;
                     DUP 10 ;
                     CAR ;
                     CDR ;
                     CAR ;
                     DUP 10 ;
                     CAR ;
                     GET ;
                     IF_NONE { PUSH int 90 ; FAILWITH } {} ;
                     CAR ;
                     DIG 10 ;
                     CDR ;
                     CAR ;
                     CAR ;
                     MUL ;
                     PAIR ;
                     SWAP ;
                     PAIR ;
                     SOME ;
                     SWAP ;
                     UPDATE ;
                     PAIR ;
                     SWAP ;
                     PAIR ;
                     PAIR ;
                     UNPAIR ;
                     UNPAIR ;
                     SWAP ;
                     UNPAIR ;
                     SWAP ;
                     UNPAIR ;
                     DIG 6 ;
                     CDR ;
                     ADD ;
                     PAIR ;
                     SWAP ;
                     PAIR ;
                     SWAP ;
                     PAIR ;
                     PAIR ;
                     SWAP } } }
           { IF_LEFT
               { DUP ;
                 CAR ;
                 SENDER ;
                 COMPARE ;
                 EQ ;
                 IF {} { PUSH string "Wrong address" ; FAILWITH } ;
                 DUP ;
                 CDR ;
                 PUSH nat 999 ;
                 COMPARE ;
                 LT ;
                 IF {} { PUSH string "wrong amount" ; FAILWITH } ;
                 PUSH nat 0 ;
                 DUP 3 ;
                 CAR ;
                 CDR ;
                 CDR ;
                 CAR ;
                 COMPARE ;
                 EQ ;
                 IF { SWAP ;
                      UNPAIR ;
                      SWAP ;
                      UNPAIR ;
                      CDR ;
                      PUSH nat 0 ;
                      PAIR ;
                      PAIR ;
                      SWAP ;
                      PAIR ;
                      UNPAIR ;
                      UNPAIR ;
                      CAR ;
                      NOW ;
                      SWAP ;
                      PAIR ;
                      PAIR ;
                      PAIR ;
                      SWAP }
                    { SWAP ;
                      DUP ;
                      DUG 2 ;
                      UNPAIR ;
                      SWAP ;
                      UNPAIR ;
                      CAR ;
                      PUSH int 60 ;
                      ISNAT ;
                      IF_NONE { PUSH int 15 ; FAILWITH } {} ;
                      DIG 5 ;
                      DUP ;
                      CAR ;
                      CAR ;
                      CAR ;
                      SWAP ;
                      CAR ;
                      CAR ;
                      CDR ;
                      NOW ;
                      SUB ;
                      ISNAT ;
                      IF_NONE { PUSH int 15 ; FAILWITH } {} ;
                      MUL ;
                      EDIV ;
                      IF_NONE { PUSH int 15 ; FAILWITH } { CAR } ;
                      SWAP ;
                      PAIR ;
                      PAIR ;
                      SWAP ;
                      PAIR ;
                      DUP ;
                      DUG 2 ;
                      UNPAIR ;
                      SWAP ;
                      UNPAIR ;
                      UNPAIR ;
                      DIG 5 ;
                      DUP ;
                      CAR ;
                      CDR ;
                      CDR ;
                      CAR ;
                      SWAP ;
                      CDR ;
                      CAR ;
                      CDR ;
                      EDIV ;
                      IF_NONE { PUSH int 16 ; FAILWITH } { CAR } ;
                      ADD ;
                      PAIR ;
                      PAIR ;
                      SWAP ;
                      PAIR ;
                      UNPAIR ;
                      UNPAIR ;
                      CAR ;
                      NOW ;
                      SWAP ;
                      PAIR ;
                      PAIR ;
                      PAIR ;
                      SWAP } ;
                 PUSH int 0 ;
                 ISNAT ;
                 IF_NONE { PUSH int 20 ; FAILWITH } {} ;
                 DUP 3 ;
                 CAR ;
                 CDR ;
                 CAR ;
                 DUP 3 ;
                 CAR ;
                 GET ;
                 IF_NONE { PUSH int 20 ; FAILWITH } {} ;
                 CAR ;
                 COMPARE ;
                 GT ;
                 IF { SWAP ;
                      DUP ;
                      DUG 2 ;
                      UNPAIR ;
                      UNPAIR ;
                      SWAP ;
                      UNPAIR ;
                      DUP ;
                      DUP 6 ;
                      CAR ;
                      DUP ;
                      DUG 2 ;
                      GET ;
                      IF_NONE { PUSH int 21 ; FAILWITH } {} ;
                      UNPAIR ;
                      SWAP ;
                      CAR ;
                      DUP 9 ;
                      CAR ;
                      CDR ;
                      CAR ;
                      DUP 9 ;
                      CAR ;
                      GET ;
                      IF_NONE { PUSH int 21 ; FAILWITH } {} ;
                      CAR ;
                      DIG 9 ;
                      CDR ;
                      CAR ;
                      CAR ;
                      MUL ;
                      SWAP ;
                      PAIR ;
                      SWAP ;
                      PAIR ;
                      SOME ;
                      SWAP ;
                      UPDATE ;
                      PAIR ;
                      SWAP ;
                      PAIR ;
                      PAIR ;
                      DUP ;
                      DUG 2 ;
                      UNPAIR ;
                      UNPAIR ;
                      SWAP ;
                      UNPAIR ;
                      DUP ;
                      DUP 6 ;
                      CAR ;
                      DUP ;
                      DUG 2 ;
                      GET ;
                      IF_NONE { PUSH int 22 ; FAILWITH } {} ;
                      UNPAIR ;
                      SWAP ;
                      CAR ;
                      DUP 9 ;
                      CAR ;
                      CDR ;
                      CAR ;
                      DUP 9 ;
                      CAR ;
                      GET ;
                      IF_NONE { PUSH int 22 ; FAILWITH } {} ;
                      GET 3 ;
                      DIG 9 ;
                      CAR ;
                      CDR ;
                      CAR ;
                      DUP 10 ;
                      CAR ;
                      GET ;
                      IF_NONE { PUSH int 22 ; FAILWITH } {} ;
                      GET 4 ;
                      SUB ;
                      ISNAT ;
                      IF_NONE { PUSH int 22 ; FAILWITH } {} ;
                      SWAP ;
                      PAIR ;
                      SWAP ;
                      PAIR ;
                      SOME ;
                      SWAP ;
                      UPDATE ;
                      PAIR ;
                      SWAP ;
                      PAIR ;
                      PAIR ;
                      DUP ;
                      DUG 2 ;
                      UNPAIR ;
                      UNPAIR ;
                      SWAP ;
                      UNPAIR ;
                      DUP ;
                      DUP 6 ;
                      CAR ;
                      DUP ;
                      DUG 2 ;
                      GET ;
                      IF_NONE { PUSH int 23 ; FAILWITH } {} ;
                      UNPAIR ;
                      SWAP ;
                      CDR ;
                      DUP 9 ;
                      CAR ;
                      CDR ;
                      CAR ;
                      DUP 9 ;
                      CAR ;
                      GET ;
                      IF_NONE { PUSH int 23 ; FAILWITH } {} ;
                      CAR ;
                      DIG 9 ;
                      CDR ;
                      CAR ;
                      CAR ;
                      MUL ;
                      PAIR ;
                      SWAP ;
                      PAIR ;
                      SOME ;
                      SWAP ;
                      UPDATE ;
                      PAIR ;
                      SWAP ;
                      PAIR ;
                      PAIR ;
                      DUP ;
                      GET 7 ;
                      SWAP ;
                      DUP ;
                      DUG 3 ;
                      CAR ;
                      CDR ;
                      CAR ;
                      DUP 3 ;
                      CAR ;
                      GET ;
                      IF_NONE { PUSH int 25 ; FAILWITH } {} ;
                      GET 4 ;
                      DUP 4 ;
                      GET 8 ;
                      ADD ;
                      COMPARE ;
                      GT ;
                      IF { SWAP ;
                           DUP ;
                           DUG 2 ;
                           UNPAIR ;
                           UNPAIR ;
                           SWAP ;
                           UNPAIR ;
                           DUP ;
                           DUP 6 ;
                           CAR ;
                           DUP ;
                           DUG 2 ;
                           GET ;
                           IF_NONE { PUSH int 27 ; FAILWITH } {} ;
                           UNPAIR ;
                           SWAP ;
                           CAR ;
                           DIG 8 ;
                           DUP ;
                           GET 8 ;
                           SWAP ;
                           GET 7 ;
                           SUB ;
                           ISNAT ;
                           IF_NONE { PUSH int 27 ; FAILWITH } {} ;
                           SWAP ;
                           PAIR ;
                           SWAP ;
                           PAIR ;
                           SOME ;
                           SWAP ;
                           UPDATE ;
                           PAIR ;
                           SWAP ;
                           PAIR ;
                           PAIR ;
                           SWAP }
                         {} ;
                      PUSH int 0 ;
                      ISNAT ;
                      IF_NONE { PUSH int 29 ; FAILWITH } {} ;
                      DUP 3 ;
                      CAR ;
                      CDR ;
                      CAR ;
                      DUP 3 ;
                      CAR ;
                      GET ;
                      IF_NONE { PUSH int 29 ; FAILWITH } {} ;
                      GET 4 ;
                      COMPARE ;
                      GT ;
                      IF { NIL operation ;
                           DUP 3 ;
                           GET 5 ;
                           CONTRACT %updBalance (pair (address %address) (nat %value)) ;
                           IF_NONE { PUSH int 30 ; FAILWITH } {} ;
                           PUSH mutez 0 ;
                           DUP 5 ;
                           CAR ;
                           CDR ;
                           CAR ;
                           DUP 5 ;
                           CAR ;
                           GET ;
                           IF_NONE { PUSH int 36 ; FAILWITH } {} ;
                           GET 4 ;
                           DUP 5 ;
                           CAR ;
                           PAIR %address %value ;
                           TRANSFER_TOKENS ;
                           CONS ;
                           DUP 3 ;
                           UNPAIR ;
                           SWAP ;
                           UNPAIR ;
                           SWAP ;
                           UNPAIR ;
                           SWAP ;
                           UNPAIR ;
                           SWAP ;
                           DIG 7 ;
                           CAR ;
                           CDR ;
                           CAR ;
                           DUP 8 ;
                           CAR ;
                           GET ;
                           IF_NONE { PUSH int 42 ; FAILWITH } {} ;
                           GET 4 ;
                           ADD ;
                           SWAP ;
                           PAIR ;
                           SWAP ;
                           PAIR ;
                           SWAP ;
                           PAIR ;
                           SWAP ;
                           PAIR ;
                           DUG 2 }
                         { NIL operation } }
                    { NIL operation } ;
                 SWAP ;
                 DUP ;
                 DUG 2 ;
                 CDR ;
                 DUP 4 ;
                 CAR ;
                 CDR ;
                 CAR ;
                 DUP 4 ;
                 CAR ;
                 GET ;
                 IF_NONE { PUSH int 102 ; FAILWITH } {} ;
                 CAR ;
                 COMPARE ;
                 GE ;
                 IF {} { PUSH string "Wrong value" ; FAILWITH } ;
                 DUP 3 ;
                 CAR ;
                 CDR ;
                 CDR ;
                 CDR ;
                 CONTRACT %transfer (pair (address %from) (pair (address %to) (nat %value))) ;
                 IF_NONE { PUSH int 104 ; FAILWITH } {} ;
                 PUSH mutez 0 ;
                 DIG 3 ;
                 DUP ;
                 CDR ;
                 SWAP ;
                 DUP ;
                 DUG 5 ;
                 CAR ;
                 PAIR %to %value ;
                 SELF_ADDRESS ;
                 PAIR %from ;
                 TRANSFER_TOKENS ;
                 CONS ;
                 DUP 3 ;
                 UNPAIR ;
                 UNPAIR ;
                 SWAP ;
                 UNPAIR ;
                 DUP ;
                 DUP 7 ;
                 CAR ;
                 DUP ;
                 DUG 2 ;
                 GET ;
                 IF_NONE { PUSH int 118 ; FAILWITH } {} ;
                 CDR ;
                 DUP 8 ;
                 CDR ;
                 DIG 9 ;
                 CAR ;
                 CDR ;
                 CAR ;
                 DUP 10 ;
                 CAR ;
                 GET ;
                 IF_NONE { PUSH int 118 ; FAILWITH } {} ;
                 CAR ;
                 SUB ;
                 ISNAT ;
                 IF_NONE { PUSH int 118 ; FAILWITH } {} ;
                 PAIR ;
                 SOME ;
                 SWAP ;
                 UPDATE ;
                 PAIR ;
                 SWAP ;
                 PAIR ;
                 PAIR ;
                 DUP ;
                 DUG 3 ;
                 UNPAIR ;
                 UNPAIR ;
                 SWAP ;
                 UNPAIR ;
                 DUP ;
                 DUP 7 ;
                 CAR ;
                 DUP ;
                 DUG 2 ;
                 GET ;
                 IF_NONE { PUSH int 119 ; FAILWITH } {} ;
                 UNPAIR ;
                 SWAP ;
                 CDR ;
                 DUP 10 ;
                 CAR ;
                 CDR ;
                 CAR ;
                 DUP 10 ;
                 CAR ;
                 GET ;
                 IF_NONE { PUSH int 119 ; FAILWITH } {} ;
                 CAR ;
                 DIG 10 ;
                 CDR ;
                 CAR ;
                 CAR ;
                 MUL ;
                 PAIR ;
                 SWAP ;
                 PAIR ;
                 SOME ;
                 SWAP ;
                 UPDATE ;
                 PAIR ;
                 SWAP ;
                 PAIR ;
                 PAIR ;
                 DUP ;
                 DUG 3 ;
                 UNPAIR ;
                 UNPAIR ;
                 SWAP ;
                 UNPAIR ;
                 SWAP ;
                 CDR ;
                 DIG 5 ;
                 CDR ;
                 DIG 6 ;
                 CAR ;
                 CDR ;
                 CDR ;
                 CAR ;
                 SUB ;
                 ISNAT ;
                 IF_NONE { PUSH int 120 ; FAILWITH } {} ;
                 PAIR ;
                 SWAP ;
                 PAIR ;
                 SWAP ;
                 PAIR ;
                 PAIR ;
                 SWAP }
               { IF_LEFT
                   { PUSH address "tz1ZZZZZZZZZZZZZZZZZZZZZZZZZZZZNkiRg" ;
                     DUP 3 ;
                     CAR ;
                     CDR ;
                     CDR ;
                     CDR ;
                     COMPARE ;
                     EQ ;
                     IF { SWAP ;
                          UNPAIR ;
                          UNPAIR ;
                          SWAP ;
                          UNPAIR ;
                          SWAP ;
                          CAR ;
                          DIG 4 ;
                          SWAP ;
                          PAIR ;
                          SWAP ;
                          PAIR ;
                          SWAP ;
                          PAIR ;
                          PAIR }
                        { DROP } ;
                     NIL operation }
                   { DROP ;
                     DUP ;
                     CAR ;
                     CDR ;
                     CDR ;
                     CDR ;
                     CONTRACT %use
                       (pair nat
                             (or (or (or (pair %divestLiquidity (pair (nat %min_tez) (nat %min_tokens)) (nat %shares))
                                         (nat %initializeExchange))
                                     (or (nat %investLiquidity)
                                         (pair %tezToTokenPayment (nat %amount) (address %receiver))))
                                 (or (or (pair %tokenToTezPayment (pair (nat %amount) (nat %min_out)) (address %receiver))
                                         (pair %veto (nat %value) (address %voter)))
                                     (or (pair %vote (pair (key_hash %candidate) (nat %value)) (address %voter))
                                         (address %withdrawProfit))))) ;
                     IF_NONE { PUSH string "WrongInterface" ; FAILWITH } {} ;
                     NIL operation ;
                     SWAP ;
                     PUSH mutez 0 ;
                     SELF_ADDRESS ;
                     RIGHT %vote %withdrawProfit
                       (pair (pair (key_hash %candidate) (nat %value)) (address %voter)) ;
                     RIGHT
                       (or (pair %tokenToTezPayment (pair (nat %amount) (nat %min_out)) (address %receiver))
                           (pair %veto (nat %value) (address %voter))) ;
                     RIGHT
                       (or (or (pair %divestLiquidity (pair (nat %min_tez) (nat %min_tokens)) (nat %shares))
                               (nat %initializeExchange))
                           (or (nat %investLiquidity)
                               (pair %tezToTokenPayment (nat %amount) (address %receiver)))) ;
                     PUSH nat 3 ;
                     PAIR ;
                     TRANSFER_TOKENS ;
                     CONS } } } ;
         NIL operation ;
         SWAP ;
         ITER { CONS } ;
         PAIR } }
