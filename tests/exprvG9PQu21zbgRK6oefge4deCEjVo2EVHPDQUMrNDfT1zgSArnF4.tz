{ storage (map string (pair (string %nome) (pair (mutez %saldo) (nat %telefone)))) ;
  parameter
    (or (or (pair %atualizarSaldo (string %id) (mutez %valor))
            (pair %inserir (pair (string %id) (string %nome)) (pair (mutez %saldo) (nat %telefone))))
        (or (string %remover)
            (pair %transferir (string %idDestino) (pair (string %idOrigem) (mutez %valor))))) ;
  code { DUP ;
         CDR ;
         SWAP ;
         CAR ;
         IF_LEFT
           { IF_LEFT
               { { DUP ;
                   CAR ;
                   PUSH string "" ;
                   COMPARE ;
                   NEQ ;
                   IF { {} }
                      { { PUSH string "WrongCondition: params.id != ''" ; FAILWITH } } ;
                   DUP ;
                   CDR ;
                   PUSH mutez 0 ;
                   SWAP ;
                   COMPARE ;
                   GE ;
                   IF { {} }
                      { { PUSH string "WrongCondition: params.valor >= sp.tez(0)" ; FAILWITH } } ;
                   SWAP ;
                   DUP ;
                   DIG 2 ;
                   DUP ;
                   DUG 3 ;
                   CAR ;
                   DUP ;
                   DUG 2 ;
                   GET ;
                   IF_NONE { { PUSH string "set_in_top-any" ; FAILWITH } } {} ;
                   DUP ;
                   CAR ;
                   SWAP ;
                   CDR ;
                   CDR ;
                   DIG 4 ;
                   CDR ;
                   PAIR ;
                   SWAP ;
                   PAIR ;
                   SOME ;
                   SWAP ;
                   UPDATE } }
               { { DUP ;
                   CAR ;
                   CAR ;
                   PUSH string "" ;
                   COMPARE ;
                   NEQ ;
                   IF { {} }
                      { { PUSH string "WrongCondition: params.id != ''" ; FAILWITH } } ;
                   DUP ;
                   CAR ;
                   CDR ;
                   PUSH string "" ;
                   COMPARE ;
                   NEQ ;
                   IF { {} }
                      { { PUSH string "WrongCondition: params.nome != ''" ; FAILWITH } } ;
                   DUP ;
                   CDR ;
                   CDR ;
                   PUSH nat 0 ;
                   COMPARE ;
                   LT ;
                   IF { {} }
                      { { PUSH string "WrongCondition: params.telefone > 0" ; FAILWITH } } ;
                   DUP ;
                   CDR ;
                   CAR ;
                   PUSH mutez 0 ;
                   SWAP ;
                   COMPARE ;
                   GE ;
                   IF { {} }
                      { { PUSH string "WrongCondition: params.saldo >= sp.tez(0)" ; FAILWITH } } ;
                   DUP ;
                   DUG 2 ;
                   CDR ;
                   CDR ;
                   DIG 2 ;
                   DUP ;
                   DUG 3 ;
                   CDR ;
                   CAR ;
                   PAIR %saldo %telefone ;
                   DIG 2 ;
                   DUP ;
                   DUG 3 ;
                   CAR ;
                   CDR ;
                   PAIR %nome ;
                   SOME ;
                   DIG 2 ;
                   CAR ;
                   CAR ;
                   UPDATE } } }
           { IF_LEFT
               { { DUP ;
                   PUSH string "" ;
                   COMPARE ;
                   NEQ ;
                   IF { {} }
                      { { PUSH string "WrongCondition: params.id != ''" ; FAILWITH } } ;
                   SWAP ;
                   NONE (pair (string %nome) (pair (mutez %saldo) (nat %telefone))) ;
                   DIG 2 ;
                   UPDATE } }
               { { DUP ;
                   CDR ;
                   CAR ;
                   PUSH string "" ;
                   COMPARE ;
                   NEQ ;
                   IF { {} }
                      { { PUSH string "WrongCondition: params.idOrigem != ''" ; FAILWITH } } ;
                   DUP ;
                   CAR ;
                   PUSH string "" ;
                   COMPARE ;
                   NEQ ;
                   IF { {} }
                      { { PUSH string "WrongCondition: params.idDestino != ''" ; FAILWITH } } ;
                   DUP ;
                   CDR ;
                   CDR ;
                   PUSH mutez 0 ;
                   COMPARE ;
                   LT ;
                   IF { {} }
                      { { PUSH string "WrongCondition: params.valor > sp.tez(0)" ; FAILWITH } } ;
                   SWAP ;
                   DUP ;
                   DUG 2 ;
                   SWAP ;
                   DUP ;
                   DUG 2 ;
                   CDR ;
                   CAR ;
                   GET ;
                   IF_NONE { { PUSH string "Get-item:66" ; FAILWITH } } {} ;
                   CDR ;
                   CAR ;
                   SWAP ;
                   DUP ;
                   DUG 2 ;
                   CDR ;
                   CDR ;
                   COMPARE ;
                   LE ;
                   IF { {} }
                      { { PUSH string
                               "WrongCondition: params.valor <= self.data.clientes[params.idOrigem].saldo" ;
                          FAILWITH } } ;
                   SWAP ;
                   DUP ;
                   DIG 2 ;
                   DUP ;
                   DUG 3 ;
                   CDR ;
                   CAR ;
                   DUP ;
                   DUG 2 ;
                   GET ;
                   IF_NONE { { PUSH string "set_in_top-any" ; FAILWITH } } {} ;
                   DUP ;
                   CAR ;
                   SWAP ;
                   CDR ;
                   CDR ;
                   DIG 4 ;
                   DUP ;
                   DUG 5 ;
                   CDR ;
                   CDR ;
                   DIG 4 ;
                   DUP ;
                   DUG 5 ;
                   DIG 6 ;
                   DUP ;
                   DUG 7 ;
                   CDR ;
                   CAR ;
                   GET ;
                   IF_NONE { { PUSH string "Get-item:66" ; FAILWITH } } {} ;
                   CDR ;
                   CAR ;
                   SUB ;
                   PAIR ;
                   SWAP ;
                   PAIR ;
                   SOME ;
                   SWAP ;
                   UPDATE ;
                   SWAP ;
                   SWAP ;
                   DUP ;
                   DIG 2 ;
                   DUP ;
                   DUG 3 ;
                   CAR ;
                   DUP ;
                   DUG 2 ;
                   GET ;
                   IF_NONE { { PUSH string "set_in_top-any" ; FAILWITH } } {} ;
                   DUP ;
                   CAR ;
                   SWAP ;
                   CDR ;
                   CDR ;
                   DIG 4 ;
                   DUP ;
                   DUG 5 ;
                   CDR ;
                   CDR ;
                   DIG 4 ;
                   DUP ;
                   DUG 5 ;
                   DIG 6 ;
                   CAR ;
                   GET ;
                   IF_NONE { { PUSH string "Get-item:67" ; FAILWITH } } {} ;
                   CDR ;
                   CAR ;
                   ADD ;
                   PAIR ;
                   SWAP ;
                   PAIR ;
                   SOME ;
                   SWAP ;
                   UPDATE } } } ;
         NIL operation ;
         PAIR } }
