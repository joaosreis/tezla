{ storage (map string (pair (pair (mutez %balance) (string %name)) (nat %phoneNumber))) ;
  parameter
    (or (or (or (pair %addCustomer
                   (pair (pair (mutez %balance) (string %cpf)) (string %name))
                   (nat %phoneNumber))
                (string %removeCustomer))
            (pair %transfer (pair (mutez %amount) (string %cpfFrom)) (string %cpfTo)))
        (pair %updateBalance (mutez %amount) (string %cpf))) ;
  code { DUP ;
         CDR ;
         SWAP ;
         CAR ;
         IF_LEFT
           { IF_LEFT
               { IF_LEFT
                   { { DUP ;
                       CAR ;
                       CAR ;
                       CDR ;
                       PUSH string "" ;
                       COMPARE ;
                       NEQ ;
                       IF { {} }
                          { { PUSH string "WrongCondition: params.cpf != ''" ; FAILWITH } } ;
                       DUP ;
                       CAR ;
                       CDR ;
                       PUSH string "" ;
                       COMPARE ;
                       NEQ ;
                       IF { {} }
                          { { PUSH string "WrongCondition: params.name != ''" ; FAILWITH } } ;
                       DUP ;
                       CDR ;
                       PUSH nat 0 ;
                       COMPARE ;
                       LT ;
                       IF { {} }
                          { { PUSH string "WrongCondition: params.phoneNumber > 0" ; FAILWITH } } ;
                       SWAP ;
                       DUP ;
                       DUG 2 ;
                       SWAP ;
                       DUP ;
                       DUG 2 ;
                       CDR ;
                       DIG 2 ;
                       DUP ;
                       DUG 3 ;
                       CAR ;
                       CDR ;
                       DIG 3 ;
                       DUP ;
                       DUG 4 ;
                       CAR ;
                       CAR ;
                       CAR ;
                       PAIR ;
                       PAIR ;
                       SOME ;
                       DIG 2 ;
                       DUP ;
                       DUG 3 ;
                       CAR ;
                       CAR ;
                       CDR ;
                       UPDATE ;
                       DUG 2 ;
                       DROP ;
                       DROP } }
                   { { DUP ;
                       PUSH string "" ;
                       COMPARE ;
                       NEQ ;
                       IF { {} }
                          { { PUSH string "WrongCondition: params.cpf != ''" ; FAILWITH } } ;
                       SWAP ;
                       DUP ;
                       DUG 2 ;
                       NONE (pair (pair (mutez %balance) (string %name)) (nat %phoneNumber)) ;
                       DIG 2 ;
                       DUP ;
                       DUG 3 ;
                       UPDATE ;
                       DUG 2 ;
                       DROP ;
                       DROP } } }
               { { DUP ;
                   CAR ;
                   CDR ;
                   PUSH string "" ;
                   COMPARE ;
                   NEQ ;
                   IF { {} }
                      { { PUSH string "WrongCondition: params.cpfFrom != ''" ; FAILWITH } } ;
                   DUP ;
                   CDR ;
                   PUSH string "" ;
                   COMPARE ;
                   NEQ ;
                   IF { {} }
                      { { PUSH string "WrongCondition: params.cpfTo != ''" ; FAILWITH } } ;
                   DUP ;
                   CAR ;
                   CAR ;
                   PUSH mutez 0 ;
                   COMPARE ;
                   LT ;
                   IF { {} }
                      { { PUSH string "WrongCondition: params.amount > sp.tez(0)" ; FAILWITH } } ;
                   SWAP ;
                   DUP ;
                   DUG 2 ;
                   SWAP ;
                   DUP ;
                   DUG 2 ;
                   CAR ;
                   CDR ;
                   GET ;
                   IF_NONE { { PUSH string "Get-item:57" ; FAILWITH } } {} ;
                   CAR ;
                   CAR ;
                   SWAP ;
                   DUP ;
                   DUG 2 ;
                   CAR ;
                   CAR ;
                   COMPARE ;
                   LE ;
                   IF { {} }
                      { { PUSH string
                               "WrongCondition: params.amount <= self.data.customers[params.cpfFrom].balance" ;
                          FAILWITH } } ;
                   SWAP ;
                   DUP ;
                   DUG 2 ;
                   DUP ;
                   DIG 2 ;
                   DUP ;
                   DUG 3 ;
                   CAR ;
                   CDR ;
                   DUP ;
                   DUG 2 ;
                   GET ;
                   IF_NONE { { PUSH string "set_in_top-any" ; FAILWITH } } {} ;
                   DUP ;
                   CDR ;
                   SWAP ;
                   CAR ;
                   CDR ;
                   DIG 4 ;
                   DUP ;
                   DUG 5 ;
                   CAR ;
                   CAR ;
                   DIG 4 ;
                   DUP ;
                   DUG 5 ;
                   DIG 6 ;
                   DUP ;
                   DUG 7 ;
                   CAR ;
                   CDR ;
                   GET ;
                   IF_NONE { { PUSH string "Get-item:57" ; FAILWITH } } {} ;
                   CAR ;
                   CAR ;
                   SUB ;
                   PAIR ;
                   PAIR ;
                   SOME ;
                   SWAP ;
                   UPDATE ;
                   DUG 2 ;
                   SWAP ;
                   DROP ;
                   SWAP ;
                   DUP ;
                   DUG 2 ;
                   DUP ;
                   DIG 2 ;
                   DUP ;
                   DUG 3 ;
                   CDR ;
                   DUP ;
                   DUG 2 ;
                   GET ;
                   IF_NONE { { PUSH string "set_in_top-any" ; FAILWITH } } {} ;
                   DUP ;
                   CDR ;
                   SWAP ;
                   CAR ;
                   CDR ;
                   DIG 4 ;
                   DUP ;
                   DUG 5 ;
                   CAR ;
                   CAR ;
                   DIG 4 ;
                   DUP ;
                   DUG 5 ;
                   DIG 6 ;
                   DUP ;
                   DUG 7 ;
                   CDR ;
                   GET ;
                   IF_NONE { { PUSH string "Get-item:58" ; FAILWITH } } {} ;
                   CAR ;
                   CAR ;
                   ADD ;
                   PAIR ;
                   PAIR ;
                   SOME ;
                   SWAP ;
                   UPDATE ;
                   DUG 2 ;
                   DROP ;
                   DROP } } }
           { { DUP ;
               CDR ;
               PUSH string "" ;
               COMPARE ;
               NEQ ;
               IF { {} }
                  { { PUSH string "WrongCondition: params.cpf != ''" ; FAILWITH } } ;
               SWAP ;
               DUP ;
               DUG 2 ;
               DUP ;
               DIG 2 ;
               DUP ;
               DUG 3 ;
               CDR ;
               DUP ;
               DUG 2 ;
               GET ;
               IF_NONE { { PUSH string "set_in_top-any" ; FAILWITH } } {} ;
               DUP ;
               CDR ;
               SWAP ;
               CAR ;
               CDR ;
               DIG 4 ;
               DUP ;
               DUG 5 ;
               CAR ;
               PAIR ;
               PAIR ;
               SOME ;
               SWAP ;
               UPDATE ;
               DUG 2 ;
               DROP ;
               DROP } } ;
         NIL operation ;
         PAIR } }
